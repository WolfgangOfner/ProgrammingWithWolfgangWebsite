<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Model Validation in ASP.NET MVC" /><meta name="author" content="Wolfgang Ofner" /><meta property="og:locale" content="en_US" /><meta name="description" content="Model validation is the process of checking whether the user input is suitable for model binding and if not it should provide useful error messages to the user. The first part is to ensure that only valid entries are made. This should filter inputs which don’t make any sense. This could be a birth date in the future or an appointment date in the past. As important as checking for valid data is to inform the user about the wrong input and help him to enter the information in the expected form. Without any help, it can be frustrating and annoying for the user which might end up in losing a potential customer. To help the developer, ASP.NET MVC provides several possibilities for model validation. Setting up the project for Model Validation I created a new ASP.NET MVC project with the empty template and add folders and core references for MVC. Setting up the ASP.NET MVC project for model validation Then I create a simple Home controller with two actions. The first action returns a view to the user to enter customer information and the second action processes the user input. In a real-world solution, the customer information would be stored probably in a database. In this example, I don’t do anything with it except passing to a second view to display the information. Implementation of the Home controller To work with customers, I need to implement a customer model. I want to keep the customer as simple as possible and therefore the class only has basic properties. Implementation of the customer class I keep the views simple too. The RegisterCustomer view takes a name, birthday and has a checkbox to accept the terms and conditions. Register new customer view Right now the user can enter whatever he wants and the application accepts it. To create a valid customer the user have to provide a name, a birth date (in the dd/mm/yyyy format) in the past and he must accept the terms and condition. To enforce these requirements, I use model validation. Explicitly validating a Model One possible approach of checking if the model is valid is checking directly in the action. Validating the model directly in the action I check if every field contains the expected value. If not, I add a model error to the Modelstate. After I checked every attribute, I return the RegisterComplete view if the Modelstate is valid and if not I return the input view again. I added some CSS to the HTML which colors the border of the element with the model error in red. CSS to highlight model error in the view (Source) Highlighted errors in the view Displaying error messages Highlighting input fields which contain wrong values is a nice beginning but it doesn’t tell the user what is wrong. The MVC framework provides several helper methods to display useful error messages to the user. The simplest one is Html.ValidationSumary(). Displaying error messages with Html.ValidationSummar This helper method adds all error messages above the form. If there are none, nothing will be rendered before the form. Displaying error messages to the user The Html.ValidationSummary helper has several overloaded implementations. See the following tables for the different versions: Overloaded Method Description Html.ValidationSummary() Generates a summary for all validation errors Html.ValidationSummary(bool) If the bool parameter is true, then only model-level errors are displayed. If the parameter is false, then all errors are shown. Html.ValidationSummary(string) Displays a message (contained in the string parameter) before a summary of all the validation errors. Html.ValidationSummary(bool, string) Displays a message before the validation errors. If the bool parameter is true, only model-level errors will be shown. Model level validation messages Another approach to validate a model is model level validation. This is used when you have to ensure that two or more properties interact correctly. I know it’s a stupid example but for whatever reason, you don’t allow a customers name to be Wolfgang with his birthday yesterday. Adding a model level error to the ModelState is also achieved by using the AddModelError with the difference that the first parameter is an empty string. Additionally, you have to pass true as the parameter for the ValidationSummary in the view. Model level error implementation Displaying the model level error message Property level validation messages Displaying all error messages on the top of the form might be ok if the form is as short as mine but if the form has 20 rows, the user will be confused with all the error messages. The solution for this is the ValidationMessageFor HTML helper. This method takes a lambda expression with the name of the property of which it should display the error message. Implementation of the ValidationMessageFor helper for every input field Displaying an error message for every input field Validation using the Model Binder The default model binder performs validation during the binding process. If it can’t bind a property, it will display an error message. For example, if you leave the birthday empty, the model binder will display a message prompting the user to enter a birthday. Error message by model binder because of empty birthday field The model binder also displays an error message if you try to enter an invalid value, for example, a string as birthday. Error message by model binder because of the wrong value in the birthday field Modern browsers like Chrome or Edge don’t even let the user enter a string. They offer a date picker to help the user entering the right value. The Internet Explorer, on the other hand, doesn’t offer this feature (surprise, surprise IE sucks). Validation using Metadata The MVC framework enables you to add attributes to properties of a model. The advantage of this approach is that the attributes and therefore the model validation are always enforced when the model is used. Using built-in validation attributes in the model class I applied the Required attribute with and without a specific error message and the Range attribute to ensure that the checkbox is checked. If there is no custom error, a default error will be displayed. It feels unnatural to use the Range attribute for a checkbox but the framework doesn’t provide an attribute for bool operations. Therefore, I use the Range attribute and set the range from true to true. ASP.NET MVC provides five useful built-in attributes for validation: Attribute Example Description Compare [Compare(&#8220;Password&#8221;)] Two properties must have the same value. This is useful when you ask the user to provide the same information twice, such as an e-mail address or a password. Range [Range(5, 10)] A numeric value must lie between the specified minimum and maximum values. To specify a boundary on only one side, use a MinValue or MaxValue constant—for example, [Range(int.MinValue, 10)]. RegularExpression [RegularExpression(&#8220;regex&#8221;)] A string value must match the specified regular expression pattern. Note that the pattern has to match the entire user-supplied value, not just a substring within it. By default, it matches case sensitively, but you can make it case insensitive by applying the (?i) modifier—that is, [RegularExpression(&#8220;(?i)regex&#8221;)]. Required [Required] The value must not be empty or be a string consisting only of spaces. If you want to treat whitespace as valid, use [Required(AllowEmptyStrings = true)]. StringLength [StringLength(12)] A string value must not be longer than the specified maximum length. You can also specify a minimum length: [StringLength(12, MinimumLength=8)]. Validation using a custom property attribute The ASP.NET MVC framework is highly custom able and therefore it is easy to implement your own attribute for validating a property. I don&#8217;t like the Range attribute for a checkbox and therefore I will create my own called MustBeTrue. As I already said, implementing your own attribute is pretty simple. You only have to create a new class which derives from ValidationAttribute and then overrides the IsValid method. Implementation of a custom attribute for property validation Now I can replace the Range attribute with the MustBeTrue attribute on the property. Applying my custom attribute to a property As you can see, I can still use the ErrorMessage property to display the same error message as before. Implementing a custom property by deriving from a built-in property You can also derive from a built-in validation property, for example, Required, and extend its functionality. I create a new validation property which derives from RequiredAttribute and override the IsValid method again. Then I return IsValid from the base class and my additional check. In this case, I want to make sure that the date is in the past. Extending the Required attribute with my custom validation Performing client-side validation All previous validation techniques are for server-side validation. This means that the user sends the data to the server, then it gets validated and sent back. Sending data back and forth uses a lot of bandwidth which can lead to problems if you have a very popular application or if the user has a slow connection, for example on his mobile phone. Therefore it would be better to do some validation on the client even before sending the data to the server. This reduces the amount of data sent back and forth and also increases the user experience. Setting up client-side validation To enable client-side validation change the values of ClientValidationEnabled and UnobtrusiveJavaScriptEnabled in the web.config to true. Configuring web.config for client-side validation The next step is to install the following NuGet packages: jQuery jQuery.Validation Microsoft.jQuery.Unobtrusive.Validation The last step is to add these three Javascript files to your layout or view. Using client-side validation Using client-side validation is pretty simple. Just add validation properties to your model, for example, Required or StringLength. Adding validation attributes to the model for client-side validation Error message from client-side validation Thanks to client-side validation the user gets informed that the name has to be at least two characters long even before the form is sent to the server. Client-side validation is a great feature. However, you still have to do server-side validation to ensure the integrity of the data. Performing remote validation Remote validation is a mix of server-side and client-side validation. It is often used to check whether an entered username or email is already taken. The check is performed in the background using ajax without the user doing anything. It is a pretty lightweight request but it still should be used for only some input fields since every input is sent back to the server which leads to a lot of requests. Implementing remote validation Implementing remote validation consists of two steps. The first step is to implement an action in your controller which returns a JsonResult and takes one string parameter. Implementation of the remote validation in the controller In the action, I check if the customer name is Wolfgang. If it is Wolfgang, I return an error message. Note that the parameter is Name with an upper case N. I have to do this because the parameter has to match the name of the input field you want to check. I also have to allow Json GET requests because they are disallowed by the MVC framework by default. The second step is to add the Remote attribute to the Name property of the Customer class. Additionally, I add the validation method name and the controller. Adding the remote attribute to the property of the model class That’s it. When you enter a name, you will get an error message as soon as you have finished entering Wolfgang. If you change one letter, the error message will disappear. Remote validation of the customer name Conclusion In this post, I showed different approaches on how to perform model validation. Model validation is necessary to ensure data integrity and check whether the user entered the valid data. For more details about model validation, I highly recommend the books Pro ASP.NET MVC 5 and Pro ASP.NET MVC 5 Plattform. You can find the source code on GitHub." /><meta property="og:description" content="Model validation is the process of checking whether the user input is suitable for model binding and if not it should provide useful error messages to the user. The first part is to ensure that only valid entries are made. This should filter inputs which don’t make any sense. This could be a birth date in the future or an appointment date in the past. As important as checking for valid data is to inform the user about the wrong input and help him to enter the information in the expected form. Without any help, it can be frustrating and annoying for the user which might end up in losing a potential customer. To help the developer, ASP.NET MVC provides several possibilities for model validation. Setting up the project for Model Validation I created a new ASP.NET MVC project with the empty template and add folders and core references for MVC. Setting up the ASP.NET MVC project for model validation Then I create a simple Home controller with two actions. The first action returns a view to the user to enter customer information and the second action processes the user input. In a real-world solution, the customer information would be stored probably in a database. In this example, I don’t do anything with it except passing to a second view to display the information. Implementation of the Home controller To work with customers, I need to implement a customer model. I want to keep the customer as simple as possible and therefore the class only has basic properties. Implementation of the customer class I keep the views simple too. The RegisterCustomer view takes a name, birthday and has a checkbox to accept the terms and conditions. Register new customer view Right now the user can enter whatever he wants and the application accepts it. To create a valid customer the user have to provide a name, a birth date (in the dd/mm/yyyy format) in the past and he must accept the terms and condition. To enforce these requirements, I use model validation. Explicitly validating a Model One possible approach of checking if the model is valid is checking directly in the action. Validating the model directly in the action I check if every field contains the expected value. If not, I add a model error to the Modelstate. After I checked every attribute, I return the RegisterComplete view if the Modelstate is valid and if not I return the input view again. I added some CSS to the HTML which colors the border of the element with the model error in red. CSS to highlight model error in the view (Source) Highlighted errors in the view Displaying error messages Highlighting input fields which contain wrong values is a nice beginning but it doesn’t tell the user what is wrong. The MVC framework provides several helper methods to display useful error messages to the user. The simplest one is Html.ValidationSumary(). Displaying error messages with Html.ValidationSummar This helper method adds all error messages above the form. If there are none, nothing will be rendered before the form. Displaying error messages to the user The Html.ValidationSummary helper has several overloaded implementations. See the following tables for the different versions: Overloaded Method Description Html.ValidationSummary() Generates a summary for all validation errors Html.ValidationSummary(bool) If the bool parameter is true, then only model-level errors are displayed. If the parameter is false, then all errors are shown. Html.ValidationSummary(string) Displays a message (contained in the string parameter) before a summary of all the validation errors. Html.ValidationSummary(bool, string) Displays a message before the validation errors. If the bool parameter is true, only model-level errors will be shown. Model level validation messages Another approach to validate a model is model level validation. This is used when you have to ensure that two or more properties interact correctly. I know it’s a stupid example but for whatever reason, you don’t allow a customers name to be Wolfgang with his birthday yesterday. Adding a model level error to the ModelState is also achieved by using the AddModelError with the difference that the first parameter is an empty string. Additionally, you have to pass true as the parameter for the ValidationSummary in the view. Model level error implementation Displaying the model level error message Property level validation messages Displaying all error messages on the top of the form might be ok if the form is as short as mine but if the form has 20 rows, the user will be confused with all the error messages. The solution for this is the ValidationMessageFor HTML helper. This method takes a lambda expression with the name of the property of which it should display the error message. Implementation of the ValidationMessageFor helper for every input field Displaying an error message for every input field Validation using the Model Binder The default model binder performs validation during the binding process. If it can’t bind a property, it will display an error message. For example, if you leave the birthday empty, the model binder will display a message prompting the user to enter a birthday. Error message by model binder because of empty birthday field The model binder also displays an error message if you try to enter an invalid value, for example, a string as birthday. Error message by model binder because of the wrong value in the birthday field Modern browsers like Chrome or Edge don’t even let the user enter a string. They offer a date picker to help the user entering the right value. The Internet Explorer, on the other hand, doesn’t offer this feature (surprise, surprise IE sucks). Validation using Metadata The MVC framework enables you to add attributes to properties of a model. The advantage of this approach is that the attributes and therefore the model validation are always enforced when the model is used. Using built-in validation attributes in the model class I applied the Required attribute with and without a specific error message and the Range attribute to ensure that the checkbox is checked. If there is no custom error, a default error will be displayed. It feels unnatural to use the Range attribute for a checkbox but the framework doesn’t provide an attribute for bool operations. Therefore, I use the Range attribute and set the range from true to true. ASP.NET MVC provides five useful built-in attributes for validation: Attribute Example Description Compare [Compare(&#8220;Password&#8221;)] Two properties must have the same value. This is useful when you ask the user to provide the same information twice, such as an e-mail address or a password. Range [Range(5, 10)] A numeric value must lie between the specified minimum and maximum values. To specify a boundary on only one side, use a MinValue or MaxValue constant—for example, [Range(int.MinValue, 10)]. RegularExpression [RegularExpression(&#8220;regex&#8221;)] A string value must match the specified regular expression pattern. Note that the pattern has to match the entire user-supplied value, not just a substring within it. By default, it matches case sensitively, but you can make it case insensitive by applying the (?i) modifier—that is, [RegularExpression(&#8220;(?i)regex&#8221;)]. Required [Required] The value must not be empty or be a string consisting only of spaces. If you want to treat whitespace as valid, use [Required(AllowEmptyStrings = true)]. StringLength [StringLength(12)] A string value must not be longer than the specified maximum length. You can also specify a minimum length: [StringLength(12, MinimumLength=8)]. Validation using a custom property attribute The ASP.NET MVC framework is highly custom able and therefore it is easy to implement your own attribute for validating a property. I don&#8217;t like the Range attribute for a checkbox and therefore I will create my own called MustBeTrue. As I already said, implementing your own attribute is pretty simple. You only have to create a new class which derives from ValidationAttribute and then overrides the IsValid method. Implementation of a custom attribute for property validation Now I can replace the Range attribute with the MustBeTrue attribute on the property. Applying my custom attribute to a property As you can see, I can still use the ErrorMessage property to display the same error message as before. Implementing a custom property by deriving from a built-in property You can also derive from a built-in validation property, for example, Required, and extend its functionality. I create a new validation property which derives from RequiredAttribute and override the IsValid method again. Then I return IsValid from the base class and my additional check. In this case, I want to make sure that the date is in the past. Extending the Required attribute with my custom validation Performing client-side validation All previous validation techniques are for server-side validation. This means that the user sends the data to the server, then it gets validated and sent back. Sending data back and forth uses a lot of bandwidth which can lead to problems if you have a very popular application or if the user has a slow connection, for example on his mobile phone. Therefore it would be better to do some validation on the client even before sending the data to the server. This reduces the amount of data sent back and forth and also increases the user experience. Setting up client-side validation To enable client-side validation change the values of ClientValidationEnabled and UnobtrusiveJavaScriptEnabled in the web.config to true. Configuring web.config for client-side validation The next step is to install the following NuGet packages: jQuery jQuery.Validation Microsoft.jQuery.Unobtrusive.Validation The last step is to add these three Javascript files to your layout or view. Using client-side validation Using client-side validation is pretty simple. Just add validation properties to your model, for example, Required or StringLength. Adding validation attributes to the model for client-side validation Error message from client-side validation Thanks to client-side validation the user gets informed that the name has to be at least two characters long even before the form is sent to the server. Client-side validation is a great feature. However, you still have to do server-side validation to ensure the integrity of the data. Performing remote validation Remote validation is a mix of server-side and client-side validation. It is often used to check whether an entered username or email is already taken. The check is performed in the background using ajax without the user doing anything. It is a pretty lightweight request but it still should be used for only some input fields since every input is sent back to the server which leads to a lot of requests. Implementing remote validation Implementing remote validation consists of two steps. The first step is to implement an action in your controller which returns a JsonResult and takes one string parameter. Implementation of the remote validation in the controller In the action, I check if the customer name is Wolfgang. If it is Wolfgang, I return an error message. Note that the parameter is Name with an upper case N. I have to do this because the parameter has to match the name of the input field you want to check. I also have to allow Json GET requests because they are disallowed by the MVC framework by default. The second step is to add the Remote attribute to the Name property of the Customer class. Additionally, I add the validation method name and the controller. Adding the remote attribute to the property of the model class That’s it. When you enter a name, you will get an error message as soon as you have finished entering Wolfgang. If you change one letter, the error message will disappear. Remote validation of the customer name Conclusion In this post, I showed different approaches on how to perform model validation. Model validation is necessary to ensure data integrity and check whether the user entered the valid data. For more details about model validation, I highly recommend the books Pro ASP.NET MVC 5 and Pro ASP.NET MVC 5 Plattform. You can find the source code on GitHub." /><link rel="canonical" href="https://www.programmingwithwolfgang.com/model-validation-in-asp-net-mvc/" /><meta property="og:url" content="https://www.programmingwithwolfgang.com/model-validation-in-asp-net-mvc/" /><meta property="og:site_name" content="Programming With Wolfgang" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-02-03T18:33:31+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Model Validation in ASP.NET MVC" /><meta name="twitter:site" content="@wolfgang_ofner" /><meta name="twitter:creator" content="@Wolfgang Ofner" /><meta name="google-site-verification" content="xxsPm-h6A0B6a0QMgqXO80PU4DbMt4Dq06p-SGzB3TU" /> <script type="application/ld+json"> {"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.programmingwithwolfgang.com/model-validation-in-asp-net-mvc/"},"author":{"@type":"Person","name":"Wolfgang Ofner"},"url":"https://www.programmingwithwolfgang.com/model-validation-in-asp-net-mvc/","description":"Model validation is the process of checking whether the user input is suitable for model binding and if not it should provide useful error messages to the user. The first part is to ensure that only valid entries are made. This should filter inputs which don’t make any sense. This could be a birth date in the future or an appointment date in the past. As important as checking for valid data is to inform the user about the wrong input and help him to enter the information in the expected form. Without any help, it can be frustrating and annoying for the user which might end up in losing a potential customer. To help the developer, ASP.NET MVC provides several possibilities for model validation. Setting up the project for Model Validation I created a new ASP.NET MVC project with the empty template and add folders and core references for MVC. Setting up the ASP.NET MVC project for model validation Then I create a simple Home controller with two actions. The first action returns a view to the user to enter customer information and the second action processes the user input. In a real-world solution, the customer information would be stored probably in a database. In this example, I don’t do anything with it except passing to a second view to display the information. Implementation of the Home controller To work with customers, I need to implement a customer model. I want to keep the customer as simple as possible and therefore the class only has basic properties. Implementation of the customer class I keep the views simple too. The RegisterCustomer view takes a name, birthday and has a checkbox to accept the terms and conditions. Register new customer view Right now the user can enter whatever he wants and the application accepts it. To create a valid customer the user have to provide a name, a birth date (in the dd/mm/yyyy format) in the past and he must accept the terms and condition. To enforce these requirements, I use model validation. Explicitly validating a Model One possible approach of checking if the model is valid is checking directly in the action. Validating the model directly in the action I check if every field contains the expected value. If not, I add a model error to the Modelstate. After I checked every attribute, I return the RegisterComplete view if the Modelstate is valid and if not I return the input view again. I added some CSS to the HTML which colors the border of the element with the model error in red. CSS to highlight model error in the view (Source) Highlighted errors in the view Displaying error messages Highlighting input fields which contain wrong values is a nice beginning but it doesn’t tell the user what is wrong. The MVC framework provides several helper methods to display useful error messages to the user. The simplest one is Html.ValidationSumary(). Displaying error messages with Html.ValidationSummar This helper method adds all error messages above the form. If there are none, nothing will be rendered before the form. Displaying error messages to the user The Html.ValidationSummary helper has several overloaded implementations. See the following tables for the different versions: Overloaded Method Description Html.ValidationSummary() Generates a summary for all validation errors Html.ValidationSummary(bool) If the bool parameter is true, then only model-level errors are displayed. If the parameter is false, then all errors are shown. Html.ValidationSummary(string) Displays a message (contained in the string parameter) before a summary of all the validation errors. Html.ValidationSummary(bool, string) Displays a message before the validation errors. If the bool parameter is true, only model-level errors will be shown. Model level validation messages Another approach to validate a model is model level validation. This is used when you have to ensure that two or more properties interact correctly. I know it’s a stupid example but for whatever reason, you don’t allow a customers name to be Wolfgang with his birthday yesterday. Adding a model level error to the ModelState is also achieved by using the AddModelError with the difference that the first parameter is an empty string. Additionally, you have to pass true as the parameter for the ValidationSummary in the view. Model level error implementation Displaying the model level error message Property level validation messages Displaying all error messages on the top of the form might be ok if the form is as short as mine but if the form has 20 rows, the user will be confused with all the error messages. The solution for this is the ValidationMessageFor HTML helper. This method takes a lambda expression with the name of the property of which it should display the error message. Implementation of the ValidationMessageFor helper for every input field Displaying an error message for every input field Validation using the Model Binder The default model binder performs validation during the binding process. If it can’t bind a property, it will display an error message. For example, if you leave the birthday empty, the model binder will display a message prompting the user to enter a birthday. Error message by model binder because of empty birthday field The model binder also displays an error message if you try to enter an invalid value, for example, a string as birthday. Error message by model binder because of the wrong value in the birthday field Modern browsers like Chrome or Edge don’t even let the user enter a string. They offer a date picker to help the user entering the right value. The Internet Explorer, on the other hand, doesn’t offer this feature (surprise, surprise IE sucks). Validation using Metadata The MVC framework enables you to add attributes to properties of a model. The advantage of this approach is that the attributes and therefore the model validation are always enforced when the model is used. Using built-in validation attributes in the model class I applied the Required attribute with and without a specific error message and the Range attribute to ensure that the checkbox is checked. If there is no custom error, a default error will be displayed. It feels unnatural to use the Range attribute for a checkbox but the framework doesn’t provide an attribute for bool operations. Therefore, I use the Range attribute and set the range from true to true. ASP.NET MVC provides five useful built-in attributes for validation: Attribute Example Description Compare [Compare(&#8220;Password&#8221;)] Two properties must have the same value. This is useful when you ask the user to provide the same information twice, such as an e-mail address or a password. Range [Range(5, 10)] A numeric value must lie between the specified minimum and maximum values. To specify a boundary on only one side, use a MinValue or MaxValue constant—for example, [Range(int.MinValue, 10)]. RegularExpression [RegularExpression(&#8220;regex&#8221;)] A string value must match the specified regular expression pattern. Note that the pattern has to match the entire user-supplied value, not just a substring within it. By default, it matches case sensitively, but you can make it case insensitive by applying the (?i) modifier—that is, [RegularExpression(&#8220;(?i)regex&#8221;)]. Required [Required] The value must not be empty or be a string consisting only of spaces. If you want to treat whitespace as valid, use [Required(AllowEmptyStrings = true)]. StringLength [StringLength(12)] A string value must not be longer than the specified maximum length. You can also specify a minimum length: [StringLength(12, MinimumLength=8)]. Validation using a custom property attribute The ASP.NET MVC framework is highly custom able and therefore it is easy to implement your own attribute for validating a property. I don&#8217;t like the Range attribute for a checkbox and therefore I will create my own called MustBeTrue. As I already said, implementing your own attribute is pretty simple. You only have to create a new class which derives from ValidationAttribute and then overrides the IsValid method. Implementation of a custom attribute for property validation Now I can replace the Range attribute with the MustBeTrue attribute on the property. Applying my custom attribute to a property As you can see, I can still use the ErrorMessage property to display the same error message as before. Implementing a custom property by deriving from a built-in property You can also derive from a built-in validation property, for example, Required, and extend its functionality. I create a new validation property which derives from RequiredAttribute and override the IsValid method again. Then I return IsValid from the base class and my additional check. In this case, I want to make sure that the date is in the past. Extending the Required attribute with my custom validation Performing client-side validation All previous validation techniques are for server-side validation. This means that the user sends the data to the server, then it gets validated and sent back. Sending data back and forth uses a lot of bandwidth which can lead to problems if you have a very popular application or if the user has a slow connection, for example on his mobile phone. Therefore it would be better to do some validation on the client even before sending the data to the server. This reduces the amount of data sent back and forth and also increases the user experience. Setting up client-side validation To enable client-side validation change the values of ClientValidationEnabled and UnobtrusiveJavaScriptEnabled in the web.config to true. Configuring web.config for client-side validation The next step is to install the following NuGet packages: jQuery jQuery.Validation Microsoft.jQuery.Unobtrusive.Validation The last step is to add these three Javascript files to your layout or view. Using client-side validation Using client-side validation is pretty simple. Just add validation properties to your model, for example, Required or StringLength. Adding validation attributes to the model for client-side validation Error message from client-side validation Thanks to client-side validation the user gets informed that the name has to be at least two characters long even before the form is sent to the server. Client-side validation is a great feature. However, you still have to do server-side validation to ensure the integrity of the data. Performing remote validation Remote validation is a mix of server-side and client-side validation. It is often used to check whether an entered username or email is already taken. The check is performed in the background using ajax without the user doing anything. It is a pretty lightweight request but it still should be used for only some input fields since every input is sent back to the server which leads to a lot of requests. Implementing remote validation Implementing remote validation consists of two steps. The first step is to implement an action in your controller which returns a JsonResult and takes one string parameter. Implementation of the remote validation in the controller In the action, I check if the customer name is Wolfgang. If it is Wolfgang, I return an error message. Note that the parameter is Name with an upper case N. I have to do this because the parameter has to match the name of the input field you want to check. I also have to allow Json GET requests because they are disallowed by the MVC framework by default. The second step is to add the Remote attribute to the Name property of the Customer class. Additionally, I add the validation method name and the controller. Adding the remote attribute to the property of the model class That’s it. When you enter a name, you will get an error message as soon as you have finished entering Wolfgang. If you change one letter, the error message will disappear. Remote validation of the customer name Conclusion In this post, I showed different approaches on how to perform model validation. Model validation is necessary to ensure data integrity and check whether the user entered the valid data. For more details about model validation, I highly recommend the books Pro ASP.NET MVC 5 and Pro ASP.NET MVC 5 Plattform. You can find the source code on GitHub.","@type":"BlogPosting","headline":"Model Validation in ASP.NET MVC","dateModified":"2020-11-25T18:17:18+01:00","datePublished":"2018-02-03T18:33:31+01:00","@context":"https://schema.org"}</script><title>Model Validation in ASP.NET MVC | Programming With Wolfgang</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-112077092-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-112077092-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/author/wolfgang-small.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Programming With Wolfgang</a></div><div class="site-subtitle font-italic">Let's talk programming</div></div><div class="w-100 d-flex justify-content-center"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span></div><ul class="w-100" style="margin-top: 1em;"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/wolfgangofner" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/wolfgang_ofner" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/wolfgangofner" aria-label="linkedin" class="order-5" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['wolfgang','programmingwithwolfgang.com'].join('@')" aria-label="email" class="order-6" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-7" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="d-sm-none row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Model Validation in ASP.NET MVC</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Model Validation in ASP.NET MVC</div><div style="visibility:hidden;"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel">Cancel</span></div></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Model Validation in ASP.NET MVC</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Feb 3, 2018, 6:33 PM +0100" > Feb 3, 2018 <i class="unloaded">2018-02-03T18:33:31+01:00</i> </span> by <span class="author"> Wolfgang Ofner </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Nov 25, 2020, 6:17 PM +0100" > Nov 25, 2020 <i class="unloaded">2020-11-25T18:17:18+01:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1970 words">23 min</span></div></div><div class="post-content"><p>Model validation is the process of checking whether the user input is suitable for <a href="/model-binding-in-asp-net-mvc/" target="_blank" rel="noopener noreferrer">model binding</a> and if not it should provide useful error messages to the user. The first part is to ensure that only valid entries are made. This should filter inputs which don’t make any sense. This could be a birth date in the future or an appointment date in the past. As important as checking for valid data is to inform the user about the wrong input and help him to enter the information in the expected form. Without any help, it can be frustrating and annoying for the user which might end up in losing a potential customer.</p><p>To help the developer, ASP.NET MVC provides several possibilities for model validation.</p><h2 id="setting-up-the-project-for-model-validation">Setting up the project for Model Validation</h2><p>I created a new ASP.NET MVC project with the empty template and add folders and core references for MVC.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Set-up-project.jpg"><img loading="lazy" title="Setting up the ASP.NET MVC project for model validation" src="/assets/img/posts/2018/01/Set-up-project.jpg" alt="Setting up the ASP.NET MVC project for model validation" /></a><p> Setting up the ASP.NET MVC project for model validation</p></div><p>Then I create a simple Home controller with two actions. The first action returns a view to the user to enter customer information and the second action processes the user input. In a real-world solution, the customer information would be stored probably in a database. In this example, I don’t do anything with it except passing to a second view to display the information.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Implementation-of-the-Home-controller.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Implementation-of-the-Home-controller.jpg" alt="Implementation of the Home controller" /></a><p> Implementation of the Home controller</p></div><p>To work with customers, I need to implement a customer model. I want to keep the customer as simple as possible and therefore the class only has basic properties.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Implementation-of-the-customer-class.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Implementation-of-the-customer-class.jpg" alt="Implementation of the customer class" /></a><p> Implementation of the customer class</p></div><p>I keep the views simple too. The RegisterCustomer view takes a name, birthday and has a checkbox to accept the terms and conditions.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Register-new-customer-view.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Register-new-customer-view.jpg" alt="Register new customer view" /></a><p> Register new customer view</p></div><p>Right now the user can enter whatever he wants and the application accepts it. To create a valid customer the user have to provide a name, a birth date (in the dd/mm/yyyy format) in the past and he must accept the terms and condition.</p><p>To enforce these requirements, I use model validation.</p><h2 id="explicitly-validating-a-model">Explicitly validating a Model</h2><p>One possible approach of checking if the model is valid is checking directly in the action.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Validating-the-model-directly-in-the-action.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Validating-the-model-directly-in-the-action.jpg" alt="Validating the model directly in the action" /></a><p> Validating the model directly in the action</p></div><p>I check if every field contains the expected value. If not, I add a model error to the Modelstate. After I checked every attribute, I return the RegisterComplete view if the Modelstate is valid and if not I return the input view again.</p><p>I added some CSS to the HTML which colors the border of the element with the model error in red.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/CSS-to-highlight-model-error-in-the-view.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/CSS-to-highlight-model-error-in-the-view.jpg" alt="CSS to highlight model error in the view" /></a><p> CSS to highlight model error in the view (<a href="http://amzn.to/2mgRbTy" target="_blank" rel="noopener noreferrer">Source</a>)</p></div><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Highlighted-errors-in-the-view.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Highlighted-errors-in-the-view.jpg" alt="Highlighted errors in the view" /></a><p> Highlighted errors in the view</p></div><h2 id="displaying-error-messages">Displaying error messages</h2><p>Highlighting input fields which contain wrong values is a nice beginning but it doesn’t tell the user what is wrong. The MVC framework provides several helper methods to display useful error messages to the user. The simplest one is Html.ValidationSumary().</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Displaying-error-messages-with-Html.ValidationSummar.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Displaying-error-messages-with-Html.ValidationSummar.jpg" alt="Displaying error messages with Html.ValidationSummar" /></a><p> Displaying error messages with Html.ValidationSummar</p></div><p>This helper method adds all error messages above the form. If there are none, nothing will be rendered before the form.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Displaying-error-messages-to-the-user.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Displaying-error-messages-to-the-user.jpg" alt="Displaying error messages to the user" /></a><p> Displaying error messages to the user</p></div><p>The Html.ValidationSummary helper has several overloaded implementations. See the following tables for the different versions:</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><tr><td> Overloaded Method<td> Description<tr><td> Html.ValidationSummary()<td> Generates a summary for all validation errors<tr><td> Html.ValidationSummary(bool)<td> If the bool parameter is true, then only model-level errors are displayed. If the parameter is false, then all errors are shown.<tr><td> Html.ValidationSummary(string)<td> Displays a message (contained in the string parameter) before a summary of all the validation errors.<tr><td> Html.ValidationSummary(bool, string)<td> Displays a message before the validation errors. If the bool parameter is true, only model-level errors will be shown.</table></div><h3 id="model-level-validation-messages">Model level validation messages</h3><p>Another approach to validate a model is model level validation. This is used when you have to ensure that two or more properties interact correctly. I know it’s a stupid example but for whatever reason, you don’t allow a customers name to be Wolfgang with his birthday yesterday. Adding a model level error to the ModelState is also achieved by using the AddModelError with the difference that the first parameter is an empty string. Additionally, you have to pass true as the parameter for the ValidationSummary in the view.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Model-level-error-implementation.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Model-level-error-implementation.jpg" alt="Model level error implementation" /></a><p> Model level error implementation</p></div><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Displaying-the-model-level-error-message.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Displaying-the-model-level-error-message.jpg" alt="Displaying the model level error message" /></a><p> Displaying the model level error message</p></div><h3 id="property-level-validation-messages">Property level validation messages</h3><p>Displaying all error messages on the top of the form might be ok if the form is as short as mine but if the form has 20 rows, the user will be confused with all the error messages. The solution for this is the ValidationMessageFor HTML helper. This method takes a lambda expression with the name of the property of which it should display the error message.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Implementation-of-the-ValidationMessageFor-helper-for-every-input-field.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Implementation-of-the-ValidationMessageFor-helper-for-every-input-field.jpg" alt="Implementation of the ValidationMessageFor helper for every input field" /></a><p> Implementation of the ValidationMessageFor helper for every input field</p></div><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Displaying-an-error-message-for-every-input-field.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Displaying-an-error-message-for-every-input-field.jpg" alt="Displaying an error message for every input field" /></a><p> Displaying an error message for every input field</p></div><h2 id="validation-using-the-model-binder">Validation using the Model Binder</h2><p>The default <a href="/model-binding-in-asp-net-mvc/" target="_blank" rel="noopener noreferrer">model binder</a> performs validation during the binding process. If it can’t bind a property, it will display an error message. For example, if you leave the birthday empty, the model binder will display a message prompting the user to enter a birthday.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Error-message-by-model-binder-because-of-empty-birthday-field.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Error-message-by-model-binder-because-of-empty-birthday-field.jpg" alt="Error message by model binder because of empty birthday field" /></a><p> Error message by model binder because of empty birthday field</p></div><p>The model binder also displays an error message if you try to enter an invalid value, for example, a string as birthday.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Error-message-by-model-binder-because-of-the-wrong-value-in-the-birthday-field.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Error-message-by-model-binder-because-of-the-wrong-value-in-the-birthday-field.jpg" alt="Error message by model binder because of the wrong value in the birthday field" /></a><p> Error message by model binder because of the wrong value in the birthday field</p></div><p>Modern browsers like Chrome or Edge don’t even let the user enter a string. They offer a date picker to help the user entering the right value. The Internet Explorer, on the other hand, doesn’t offer this feature (surprise, surprise IE sucks).</p><h2 id="validation-using-metadata">Validation using Metadata</h2><p>The MVC framework enables you to add attributes to properties of a model. The advantage of this approach is that the attributes and therefore the model validation are always enforced when the model is used.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Using-Metadata-in-the-model-class.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Using-Metadata-in-the-model-class.jpg" alt="Using Metadata in the model class" /></a><p> Using built-in validation attributes in the model class</p></div><p>I applied the Required attribute with and without a specific error message and the Range attribute to ensure that the checkbox is checked. If there is no custom error, a default error will be displayed. It feels unnatural to use the Range attribute for a checkbox but the framework doesn’t provide an attribute for bool operations. Therefore, I use the Range attribute and set the range from true to true. ASP.NET MVC provides five useful built-in attributes for validation:</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><tr><td> Attribute<td> Example<td> Description<tr><td> Compare<td> [Compare(&#8220;Password&#8221;)]<td> Two properties must have the same value. This is useful<br /> when you ask the user to provide the same information<br /> twice, such as an e-mail address or a password.<tr><td> Range<td> [Range(5, 10)]<td> A numeric value must lie between the specified<br /> minimum and maximum values. To specify a boundary<br /> on only one side, use a MinValue or MaxValue<br /> constant—for example, [Range(int.MinValue, 10)].<tr><td> RegularExpression<td> [RegularExpression(&#8220;regex&#8221;)]<td> A string value must match the specified regular<br /> expression pattern. Note that the pattern has to match the<br /> entire user-supplied value, not just a substring within it.<br /> By default, it matches case sensitively, but you can make<br /> it case insensitive by applying the (?i) modifier—that is,<br /> [RegularExpression(&#8220;(?i)regex&#8221;)].<tr><td> Required<td> [Required]<td> The value must not be empty or be a string consisting<br /> only of spaces. If you want to treat whitespace as valid,<br /> use [Required(AllowEmptyStrings = true)].<tr><td> StringLength<td> [StringLength(12)]<td> A string value must not be longer than the specified<br /> maximum length. You can also specify a minimum<br /> length: [StringLength(12, MinimumLength=8)].</table><h2> Validation using a custom property attribute</h2><p> The ASP.NET MVC framework is highly custom able and therefore it is easy to implement your own attribute for validating a property. I don&#8217;t like the Range attribute for a checkbox and therefore I will create my own called MustBeTrue.</p><p> As I already said, implementing your own attribute is pretty simple. You only have to create a new class which derives from ValidationAttribute and then overrides the IsValid method.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Implementation-of-a-custom-attribute-for-property-validation.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Implementation-of-a-custom-attribute-for-property-validation.jpg" alt="Implementation of a custom attribute for property validation" /></a><p> Implementation of a custom attribute for property validation</p></div><p> Now I can replace the Range attribute with the MustBeTrue attribute on the property.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Applying-my-custom-attribute-to-a-property.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Applying-my-custom-attribute-to-a-property.jpg" alt="Applying my custom attribute to a property" /></a><p> Applying my custom attribute to a property</p></div><p> As you can see, I can still use the ErrorMessage property to display the same error message as before.</p><h3> Implementing a custom property by deriving from a built-in property</h3><p> You can also derive from a built-in validation property, for example, Required, and extend its functionality. I create a new validation property which derives from RequiredAttribute and override the IsValid method again. Then I return IsValid from the base class and my additional check. In this case, I want to make sure that the date is in the past.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Extending-the-Required-attribute-with-my-custom-validation.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Extending-the-Required-attribute-with-my-custom-validation.jpg" alt="Extending the Required attribute with my custom validation" /></a><p> Extending the Required attribute with my custom validation</p></div><h2> Performing client-side validation</h2><p> All previous validation techniques are for server-side validation. This means that the user sends the data to the server, then it gets validated and sent back. Sending data back and forth uses a lot of bandwidth which can lead to problems if you have a very popular application or if the user has a slow connection, for example on his mobile phone. Therefore it would be better to do some validation on the client even before sending the data to the server. This reduces the amount of data sent back and forth and also increases the user experience.</p><h3> Setting up client-side validation</h3><p> To enable client-side validation change the values of ClientValidationEnabled and UnobtrusiveJavaScriptEnabled in the web.config to true.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Configuring-web.config-for-client-side-validation.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Configuring-web.config-for-client-side-validation.jpg" alt="Configuring web.config for client-side validation" /></a><p> Configuring web.config for client-side validation</p></div><p> The next step is to install the following NuGet packages:</p><ul><li> jQuery<li> jQuery.Validation<li> Microsoft.jQuery.Unobtrusive.Validation</ul><p> The last step is to add these three Javascript files to your layout or view.</p><h3> Using client-side validation</h3><p> Using client-side validation is pretty simple. Just add validation properties to your model, for example, Required or StringLength.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Adding-validation-attributes-to-the-model-for-client-side-validation.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Adding-validation-attributes-to-the-model-for-client-side-validation.jpg" alt="Adding validation attributes to the model for client-side validation" /></a><p> Adding validation attributes to the model for client-side validation</p></div><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Error-message-from-client-side-validation.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Error-message-from-client-side-validation.jpg" alt="Error message from client-side validation" /></a><p> Error message from client-side validation</p></div><p> Thanks to client-side validation the user gets informed that the name has to be at least two characters long even before the form is sent to the server.</p></div><p>Client-side validation is a great feature. However, you still have to do server-side validation to ensure the integrity of the data.</p><h2 id="performing-remote-validation">Performing remote validation</h2><p>Remote validation is a mix of server-side and client-side validation. It is often used to check whether an entered username or email is already taken. The check is performed in the background using ajax without the user doing anything. It is a pretty lightweight request but it still should be used for only some input fields since every input is sent back to the server which leads to a lot of requests.</p><h3 id="implementing-remote-validation">Implementing remote validation</h3><p>Implementing remote validation consists of two steps. The first step is to implement an action in your controller which returns a JsonResult and takes one string parameter.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Implementation-of-the-remote-validation-in-the-controller.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Implementation-of-the-remote-validation-in-the-controller.jpg" alt="Implementation of the remote validation in the controller" /></a><p> Implementation of the remote validation in the controller</p></div><p>In the action, I check if the customer name is Wolfgang. If it is Wolfgang, I return an error message. Note that the parameter is Name with an upper case N. I have to do this because the parameter has to match the name of the input field you want to check. I also have to allow Json GET requests because they are disallowed by the MVC framework by default.</p><p>The second step is to add the Remote attribute to the Name property of the Customer class. Additionally, I add the validation method name and the controller.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Adding-the-remote-attribute-to-the-property-of-the-model-class.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Adding-the-remote-attribute-to-the-property-of-the-model-class.jpg" alt="Adding the remote attribute to the property of the model class" /></a><p> Adding the remote attribute to the property of the model class</p></div><p>That’s it. When you enter a name, you will get an error message as soon as you have finished entering Wolfgang. If you change one letter, the error message will disappear.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/02/Remote-validation-of-the-customer-name.jpg"><img loading="lazy" src="/assets/img/posts/2018/02/Remote-validation-of-the-customer-name.jpg" alt="Remote validation of the customer name" /></a><p> Remote validation of the customer name</p></div><h2 id="conclusion">Conclusion</h2><p>In this post, I showed different approaches on how to perform model validation. Model validation is necessary to ensure data integrity and check whether the user entered the valid data.</p><p>For more details about model validation, I highly recommend the books <a href="http://amzn.to/2mgRbTy" target="_blank" rel="noopener noreferrer">Pro ASP.NET MVC 5</a> and <a href="http://amzn.to/2mfQ0nA" target="_blank" rel="noopener noreferrer">Pro ASP.NET MVC 5 Plattform</a>.</p><p>You can find the source code on <a href="https://github.com/WolfgangOfner/MVC-ModelValidation" target="_blank" rel="noopener noreferrer">GitHub</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/asp-net/'>ASP.NET</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ajax/" class="post-tag no-text-decoration" >Ajax</a> <a href="/tags/attributes/" class="post-tag no-text-decoration" >Attributes</a> <a href="/tags/javascript/" class="post-tag no-text-decoration" >Javascript</a> <a href="/tags/model-validation/" class="post-tag no-text-decoration" >Model Validation</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Model Validation in ASP.NET MVC - Programming With Wolfgang&url=https://www.programmingwithwolfgang.com/model-validation-in-asp-net-mvc/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Model Validation in ASP.NET MVC - Programming With Wolfgang&u=https://www.programmingwithwolfgang.com/model-validation-in-asp-net-mvc/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Model Validation in ASP.NET MVC - Programming With Wolfgang&url=https://www.programmingwithwolfgang.com/model-validation-in-asp-net-mvc/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.programmingwithwolfgang.com/model-validation-in-asp-net-mvc/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/microservice-series-from-zero-to-hero/">Microservice Series - From Zero to Hero</a><li><a href="/azure-kubernetes-service-getting-started/">Azure Kubernetes Service - Getting Started</a><li><a href="/analyze-software-architecture-ndepend/">Analyze Software Architecture with NDepend</a><li><a href="/automatically-deploy-database-changes/">Automatically deploy Database Changes with SSDT</a><li><a href="/helm-getting-started/">Helm - Getting Started</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/70-532/">70-532</a> <a class="post-tag" href="/tags/certification/">Certification</a> <a class="post-tag" href="/tags/exam/">Exam</a> <a class="post-tag" href="/tags/net-core/">NET Core</a> <a class="post-tag" href="/tags/ci/">CI</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/how-i-learned-programming-part-4/"><div class="card-body"> <span class="timeago small" > Oct 17, 2017 <i class="unloaded">2017-10-17T21:37:49+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How I learned programming - Part 4</h3><div class="text-muted small"><p> Welcome to part 4 of how I learned programming. In my last post, I wrote about how I learned Java and C++ in Canada and how the teacher there impressed me. You can find this post here. In this pos...</p></div></div></a></div><div class="card"> <a href="/cross-site-scripting-in-asp-net-core/"><div class="card-body"> <span class="timeago small" > Jun 17, 2020 <i class="unloaded">2020-06-17T09:42:15+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Cross Site Scripting (XSS) in ASP .NET Core</h3><div class="text-muted small"><p> Cross Site Scripting (XSS) is an attack where attackers inject code into a website which is then executed. XSS is on place seven of the OWASP Top 10 list of 2017 but could be easily avoided. In thi...</p></div></div></a></div><div class="card"> <a href="/asp-net-mvc-bundles/"><div class="card-body"> <span class="timeago small" > Jan 21, 2018 <i class="unloaded">2018-01-21T00:19:37+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>ASP.NET MVC Bundles</h3><div class="text-muted small"><p> The Bundles feature is built-in into the MVC framework and helps to organize and optimize CSS and Javascript files. In this post, I will show what bundling is, how to use it and what effects it has...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/model-binding-in-asp-net-mvc/" class="btn btn-outline-primary"><p>Model Binding in ASP.NET MVC</p></a> <a href="/helper-methods-in-asp-net-mvc/" class="btn btn-outline-primary"><p>Helper Methods in ASP.NET MVC</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//programmingwithwolfgang.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://www.programmingwithwolfgang.com/model-validation-in-asp-net-mvc/'; this.page.identifier = '/model-validation-in-asp-net-mvc/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/wolfgang_ofner">Wolfgang Ofner</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/70-532/">70 532</a> <a class="post-tag" href="/tags/certification/">Certification</a> <a class="post-tag" href="/tags/exam/">Exam</a> <a class="post-tag" href="/tags/net-core/">NET Core</a> <a class="post-tag" href="/tags/ci/">CI</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.programmingwithwolfgang.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
