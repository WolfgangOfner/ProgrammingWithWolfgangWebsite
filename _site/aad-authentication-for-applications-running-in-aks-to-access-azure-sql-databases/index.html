<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Use AAD Authentication for Applications running in AKS to access Azure SQL Databases" /><meta name="author" content="Wolfgang Ofner" /><meta property="og:locale" content="en" /><meta name="description" content="Removing passwords and using identities to access resources is the way to go for new applications. This post shows you how to configure your application running in AKS to access an Azure SQL database." /><meta property="og:description" content="Removing passwords and using identities to access resources is the way to go for new applications. This post shows you how to configure your application running in AKS to access an Azure SQL database." /><link rel="canonical" href="/aad-authentication-for-applications-running-in-aks-to-access-azure-sql-databases/" /><meta property="og:url" content="/aad-authentication-for-applications-running-in-aks-to-access-azure-sql-databases/" /><meta property="og:site_name" content="Programming With Wolfgang" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-12-06T00:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Use AAD Authentication for Applications running in AKS to access Azure SQL Databases" /><meta name="twitter:site" content="@wolfgang_ofner" /><meta name="twitter:creator" content="@Wolfgang Ofner" /><meta name="google-site-verification" content="xxsPm-h6A0B6a0QMgqXO80PU4DbMt4Dq06p-SGzB3TU" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Wolfgang Ofner"},"dateModified":"2021-12-06T00:00:00+01:00","datePublished":"2021-12-06T00:00:00+01:00","description":"Removing passwords and using identities to access resources is the way to go for new applications. This post shows you how to configure your application running in AKS to access an Azure SQL database.","headline":"Use AAD Authentication for Applications running in AKS to access Azure SQL Databases","mainEntityOfPage":{"@type":"WebPage","@id":"/aad-authentication-for-applications-running-in-aks-to-access-azure-sql-databases/"},"url":"/aad-authentication-for-applications-running-in-aks-to-access-azure-sql-databases/"}</script><title>Use AAD Authentication for Applications running in AKS to access Azure SQL Databases | Programming With Wolfgang</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Programming With Wolfgang"><meta name="application-name" content="Programming With Wolfgang"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> (function (c, l, a, r, i, t, y) { c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) }; t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i; y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y); })(window, document, "clarity", "script", "hc0wl2v6mn"); </script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/author/author-wolfgang-ofner.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Programming With Wolfgang</a></div><div class="site-subtitle font-italic">Let's talk programming</div></div><div class="w-100 d-flex justify-content-center"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span></div><ul class="w-100" style="margin-top: 1em;"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/speaking/" class="nav-link"> <i class="fa-fw fas fa-microphone ml-xl-3 mr-xl-3 unloaded"></i> <span>SPEAKING</span> </a><li class="nav-item"> <a href="/youtube/" class="nav-link"> <i class="fa-fw fas fa-video ml-xl-3 mr-xl-3 unloaded"></i> <span>YOUTUBE</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="w-100" style="margin-top: 1em; text-align: center;"> <img src="/assets/img/author/azure-solutions-architect-expert.png" alt="Azure Solutions Architect Expert" width="200px" height="200px"></div><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <a href="https://github.com/wolfgangofner" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/wolfgang_ofner" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/wolfgangofner" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.youtube.com/channel/UCmiFK5vpvsi6j6gD7W_rsVQ" aria-label="Youtube" target="_blank" rel="noopener"> <i class="fab fa-youtube"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="d-sm-none row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Use AAD Authentication for Applications running in AKS to access Azure SQL Databases</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><div style="visibility:hidden;"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Use AAD Authentication for Applications running in AKS to access Azure SQL Databases</h1><div class="post-meta text-muted d-flex flex-column"><div> <span> Posted <em class="" data-ts="1638745200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Dec 6, 2021 </em> </span> by <span class="author"> By <em> Wolfgang Ofner </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="882 words"> <em>10 min</em></span> read</div></div><div class="post-content"><p>Removing passwords and using identities to access resources is the way to go for new applications. In my last posts <a href="/use-aad-authentication-for-pods-running-in-aks">Use AAD Authentication for Pods running in AKS</a> and <a href="/implement-aad-authentication-to-access-azure-sql-databases">Implement AAD Authentication to access Azure SQL Databases</a>, I showed you how to enable AAD for Azure Kubernetes Service and how to use AAD authentication to access an Azure SQL database.</p><p>In this post, I want to show you how to use your own managed identity to configure an application running in AKS to access an Azure SQL database.</p><p>This post is part of <a href="/microservice-series-from-zero-to-hero">“Microservice Series - From Zero to Hero”</a>.</p><h2 id="configure-aks-for-aad-authentication"><span class="mr-2">Configure AKS for AAD Authentication</span><a href="#configure-aks-for-aad-authentication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>You can find the details about the configuration of the AKS cluster in my previous post <a href="/use-aad-authentication-for-pods-running-in-aks">Use AAD Authentication for Pods running in AKS</a>. Here is the short version to set up your AKS cluster:</p><p>Set up some variables before you start. Make sure to replace <YourAzureSubscriptionId> with the subscription id where your AKS cluster is running.</YourAzureSubscriptionId></p><script src="https://gist.github.com/WolfgangOfner/6d8c0345231d7214627bda6f9ca7a47d.js"></script><p>Assign the Managed Identity Operator and Virtual Machine Contributor role to the managed identity of the AKS cluster.</p><script src="https://gist.github.com/WolfgangOfner/23bff74abc3a525743af89dbade2a6cf.js"></script><p>Next, add and install the aad-pod-identity Helm chart. See <a href="/helm-getting-started">Helm - Getting Started</a> and <a href="/deploy-kubernetes-using-helm">Deploy to Kubernetes using Helm Charts</a> for more information about Helm charts.</p><script src="https://gist.github.com/WolfgangOfner/49ece58a8d86c5d3192eee38140435fa.js"></script><p>Lastly, create a new managed identity. This managed identity will be used to authenticate the application in your Azure SQL database.</p><script src="https://gist.github.com/WolfgangOfner/1485648644bc1b14dc16c5d1334fdca0.js"></script><h2 id="configure-the-azure-sql-server-and-database-for-aad-authentication"><span class="mr-2">Configure the Azure SQL Server and Database for AAD Authentication</span><a href="#configure-the-azure-sql-server-and-database-for-aad-authentication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>You can find the details about the configuration of the Azure SQL Server and database in my previous post <a href="/implement-aad-authentication-to-access-azure-sql-databases">Implement AAD Authentication to access Azure SQL Databases</a>. Here is the short version to set up your AKS cluster:</p><p>Set a user or group as admin of your SQL server. You can use the portal or the CLI.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/12/Set-the-SQL-Server-Admin.jpg"><img loading="lazy" data-src="/assets/img/posts/2021/12/Set-the-SQL-Server-Admin.jpg" alt="Set the SQL Server Admin" data-proofer-ignore></a><p> Set the SQL Server Admin</p></div><p>If you use the Azure portal, don’t forget to click Save after selecting a user or group.</p><p>Login to your SQL server with this admin user (or a member of the admin group) using AAD Authentication.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/12/Log-in-using-the-server-admin-user.jpg"><img loading="lazy" data-src="/assets/img/posts/2021/12/Log-in-using-the-server-admin-user.jpg" alt="Log in using the server admin user" data-proofer-ignore></a><p> Log in using the server admin user</p></div><p>Open a new query window and set some permission for your previously created managed identity.</p><script src="https://gist.github.com/WolfgangOfner/dc3fff10d6b45b68092b3a6c67c3b559.js"></script><p>Make sure to change the database name and/or the managed identity name if you are not using the same names as I do.</p><h2 id="configure-your-application-running-in-aks-to-use-aad-authentication"><span class="mr-2">Configure your Application running in AKS to use AAD Authentication</span><a href="#configure-your-application-running-in-aks-to-use-aad-authentication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>You can find the code of the demo on <a href="https://github.com/WolfgangOfner/MicroserviceDemo/tree/master/CustomerApi" target="_blank" rel="noopener noreferrer">GitHub</a>.</p><p>There are a few things you have to do before you can use AAD authentication for your SQL Server.</p><p>First, add two files to the Helm chart of your application, aadpodidentity, and aadpodidentitybinding. Aadpodidentity creates a resource of type AzureIdentity and configures the name of the managed identity, its resource id, and client id.</p><script src="https://gist.github.com/WolfgangOfner/f44cd86ef67db843987861d1aa2d79e5.js"></script><p>The second file creates a resource of the type AzureIdentityBinding and tells your application what managed identity it should use to acquire the authentication token.</p><script src="https://gist.github.com/WolfgangOfner/c911f9e207b252f956558ee79b8b5764.js"></script><p>If you do not want to use Helm or the values.yaml file, you can use normal strings in both files. You can find the resource id, and client id in the previously created variables when creating the managed identity.</p><p>Add the previously created new values to the values.yaml file:</p><script src="https://gist.github.com/WolfgangOfner/595ee57c4e5e7a99fbca728a52617026.js"></script><p>The variables starting and ending with two underscores (__) will be replaced in the CD pipeline. You can read more about this in <a href="/replace-helm-variables-tokenizer">Replace Helm Chart Variables in your CI/CD Pipeline with Tokenizer</a>.</p><p>Next, add the following label in the deployment.yaml file in your Helm chart in the labels section of metadata and template.</p><script src="https://gist.github.com/WolfgangOfner/fbe9b10777d3555e84adfc7ff646c028.js"></script><p>This label is necessary for the AzureIdentityBinding resource to select the right deployment. Make sure that the value of the label matches the value of the selector in the aadpodidentitybinding.yaml file.</p><p>Note that the files aadpodidentitybinding.yaml and aadpodidentity.yaml are not committed to my demo on GitHub. This is necessary to ensure users can deploy the application when they are not using pod identity. Without pod identity enabled, the Helm deployment would fail with these two files there.</p><h2 id="configure-the-cd-pipeline"><span class="mr-2">Configure the CD Pipeline</span><a href="#configure-the-cd-pipeline" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>You can find the code of the demo on <a href="https://github.com/WolfgangOfner/MicroserviceDemo/blob/master/CustomerApi/pipelines/CustomerApi-CD.yml" target="_blank" rel="noopener noreferrer">GitHub</a>.</p><p>The connection string is different when using AAD authentication. Since you don’t need a username or password anymore, make sure to edit your connection string. It should something like this:</p><script src="https://gist.github.com/WolfgangOfner/8f9e4f5d4154f6c0373f8fd7cdb38237.js"></script><p>Lastly, make sure to add the new variable to your pipeline.</p><script src="https://gist.github.com/WolfgangOfner/1e0d738ee344ede7a34723a9bcec1605.js"></script><p>Also, add the client and resource id and the tenant id as the secret to your pipeline.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/12/Add-secrets-to-the-pipeline.jpg"><img loading="lazy" data-src="/assets/img/posts/2021/12/Add-secrets-to-the-pipeline.jpg" alt="Add secrets to the pipeline" data-proofer-ignore></a><p> Add secrets to the pipeline</p></div><h2 id="test-the-implementation"><span class="mr-2">Test the Implementation</span><a href="#test-the-implementation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Check in your code and let the Azure DevOps pipeline run. After the deployment is finished, go to your application and you should be able to load your data from the database.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/12/Retrieving-data-from-the-database-works.jpg"><img loading="lazy" data-src="/assets/img/posts/2021/12/Retrieving-data-from-the-database-works.jpg" alt="Retrieving data from the database works" data-proofer-ignore></a><p> Retrieving data from the database works</p></div><h2 id="conclusion"><span class="mr-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Getting started with AAD authentication is not easy and Microsoft’s documentation is incomplete and a bit misleading at the time of this writing. There are several approaches and it took me some time to get it working. Once you figured out how it works, it is quite simple to configure, as you have seen in this post.</p><p>In my next post, I will show you how to make the necessary changes in the CI pipeline so that everything gets configured and deployed automatically.</p><p>You can find the code of the demo on <a href="https://github.com/WolfgangOfner/MicroserviceDemo/tree/master/CustomerApi" target="_blank" rel="noopener noreferrer">GitHub</a>.</p><p>This post is part of <a href="/microservice-series-from-zero-to-hero">“Microservice Series - From Zero to Hero”</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/kubernetes/'>Kubernetes</a>, <a href='/categories/cloud/'>Cloud</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/azure/" class="post-tag no-text-decoration" >Azure</a> <a href="/tags/sql/" class="post-tag no-text-decoration" >SQL</a> <a href="/tags/aad/" class="post-tag no-text-decoration" >AAD</a> <a href="/tags/azure-cli/" class="post-tag no-text-decoration" >Azure CLI</a> <a href="/tags/azure-sql/" class="post-tag no-text-decoration" >Azure SQL</a> <a href="/tags/aks/" class="post-tag no-text-decoration" >AKS</a> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >Kubernetes</a> <a href="/tags/managed-identity/" class="post-tag no-text-decoration" >Managed Identity</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Use+AAD+Authentication+for+Applications+running+in+AKS+to+access+Azure+SQL+Databases+-+Programming+With+Wolfgang&url=%2Faad-authentication-for-applications-running-in-aks-to-access-azure-sql-databases%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Use+AAD+Authentication+for+Applications+running+in+AKS+to+access+Azure+SQL+Databases+-+Programming+With+Wolfgang&u=%2Faad-authentication-for-applications-running-in-aks-to-access-azure-sql-databases%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Use+AAD+Authentication+for+Applications+running+in+AKS+to+access+Azure+SQL+Databases+-+Programming+With+Wolfgang&url=%2Faad-authentication-for-applications-running-in-aks-to-access-azure-sql-databases%2F" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=%2Faad-authentication-for-applications-running-in-aks-to-access-azure-sql-databases%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/aks/">AKS</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/video/">Video</a> <a class="post-tag" href="/tags/youtube/">Youtube</a> <a class="post-tag" href="/tags/azure-arc/">Azure Arc</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/microservice-series-from-zero-to-hero/"><div class="card-body"> <em class="small" data-ts="1610838000" data-df="ll" > Jan 17, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Microservice Series - From Zero to Hero</h3><div class="text-muted small"><p> I am working as a consultant and software architect on different projects that focus on microservices, DevOps, and Kubernetes. Many of my consulting jobs consist of explaining microservices, why th...</p></div></div></a></div><div class="card"> <a href="/implement-aad-authentication-to-access-azure-sql-databases/"><div class="card-body"> <em class="small" data-ts="1635721200" data-df="ll" > Nov 1, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Implement AAD Authentication to access Azure SQL Databases</h3><div class="text-muted small"><p> Microsoft promotes going passwordless for a while now. Azure offers authentication against the Azure Active Directory where applications can acquire access tokens using their identity. Another use ...</p></div></div></a></div><div class="card"> <a href="/use-aad-authentication-for-pods-running-in-aks/"><div class="card-body"> <em class="small" data-ts="1635112800" data-df="ll" > Oct 25, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Use AAD Authentication for Pods running in AKS</h3><div class="text-muted small"><p> Since the dawn of time, authentication has been a problem for developers and security engineers. Weak passwords make it easy for attackers to get access to areas where they don’t belong. Even if yo...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/upgrade-microservice-from-net-5-to-net-6/" class="btn btn-outline-primary" prompt="Older"><p>Upgrade a Microservice from .NET 5.0 to .NET 6.0</p></a> <a href="/azure-arc-getting-started/" class="btn btn-outline-primary" prompt="Newer"><p>Azure Arc - Getting Started</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = '/aad-authentication-for-applications-running-in-aks-to-access-azure-sql-databases/'; this.page.identifier = '/aad-authentication-for-applications-running-in-aks-to-access-azure-sql-databases/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://programmingwithwolfgang.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/aks/">AKS</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/video/">Video</a> <a class="post-tag" href="/tags/youtube/">Youtube</a> <a class="post-tag" href="/tags/azure-arc/">Azure Arc</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-112077092-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-112077092-1'); }); </script>
