<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Create Grafana Dashboards with Prometheus Metrics" /><meta name="author" content="Wolfgang Ofner" /><meta property="og:locale" content="en_US" /><meta name="description" content="Grafana combined with Prometheus is a powerful tool to visualize your metrics from each component of your Kubernetes cluster and even from single deployments or pods." /><meta property="og:description" content="Grafana combined with Prometheus is a powerful tool to visualize your metrics from each component of your Kubernetes cluster and even from single deployments or pods." /><link rel="canonical" href="https://www.programmingwithwolfgang.com/create-grafana-dashboards-with-prometheus-metrics/" /><meta property="og:url" content="https://www.programmingwithwolfgang.com/create-grafana-dashboards-with-prometheus-metrics/" /><meta property="og:site_name" content="Programming With Wolfgang" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-08-02T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Create Grafana Dashboards with Prometheus Metrics" /><meta name="twitter:site" content="@wolfgang_ofner" /><meta name="twitter:creator" content="@Wolfgang Ofner" /><meta name="google-site-verification" content="xxsPm-h6A0B6a0QMgqXO80PU4DbMt4Dq06p-SGzB3TU" /> <script type="application/ld+json"> {"datePublished":"2021-08-02T00:00:00+02:00","dateModified":"2021-12-16T22:44:28+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.programmingwithwolfgang.com/create-grafana-dashboards-with-prometheus-metrics/"},"@type":"BlogPosting","description":"Grafana combined with Prometheus is a powerful tool to visualize your metrics from each component of your Kubernetes cluster and even from single deployments or pods.","author":{"@type":"Person","name":"Wolfgang Ofner"},"url":"https://www.programmingwithwolfgang.com/create-grafana-dashboards-with-prometheus-metrics/","headline":"Create Grafana Dashboards with Prometheus Metrics","@context":"https://schema.org"}</script><title>Create Grafana Dashboards with Prometheus Metrics | Programming With Wolfgang</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-112077092-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-112077092-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/author/author-wolfgang-ofner.jpg" alt="author wolfgang ofner" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Programming With Wolfgang</a></div><div class="site-subtitle font-italic">Let's talk programming</div></div><div class="w-100 d-flex justify-content-center"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span></div><ul class="w-100" style="margin-top: 1em;"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="w-100" style="margin-top: 1em; text-align: center;"> <img src="/assets/img/author/mct-microsoft-certified-trainer.png" alt="MCT Microsoft Certified Trainer" width="200px" height="200px"></div><div class="w-100" style="margin-top: 1em; text-align: center;"> <img src="/assets/img/author/azure-solutions-architect-expert.png" alt="Azure Solutions Architect Expert" width="200px" height="200px"></div><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/wolfgangofner" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/wolfgang_ofner" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/wolfgangofner" aria-label="linkedin" class="order-5" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['wolfgang','programmingwithwolfgang.com'].join('@')" aria-label="email" class="order-6" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-7" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="d-sm-none row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Create Grafana Dashboards with Prometheus Metrics</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Create Grafana Dashboards with Prometheus Metrics</div><div style="visibility:hidden;"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel">Cancel</span></div></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Create Grafana Dashboards with Prometheus Metrics</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Aug 2, 2021, 12:00 AM +0200" > Aug 2, 2021 <i class="unloaded">2021-08-02T00:00:00+02:00</i> </span> by <span class="author"> Wolfgang Ofner </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Thu, Dec 16, 2021, 10:44 PM +0100" > Dec 16, 2021 <i class="unloaded">2021-12-16T22:44:28+01:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1175 words">13 min</span></div></div><div class="post-content"><p><a href="/monitor-net-microservices-with-prometheus">In my last post</a>, I added the Prometheus client library to my .NET microservices. This was the first step to implement monitoring of the microservices which are running in a Kubernetes cluster.</p><p>In this post, I will show you how to create your first dashboard with Grafana using the Prometheus data.</p><p>This post is part of <a href="/microservice-series-from-zero-to-hero">“Microservice Series - From Zero to Hero”</a>.</p><h2 id="add-the-microservices-to-the-prometheus-configuration-for-scrapping">Add the Microservices to the Prometheus Configuration for Scrapping</h2><p>You can find the code of the demo on <a href="https://github.com/WolfgangOfner/MicroserviceDemo" target="_blank" rel="noopener noreferrer">GitHub</a>.</p><p>You have to add the microservices as targets in Prometheus before you can visualize their Prometheus data. I installed Grafana Loki in a previous post which also installs Prometheus. You can find the details in <a href="/collect-and-query-kubernetes-logs-with-grafana-loki">Collect and Query your Kubernetes Cluster Logs with Grafana Loki</a>.</p><p>After you have installed Prometheus, open the configuration of the Prometheus server. You can use a dashboard and edit the yaml file in your browser. In <a href="/azure-kubernetes-service-getting-started/#access-the-aks-cluster">Azure Kubernetes Service - Getting Started</a> I explain how to use Octant as a dashboard to access your Kubernetes cluster.</p><p>Open the dashboard and then select the namespace where you have installed Prometheus. If you followed this series, the namespace is loki-grafana. Navigate to the Config Maps and there you can find the configuration for the Prometheus server named loki-prometheus-server.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Edit-the-Prometheus-Configuration.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Edit-the-Prometheus-Configuration.jpg" alt="Edit the Prometheus Configuration" /></a><p> Edit the Prometheus Configuration</p></div><p>Select the YAML tab and add the following code under scrape_configs:</p><script src="https://gist.github.com/WolfgangOfner/0d2582d969110b9ec36ccec1fd0f7da3.js"></script><p>This tells Prometheus to scrape data from a pod in the customer-api namespace. The pod has the label app=customerapi and the Prometheus data is available under /metrics. Save the config and then let’s check if customerapi is available in Prometheus.</p><h3 id="inspect-the-prometheus-scrap-targets">Inspect the Prometheus Scrap Targets</h3><p>In the Kubernetes dashboard, navigate to the loki-grafana namespace and select the loki-prometheus-server pod. There you can activate the port forwarding to access the pod from your computer.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Open-the-Prometheus-Server-Pod-in-the-Dashboard.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Open-the-Prometheus-Server-Pod-in-the-Dashboard.jpg" alt="Open the Prometheus Server Pod in the Dashboard" /></a><p> Open the Prometheus Server Pod in the Dashboard</p></div><p>Click the button Start Forwarding and you will get a localhost URL that forwards your request to the Prometheus server instance. The URL in my case is http://localhost:53625.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Activate-the-Port-Forwarding.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Activate-the-Port-Forwarding.jpg" alt="Activate the Port Forwarding" /></a><p> Activate the Port Forwarding</p></div><p>Open the URL and navigate to /targets. There you should see the customerapi-test target as healthy. You can also see when a scrape happened the last time, how long it took, and if there were any errors.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Inspect-the-Prometheus-Scrap-Targets.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Inspect-the-Prometheus-Scrap-Targets.jpg" alt="Inspect the Prometheus Scrap Targets" /></a><p> Inspect the Prometheus Scrap Targets</p></div><h2 id="query-prometheus-data-in-grafana">Query Prometheus Data in Grafana</h2><p>If you don’t know how to access Grafana, see <a href="/collect-and-query-kubernetes-logs-with-grafana-loki/#access-grafana">Collect and Query your Kubernetes Cluster Logs with Grafana Loki</a> for information on how to configure the redirect and how to read the admin password from the Kubernetes secret.</p><p>In Grafana, click on the round (compass?) symbol on the left and select Explore to open the query editor.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Open-the-Grafana-Query-Editor.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Open-the-Grafana-Query-Editor.jpg" alt="Open the Grafana Query Editor" /></a><p> Open the Grafana Query Editor</p></div><p>Make sure that you select Prometheus as the data source on top of the page and then you can create your first queries. Click on metrics to get an overview of a lot of the built-in commands and get familiar with the functionality of the queries. A useful metric is the histogram where you can display a certain quantile, for example, the 95% quantile. You can see a query of the 95% quantile of the request duration. You can see that the requests were fast but at around 18:30 the request duration spiked to up to 100 seconds. This clearly indicates that there was a problem.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Create-a-Histogram.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Create-a-Histogram.jpg" alt="Create a Histogram" /></a><p> Create a Histogram</p></div><p>The functionality of PromQL is way too vast for this post today but you can find example in the <a href="https://prometheus.io/docs/prometheus/latest/querying/basics/" target="_blank" rel="noopener noreferrer">Prometheus documentation</a>.</p><h2 id="import-grafana-dashboards">Import Grafana Dashboards</h2><p>Grafana allows you to import dashboards from the community which is a great starting point. You can find a list of all the dashboards on <a href="https://grafana.com/grafana/dashboards/" target="_blank" rel="noopener noreferrer">https://grafana.com/grafana/dashboards</a>.</p><p>Once you found a dashboard you like, for example the <a href="https://grafana.com/grafana/dashboards/6417" target="_blank" rel="noopener noreferrer">Kuberets Cluster (Prometheus)</a> dashboard, copy its id.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Copy-the-id-of-the-Dashboard.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Copy-the-id-of-the-Dashboard.jpg" alt="Copy the id of the Dashboard" /></a><p> Copy the id of the Dashboard</p></div><p>Next, click on the + button on the left of your Grafana GUI and select Import.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Import-a-Grafana-Dashboard.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Import-a-Grafana-Dashboard.jpg" alt="Import a Grafana Dashboard" /></a><p> Import a Grafana Dashboard</p></div><p>On the import page of the dashboard, provide a name (or leave the default one) and select your Prometheus instance from the dropdown. Then click on Import and the dashboard gets imported.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Configure-the-Dashboard-Import.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Configure-the-Dashboard-Import.jpg" alt="Configure the Dashboard Import" /></a><p> Configure the Dashboard Import</p></div><p>After the dashboard is imported, it gets immediately displayed and gives you an overview of your cluster health, the cluster’s pods, and containers, and much more.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/The-Dashboard-gives-an-Overview-of-the-Kubernetes-Cluster.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/The-Dashboard-gives-an-Overview-of-the-Kubernetes-Cluster.jpg" alt="The Dashboard gives an Overview of the Kubernetes Cluster" /></a><p> The Dashboard gives an Overview of the Kubernetes Cluster</p></div><p>The dashboard already gives you useful information but you can easily edit or remove its components and also can take a look at the definition of each component. This can help you when you try to create your own dashboards.</p><p>Community dashboards are a good way to get started but you will always have to create your own dashboards to fulfill your requirements.</p><h2 id="create-your-own-grafana-dashboard-with-data-from-prometheus">Create your own Grafana Dashboard with Data from Prometheus</h2><p>To create your own Grafana dashboard, click on the + button on the left side of the Grafana GUI and then select Add Query.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Start-creating-a-new-Grafana-Dashboard.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Start-creating-a-new-Grafana-Dashboard.jpg" alt="Start creating a new Grafana Dashboard" /></a><p> Start creating a new Grafana Dashboard</p></div><p>Select Prometheus as your data source on the next screen and enter a query. My query creates a histogram for the 99% quantile for the request duration in seconds over the last 10 minutes.</p><script src="https://gist.github.com/WolfgangOfner/a51a039dcae9d95fd50037c0cace0fe6.js"></script><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Create-a-Histogram-Query.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Create-a-Histogram-Query.jpg" alt="Create a Histogram Query" /></a><p> Create a Histogram Query</p></div><p>The Visualization tab allows you to configure the looks of your dashboard. I added points to the graph and added a label and unit for the left y-axis. Additionally, I added the min, max, and average values of the query to the legend on the bottom left of the graph.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Configure-the-Visualization-of-the-Dashboard.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Configure-the-Visualization-of-the-Dashboard.jpg" alt="Configure the Visualization of the Dashboard" /></a><p> Configure the Visualization of the Dashboard</p></div><p>There is a wide variety of options to customize your dashboard. Some are more and some are less useful like the following one.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Use-a-Gauge-to-display-your-data.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Use-a-Gauge-to-display-your-data.jpg" alt="Use a Gauge to display your data" /></a><p> Use a Gauge to display your data</p></div><p>On the next page, provide a title for the dashboard. You should always name all the axis and dashboards so everyone can easily see what this dashboard displays.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Add-a-Title.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Add-a-Title.jpg" alt="Add a Title" /></a><p> Add a Title</p></div><p>Lastly, click on the Save button and give your dashboard a name.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Save-your-first-Grafana-Dashboard.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Save-your-first-Grafana-Dashboard.jpg" alt="Save your first Grafana Dashboard" /></a><p> Save your first Grafana Dashboard</p></div><p>Congratulation, you created your first dashboard. You can add as many components as you want to this dashboard in the future. If you take a look at the one we have, you can immediately see that there is something not right with the service.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/08/Something-is-wrong-with-the-monitored-Service.jpg"><img loading="lazy" src="/assets/img/posts/2021/08/Something-is-wrong-with-the-monitored-Service.jpg" alt="Something is wrong with the monitored Service" /></a><p> Something is wrong with the monitored Service</p></div><p>Between 21:55 and 22:01 the request time was around 5 - 7 seconds which does not look good compared to the very low request time the service usually has. At 22:07 the request duration spikes to around 35 seconds which is definitely not good and shows that something is massively wrong.</p><h2 id="conclusion">Conclusion</h2><p>Grafana combined with Prometheus is a powerful tool to visualize your metrics from each component of your Kubernetes cluster and even from single deployments or pods. This post showed how to add new targets to the Prometheus scrap configuration and how to import and create your own dashboards to display the request duration.</p><p>You can find the code of the demo on <a href="https://github.com/WolfgangOfner/MicroserviceDemo" target="_blank" rel="noopener noreferrer">GitHub</a>.</p><p>This post is part of <a href="/microservice-series-from-zero-to-hero">“Microservice Series - From Zero to Hero”</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/kubernetes/'>Kubernetes</a>, <a href='/categories/cloud/'>Cloud</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/devops/" class="post-tag no-text-decoration" >DevOps</a> <a href="/tags/azure-devops/" class="post-tag no-text-decoration" >Azure DevOps</a> <a href="/tags/azure/" class="post-tag no-text-decoration" >Azure</a> <a href="/tags/nginx/" class="post-tag no-text-decoration" >Nginx</a> <a href="/tags/yaml/" class="post-tag no-text-decoration" >YAML</a> <a href="/tags/ci-cd/" class="post-tag no-text-decoration" >CI-CD</a> <a href="/tags/docker/" class="post-tag no-text-decoration" >Docker</a> <a href="/tags/helm/" class="post-tag no-text-decoration" >Helm</a> <a href="/tags/aks/" class="post-tag no-text-decoration" >AKS</a> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >Kubernetes</a> <a href="/tags/monitoring/" class="post-tag no-text-decoration" >Monitoring</a> <a href="/tags/prometheus/" class="post-tag no-text-decoration" >Prometheus</a> <a href="/tags/grafana/" class="post-tag no-text-decoration" >Grafana</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Create Grafana Dashboards with Prometheus Metrics - Programming With Wolfgang&url=https://www.programmingwithwolfgang.com/create-grafana-dashboards-with-prometheus-metrics/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Create Grafana Dashboards with Prometheus Metrics - Programming With Wolfgang&u=https://www.programmingwithwolfgang.com/create-grafana-dashboards-with-prometheus-metrics/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Create Grafana Dashboards with Prometheus Metrics - Programming With Wolfgang&url=https://www.programmingwithwolfgang.com/create-grafana-dashboards-with-prometheus-metrics/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.programmingwithwolfgang.com/create-grafana-dashboards-with-prometheus-metrics/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/microservice-series-from-zero-to-hero/">Microservice Series - From Zero to Hero</a><li><a href="/upgrade-microservice-from-net-5-to-net-6/">Upgrade a Microservice from .NET 5.0 to .NET 6.0</a><li><a href="/create-a-docker-image-in-an-azure-devops-ci-pipeline/">Create a Docker Image in an Azure DevOps CI Pipeline</a><li><a href="/azure-container-registry-kubernetes/">Use Azure Container Registry in Kubernetes</a><li><a href="/deploy-docker-container-azure-functions/">Deploy a Docker Container to Azure Functions using an Azure DevOps YAML Pipeline</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/aks/">AKS</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/helm/">Helm</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/yaml/">YAML</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/update-dns-records-in-an-azure-devops-pipeline/"><div class="card-body"> <span class="timeago small" > Oct 11, 2021 <i class="unloaded">2021-10-11T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Update DNS Records in an Azure DevOps Pipeline</h3><div class="text-muted small"><p> Infrastructure as Code (IaC) is a great process to manage the creation of your infrastructure. In an earlier post, I have created such a pipeline using Azure CLI to create all my resources in Azure...</p></div></div></a></div><div class="card"> <a href="/service-mesh-kubernetes-getting-started/"><div class="card-body"> <span class="timeago small" > Aug 9, 2021 <i class="unloaded">2021-08-09T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Service Mesh in Kubernetes - Getting Started</h3><div class="text-muted small"><p> If you have followed this series then you have learned what microservices are, how to program and deploy them, and how to monitor your Kubernetes cluster and applications. The last missing puzzle p...</p></div></div></a></div><div class="card"> <a href="/microservice-with-database-kubernetes/"><div class="card-body"> <span class="timeago small" > Mar 22, 2021 <i class="unloaded">2021-03-22T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Use a Database with a Microservice running in Kubernetes</h3><div class="text-muted small"><p> I showed in my last post how to automatically deploy database changes to your database. In this post, I will extend my microservice to use this database and also extend the deployment to provide a ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/monitor-net-microservices-with-prometheus/" class="btn btn-outline-primary"><p>Monitor .NET Microservices in Kubernetes with Prometheus</p></a> <a href="/service-mesh-kubernetes-getting-started/" class="btn btn-outline-primary"><p>Service Mesh in Kubernetes - Getting Started</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//programmingwithwolfgang.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://www.programmingwithwolfgang.com/create-grafana-dashboards-with-prometheus-metrics/'; this.page.identifier = '/create-grafana-dashboards-with-prometheus-metrics/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/wolfgang_ofner">Wolfgang Ofner</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/aks/">AKS</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/helm/">Helm</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/yaml/">YAML</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.programmingwithwolfgang.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
