<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Design and implement DevTest Labs" /><meta name="author" content="Wolfgang Ofner" /><meta property="og:locale" content="en_US" /><meta name="description" content="Azure DevTest Labs is a service designed to help developers and testers quickly spin up virtual machines (VMs) or complete environments in Azure, enabling rapid deployment and testing of applications. This allows you to easily spin up and tear down development and test resources, minimizing waste and providing better cost control. It is also useful to create pre-provisioned environments for demos and training. Create DevTest Labs To add a new DevTest Lab, follow these steps: In the Azure Portal select All services and search for DevTest Labs. Click on DevTest Labs and select + Add. Enter a Lab name, Subscription, Location and optionally add a Name and Value for tagging. By default, the Auto-shutdown option is enabled. This feature can help you save costs. Click on it, if you want to disable it or if you want to change the time for the shutdown. Create a DevTest Lab Click on Create. The deployment process creates a new resource group with the following resources in it: The DevTest Lab instance A Key vault instance A Storage account A virtual network Deployed resources Add a VM to your lab After the DevTest Lab is deployed, you can add a VM to it following these steps: In your DevTest Lab, click +Add on the overview blade. On the Choose a base blade, select your desired image for your VM. Selecting an image opens the Virtual machine blade. Provide a machine name, user name, password, the size of your VM and optionally artifacts. Artifacts are third-party tools like Chrome or Git. Create a Windows 2016 Server for your DevTest Lab Click Create to start the deployment process. Claim a VM After the VM is created, the ownership is assigned to the creator but it can be made claimable for others. To unclaim the VM,  follow these steps: Click on the VM, you want to unclaim in your DevTest Lab. On the top of the Overview blade click on unclaim. Unclaim a VM Unclaiming a VM removes it from the My virtual machines area in the DevTest Lab and moves it to the Claimable virtual machines section. To claim a VM, open it and select Claim machine on the top of the Overview blade. Create and manage custom images and formulas The difference between a custom image and a formula is that the custom image is an image based on a VHD, whereas formulas are base on a VHD with additional pre-configurations such VM size, virtual network, and artifacts. These pre-configured settings can be overridden during the deployment process. Creating custom images Custom images provide a static, immutable way to create VMs from a configuration. Pros of using custom images: VMs created from the same image are identical The provisioning of the VM is fast Cons of using custom images: To update the image, it has to be recreated You can use the Azure Portal or PowerShell to create an image from an existing VM or create one from a VHD. Create a custom image from a provisioned VM To create a custom image from a provisioned VM using the Azure Portal, follow these steps: In your DevTest lab, select All virtual machines under the My Lab menu and then click on the VM, you want to use as a base for your image. All virtual machines in your DevTest Lab After you selected a VM, click on Create custom image under the Operations menu. On the Custom image blade, provide a name and select whether sysprep should be run. Click OK to create the image. Create a custom image Create a custom image from a VHD using the Azure Portal To create a custom image from a VHD using the Azure Portal follow these steps: In your DevTest Lab instance, select Configuration and policies under the Settings tab. On the Configuration and policies blade, select Custom images under the Virtual Machine Bases menu and click +Add. Provide a name, the operating system type and select the VHD. If you don’t have any, you have to upload one first. Click OK.  Delete a custom image To delete a custom image, follow these steps: In your DevTest Lab instance, select Configuration and policies under the Settings tab. On the Configuration and policies blade, select Custom images under the Virtual Machine Bases menu and click the three dots next to the image which you want to delete. Click delete and select Yes in the confirmation dialog. Delete a custom image Formulas Formulas provide default property values and therefore offer a fast way to create VMs from a preconfigured state. Pros of using formulas: Formulas can define default setting that custom images can’t provide. The default settings from the formulas can be modified when creating a new VM. Cons of using custom images: Creating a new formula can be more time consuming than creating a VM from a custom image. There are two ways to create a formula: From a base like a custom image or Marketplace image, use a base when you want to define all characteristics of the formula. From an existing lab VM. Use this approach when you want to create a formula which is based on an existing VM. Create a formula from a base To create a formula from a base, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Formulas (reusable bases) under the Virtual Machine Bases menu and click + Add. On the Choose a base blade, select an image to use for the formula, for example, Windows Server 2016 Datacenter. Provide a Formula name and user name. Select the disk type and the size of your VM. Optionally add artifacts. Artifacts are third-party tools like Google Chrome or Docker which will be installed on your VM. On the Advanced blade, you can configure the IP address and the automatic delete options. After you are done with the configuration, click Create to create the formula. Create a new formula Create a formula from a VM To create a formula from a VM, follow these steps: In your DevTest Labs instance, on the Overview blade, select the VM from which you want to create the new formula. Select a VM for your formula On the VM&#8217;s blade, select Create formula (reusable base) under the Operations menu. On the Create a formula blade, provide a name and optionally a description and click OK. Create a new formula from a VM Modify a formula To modify the properties of an existing formula, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Formulas (reusable bases) under the Virtual Machine Bases menu. Select the formula you wish to modify. Make your changes on the Update formula blade and select Update when you are finished. Modify an existing formula Delete a formula To delete an existing formula, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Formulas (reusable bases) under the Virtual Machine Bases menu. Click on the ellipsis to the right of the formula you want to delete and click Delete in the context menu. Delete an existing formula On the confirmation dialog click Yes. Configure a lab to include policies and procedures For each lab you create, you can control cost and minimize your time waste by managing policies. Configure allowed virtual machine sizes policy You can configure that the creation of only specific VM sizes is allowed. To do that follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Allowed virtual machines under the Settings menu. On the Allowed virtual machine move the slider to On and then check each VM size which you want to be allowed to be created. Click Save on the top of the blade when you are finished. Enable allowed virtual machine sizes policy Configure virtual machines per user policy It is also possible to limit the number of virtual machines an user can create. Additionally, you can limit the number of VMs using premium OS disks. To do that, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Virtual machines per user under the Settings menu. Move the slider to Yes to limit the number of virtual machines and/or the number of virtual machines using premium OS disks per user. After you enabled a limitation, provide a number for the limit. The default value is 1. Click Save. Limit the number of virtual machines and premium OS disks per user If a user has reached his maximum amount of VMs but tries to create another one, he will get an error message. Configure virtual machines per lab policy To specify the maximum number of VMs that can be created in your current lab, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Virtual machines per lab under the Settings menu. Move the slider to Yes to limit the number of virtual machines and/or the number of virtual machines using premium OS disks per lab. After you enabled a limitation, provide a number for the limit. The default value is 1. Click Save. Limit the number of virtual machines and premium OS disks per lab Configure auto-shutdown policy The auto-shutdown is the most important policy for helping you to minimize cost control and also helps to prevent costs when the VMs are not in use. I always enable this policy when I do training because there is always at least one student who doesn’t turn off his VMs at the end of the day. To enable auto-shutdown, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Auto-shutdown under the Schedules menu. Move the slider to On to enable auto-shutdown. Configure the shutdown time and optionally enable sending a notification and provide a webhook URL or an email address. The notification will be sent 15 minutes prior the shutdown. Click Save. Configure auto-shutdown policy Once configured, the auto-shutdown policy will be applied to all VMs in the lab. You also can adjust the auto-shutdown policy for specific VMs. To do that follow these steps: In your DevTest Labs instance, select the VM you want to configure. On the VM blade select Auto-shutdown under the Operations menu. There you can see the same attributes as before but if you change them here, you only change the settings for this VM. After all changes are made, click Save. Configure auto-shutdown policy for an individual VM I like to disable the auto-shutdown policy on my VM, so I can prepare things for the next days training on the evening without getting interrupted by the shutdown. Configure auto-start policy Besides auto-shutdown, you can also configure an auto-start policy. To do that follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Auto-start under the Schedules menu. Move the slider to On and then configure the start time and on which days the VMs should start. Click Save Configure auto-start policy ## Once configured, the auto-start policy will be applied to all VMs in the lab. You can Opt-out the auto-start policy for a specific VM. To do that follow these steps: In your DevTest Labs instance, select the VM you want to configure. On the VM blade select Auto-start under the Operations menu. There you can see move the slider to On or Off to enable or disable auto-start. Click Save. Disable auto-start for a specific VM Set expiration date policy The expiration date policy ensures that VMs are automatically deleted at a specified date and time. To do that follow these steps: When creating a new VM click on the Advanced settings. On the Advanced blade click the calendar icon under Expiration date and select the date when the VM should be deleted. Next, select the time. Click OK and then Create. Set the expiration date policy Configure cost management Azure DevTest Labs was designed to manage your resources and costs effectively. Cost Management is a key feature and allows you to track to costs associated to your lab. It also enables you to view trends, set cost targets and configure alerts. To view your Cost trend chart, select Configuration and policies in your DevTest lab and then select Cost trend under the Cost Tracking menu. Cost trend To view the monthly estimated cost trend chart follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Cost trend under the Cost Tracking menu. The Cost trend chart To modify the Cost trend chart follow these steps: On the Cost trend blade, click on Manage target. On the Manage target blade, you can modify the date interval of the chart and also set a cost target threshold and notifications via webhook when a certain amount is reached. Click OK to save your changes. Modify the cost trend chart Cost by resource With cost by resource, you get a breakdown of your costs of each resource. To do that follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Cost by resource under the Cost Tracking menu. All your resources of the lab are listed on the Cost by resource blade. Your costs by resource Secure access to labs The access to your DevTest Labs is determined by Azure Role-Based Access Control (RBAC). To understand how this works, you have to understand the difference between a permission, a role, and a scope defined by RBAC. Permission: Defines access to a specific action (for example, read-access to the storage account) Role: A set of permissions that can be grouped and assigned to a user. For example, the reader role can read all resources. Scope: A level within the hierarchy of an Azure resource, such as a resource group or a virtual machine. With RBAC, you can segregate duties within your team into roles where you grant only the amount of access necessary to users to perform their job. The three most relevant roles to Azure DevTest Labs are Owner, DevTest Labs User, and Contributor. Add an owner or user at the lab level Owners and users can be added at the lab level via the Azure Portal. This also includes external users with a valid Microsoft account. To add an owner or user, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Access control (IAM) under the Manage menu and click +Add. On the Add permissions blade, select Owner or DevTest Labs user as the role. Enter the name or email address and select the user. Click Save. Add a user to the lab Add an external user to a lab using PowerShell Additionally to the Azure portal, you can add an external user to your Azure DevTest Labs using PowerShell. Before you can do that, you have to add the user as a gust to the Active Directory though. To do that follow these steps: Open the Azure Active Directory and select Users under the Manage menu. On the All users blade, click +New guest user on the top of the blade. Enter the email of the user you want to add as a guest and optionally include a message for the invitation. Add a user as a guest to your Active Directory After the invitation is sent, the user will show up in your Azure Active Directory. The Azure Active Directory with the new guest user   Now, you can add the user to your lab using PowerShell, following these steps: Create the following variables in PowerShell: $subscriptionId = “&#8221; $labResourceGroup = “&lt;Enter lab’s resource name here&gt;” $labName = “&#8221; $userDisplayName = “&lt;Enter user’s display name here&gt;” Select your subscription (you only have to do this step if you have more than one subscription) Select-AzureRmSubscription -SubscriptionId $subscriptionId Get the user object $adObject = Get-AzureRmADUser -SearchString $userDisplayName Create the role assignment $labId = (‘/subscriptions/’ + $subscriptionId + ‘/resourceGroups/’ + $labResourceGroup + ‘/providers/Microsoft.DevTestLab/labs/’ + $labName) Attention: You need a / in front of subscriptions. The Microsoft documentation doesn’t have the slash and therefore it won’t work. Assign the role to the user: New-AzureRmRoleAssignment -ObjectId $adObject.Id -RoleDefinitionName ‘DevTest Labs User’ -Scope $labId Add a user to your lab with PowerShell After you are done, the user will appear in your lab’s Active Directory. To verify it go to your Azure DevTest Labs –&gt; Configuration and policies –&gt; Access control (IAM). There, you can see the previously added user with his assigned role. Confirm that the user has been added to your lab Use lab settings to set access rights to the environment You can give your lab users Contributor access rights. This enables them to edit resources such as SQL Server, in the resource group that contains your lab environment. By default, lab users only have the Reader access rights. To modify the user’s rights, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Lab settings under the Settings menu. Select Contributor to give users the Contributor access rights. Click Save Give users the Contributor or Reader access rights Use environments in a lab You can use Azure Resource Manager (ARM) templates to spin up a complete environment in DevTest labs. These environments can contain multiple VMs, or a SharePoint farm.  Following infrastructure-as-code and configuration-as-code best practices, environment templates are managed in source control. Azure DevTest Labs loads all ARM templates directly from your GitHub or VSTS Git repositories. As a result, Resource Manager templates can be used across the entire release cycle, from the test environment to the production environment. Configure an ARM template repository There are a couple of rules which you have to follow when organizing ARM templates in a repository: The master template file must be named azuredeploy.json. The parameter file must be named azuredeploy.parameters.json. You can use the parameters _artifactsLocation and _artifactsLocationSasToken to construct the parametersLink URI value, allowing DevTest Labs to automatically manage nested templates. Metadata can be defined to specify the template display name and description. This metadata must be in a file named metadata.json. On the following example metadata file, you can see how to specify the display name and description: { “itemDisplayName”: “Your template name”, “description”: “Your description” } To add a repository to your Azure DevTest Labs using the Azure portal, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Repositories under the External Resources menu and click +Add. Enter a name, the Git clone URI, your access token and optionally a branch. Enter either a folder path that starts with / and is relative to your Git clone URI or your ARM template definition. Click Save. Add a repository with templates to your Azure DevTest Labs After you added the Repository, you can use the templates when you add a new Resource on the Overview blade of your DevTest Labs. Conclusion This post described the Azure DevTest Labs and showed what you can do with it and how it helps you to minimize the management tasks and also helps to keep your costs low. I talked about creating VMs, custom images, and formulas and how to apply policies like auto-shutdown to the resources within the lab. Furthermore, I showed how to add users to your lab and how to change their access permissions. The last topic was about setting up your own Git repository which helps you to create complete environments with a single deployment process. For more information about the 70-532 exam get the Exam Ref book from Microsoft and continue reading my blog posts. I am covering all topics needed to pass the exam. You can find an overview of all posts related to the 70-532 exam here." /><meta property="og:description" content="Azure DevTest Labs is a service designed to help developers and testers quickly spin up virtual machines (VMs) or complete environments in Azure, enabling rapid deployment and testing of applications. This allows you to easily spin up and tear down development and test resources, minimizing waste and providing better cost control. It is also useful to create pre-provisioned environments for demos and training. Create DevTest Labs To add a new DevTest Lab, follow these steps: In the Azure Portal select All services and search for DevTest Labs. Click on DevTest Labs and select + Add. Enter a Lab name, Subscription, Location and optionally add a Name and Value for tagging. By default, the Auto-shutdown option is enabled. This feature can help you save costs. Click on it, if you want to disable it or if you want to change the time for the shutdown. Create a DevTest Lab Click on Create. The deployment process creates a new resource group with the following resources in it: The DevTest Lab instance A Key vault instance A Storage account A virtual network Deployed resources Add a VM to your lab After the DevTest Lab is deployed, you can add a VM to it following these steps: In your DevTest Lab, click +Add on the overview blade. On the Choose a base blade, select your desired image for your VM. Selecting an image opens the Virtual machine blade. Provide a machine name, user name, password, the size of your VM and optionally artifacts. Artifacts are third-party tools like Chrome or Git. Create a Windows 2016 Server for your DevTest Lab Click Create to start the deployment process. Claim a VM After the VM is created, the ownership is assigned to the creator but it can be made claimable for others. To unclaim the VM,  follow these steps: Click on the VM, you want to unclaim in your DevTest Lab. On the top of the Overview blade click on unclaim. Unclaim a VM Unclaiming a VM removes it from the My virtual machines area in the DevTest Lab and moves it to the Claimable virtual machines section. To claim a VM, open it and select Claim machine on the top of the Overview blade. Create and manage custom images and formulas The difference between a custom image and a formula is that the custom image is an image based on a VHD, whereas formulas are base on a VHD with additional pre-configurations such VM size, virtual network, and artifacts. These pre-configured settings can be overridden during the deployment process. Creating custom images Custom images provide a static, immutable way to create VMs from a configuration. Pros of using custom images: VMs created from the same image are identical The provisioning of the VM is fast Cons of using custom images: To update the image, it has to be recreated You can use the Azure Portal or PowerShell to create an image from an existing VM or create one from a VHD. Create a custom image from a provisioned VM To create a custom image from a provisioned VM using the Azure Portal, follow these steps: In your DevTest lab, select All virtual machines under the My Lab menu and then click on the VM, you want to use as a base for your image. All virtual machines in your DevTest Lab After you selected a VM, click on Create custom image under the Operations menu. On the Custom image blade, provide a name and select whether sysprep should be run. Click OK to create the image. Create a custom image Create a custom image from a VHD using the Azure Portal To create a custom image from a VHD using the Azure Portal follow these steps: In your DevTest Lab instance, select Configuration and policies under the Settings tab. On the Configuration and policies blade, select Custom images under the Virtual Machine Bases menu and click +Add. Provide a name, the operating system type and select the VHD. If you don’t have any, you have to upload one first. Click OK.  Delete a custom image To delete a custom image, follow these steps: In your DevTest Lab instance, select Configuration and policies under the Settings tab. On the Configuration and policies blade, select Custom images under the Virtual Machine Bases menu and click the three dots next to the image which you want to delete. Click delete and select Yes in the confirmation dialog. Delete a custom image Formulas Formulas provide default property values and therefore offer a fast way to create VMs from a preconfigured state. Pros of using formulas: Formulas can define default setting that custom images can’t provide. The default settings from the formulas can be modified when creating a new VM. Cons of using custom images: Creating a new formula can be more time consuming than creating a VM from a custom image. There are two ways to create a formula: From a base like a custom image or Marketplace image, use a base when you want to define all characteristics of the formula. From an existing lab VM. Use this approach when you want to create a formula which is based on an existing VM. Create a formula from a base To create a formula from a base, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Formulas (reusable bases) under the Virtual Machine Bases menu and click + Add. On the Choose a base blade, select an image to use for the formula, for example, Windows Server 2016 Datacenter. Provide a Formula name and user name. Select the disk type and the size of your VM. Optionally add artifacts. Artifacts are third-party tools like Google Chrome or Docker which will be installed on your VM. On the Advanced blade, you can configure the IP address and the automatic delete options. After you are done with the configuration, click Create to create the formula. Create a new formula Create a formula from a VM To create a formula from a VM, follow these steps: In your DevTest Labs instance, on the Overview blade, select the VM from which you want to create the new formula. Select a VM for your formula On the VM&#8217;s blade, select Create formula (reusable base) under the Operations menu. On the Create a formula blade, provide a name and optionally a description and click OK. Create a new formula from a VM Modify a formula To modify the properties of an existing formula, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Formulas (reusable bases) under the Virtual Machine Bases menu. Select the formula you wish to modify. Make your changes on the Update formula blade and select Update when you are finished. Modify an existing formula Delete a formula To delete an existing formula, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Formulas (reusable bases) under the Virtual Machine Bases menu. Click on the ellipsis to the right of the formula you want to delete and click Delete in the context menu. Delete an existing formula On the confirmation dialog click Yes. Configure a lab to include policies and procedures For each lab you create, you can control cost and minimize your time waste by managing policies. Configure allowed virtual machine sizes policy You can configure that the creation of only specific VM sizes is allowed. To do that follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Allowed virtual machines under the Settings menu. On the Allowed virtual machine move the slider to On and then check each VM size which you want to be allowed to be created. Click Save on the top of the blade when you are finished. Enable allowed virtual machine sizes policy Configure virtual machines per user policy It is also possible to limit the number of virtual machines an user can create. Additionally, you can limit the number of VMs using premium OS disks. To do that, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Virtual machines per user under the Settings menu. Move the slider to Yes to limit the number of virtual machines and/or the number of virtual machines using premium OS disks per user. After you enabled a limitation, provide a number for the limit. The default value is 1. Click Save. Limit the number of virtual machines and premium OS disks per user If a user has reached his maximum amount of VMs but tries to create another one, he will get an error message. Configure virtual machines per lab policy To specify the maximum number of VMs that can be created in your current lab, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Virtual machines per lab under the Settings menu. Move the slider to Yes to limit the number of virtual machines and/or the number of virtual machines using premium OS disks per lab. After you enabled a limitation, provide a number for the limit. The default value is 1. Click Save. Limit the number of virtual machines and premium OS disks per lab Configure auto-shutdown policy The auto-shutdown is the most important policy for helping you to minimize cost control and also helps to prevent costs when the VMs are not in use. I always enable this policy when I do training because there is always at least one student who doesn’t turn off his VMs at the end of the day. To enable auto-shutdown, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Auto-shutdown under the Schedules menu. Move the slider to On to enable auto-shutdown. Configure the shutdown time and optionally enable sending a notification and provide a webhook URL or an email address. The notification will be sent 15 minutes prior the shutdown. Click Save. Configure auto-shutdown policy Once configured, the auto-shutdown policy will be applied to all VMs in the lab. You also can adjust the auto-shutdown policy for specific VMs. To do that follow these steps: In your DevTest Labs instance, select the VM you want to configure. On the VM blade select Auto-shutdown under the Operations menu. There you can see the same attributes as before but if you change them here, you only change the settings for this VM. After all changes are made, click Save. Configure auto-shutdown policy for an individual VM I like to disable the auto-shutdown policy on my VM, so I can prepare things for the next days training on the evening without getting interrupted by the shutdown. Configure auto-start policy Besides auto-shutdown, you can also configure an auto-start policy. To do that follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Auto-start under the Schedules menu. Move the slider to On and then configure the start time and on which days the VMs should start. Click Save Configure auto-start policy ## Once configured, the auto-start policy will be applied to all VMs in the lab. You can Opt-out the auto-start policy for a specific VM. To do that follow these steps: In your DevTest Labs instance, select the VM you want to configure. On the VM blade select Auto-start under the Operations menu. There you can see move the slider to On or Off to enable or disable auto-start. Click Save. Disable auto-start for a specific VM Set expiration date policy The expiration date policy ensures that VMs are automatically deleted at a specified date and time. To do that follow these steps: When creating a new VM click on the Advanced settings. On the Advanced blade click the calendar icon under Expiration date and select the date when the VM should be deleted. Next, select the time. Click OK and then Create. Set the expiration date policy Configure cost management Azure DevTest Labs was designed to manage your resources and costs effectively. Cost Management is a key feature and allows you to track to costs associated to your lab. It also enables you to view trends, set cost targets and configure alerts. To view your Cost trend chart, select Configuration and policies in your DevTest lab and then select Cost trend under the Cost Tracking menu. Cost trend To view the monthly estimated cost trend chart follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Cost trend under the Cost Tracking menu. The Cost trend chart To modify the Cost trend chart follow these steps: On the Cost trend blade, click on Manage target. On the Manage target blade, you can modify the date interval of the chart and also set a cost target threshold and notifications via webhook when a certain amount is reached. Click OK to save your changes. Modify the cost trend chart Cost by resource With cost by resource, you get a breakdown of your costs of each resource. To do that follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Cost by resource under the Cost Tracking menu. All your resources of the lab are listed on the Cost by resource blade. Your costs by resource Secure access to labs The access to your DevTest Labs is determined by Azure Role-Based Access Control (RBAC). To understand how this works, you have to understand the difference between a permission, a role, and a scope defined by RBAC. Permission: Defines access to a specific action (for example, read-access to the storage account) Role: A set of permissions that can be grouped and assigned to a user. For example, the reader role can read all resources. Scope: A level within the hierarchy of an Azure resource, such as a resource group or a virtual machine. With RBAC, you can segregate duties within your team into roles where you grant only the amount of access necessary to users to perform their job. The three most relevant roles to Azure DevTest Labs are Owner, DevTest Labs User, and Contributor. Add an owner or user at the lab level Owners and users can be added at the lab level via the Azure Portal. This also includes external users with a valid Microsoft account. To add an owner or user, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Access control (IAM) under the Manage menu and click +Add. On the Add permissions blade, select Owner or DevTest Labs user as the role. Enter the name or email address and select the user. Click Save. Add a user to the lab Add an external user to a lab using PowerShell Additionally to the Azure portal, you can add an external user to your Azure DevTest Labs using PowerShell. Before you can do that, you have to add the user as a gust to the Active Directory though. To do that follow these steps: Open the Azure Active Directory and select Users under the Manage menu. On the All users blade, click +New guest user on the top of the blade. Enter the email of the user you want to add as a guest and optionally include a message for the invitation. Add a user as a guest to your Active Directory After the invitation is sent, the user will show up in your Azure Active Directory. The Azure Active Directory with the new guest user   Now, you can add the user to your lab using PowerShell, following these steps: Create the following variables in PowerShell: $subscriptionId = “&#8221; $labResourceGroup = “&lt;Enter lab’s resource name here&gt;” $labName = “&#8221; $userDisplayName = “&lt;Enter user’s display name here&gt;” Select your subscription (you only have to do this step if you have more than one subscription) Select-AzureRmSubscription -SubscriptionId $subscriptionId Get the user object $adObject = Get-AzureRmADUser -SearchString $userDisplayName Create the role assignment $labId = (‘/subscriptions/’ + $subscriptionId + ‘/resourceGroups/’ + $labResourceGroup + ‘/providers/Microsoft.DevTestLab/labs/’ + $labName) Attention: You need a / in front of subscriptions. The Microsoft documentation doesn’t have the slash and therefore it won’t work. Assign the role to the user: New-AzureRmRoleAssignment -ObjectId $adObject.Id -RoleDefinitionName ‘DevTest Labs User’ -Scope $labId Add a user to your lab with PowerShell After you are done, the user will appear in your lab’s Active Directory. To verify it go to your Azure DevTest Labs –&gt; Configuration and policies –&gt; Access control (IAM). There, you can see the previously added user with his assigned role. Confirm that the user has been added to your lab Use lab settings to set access rights to the environment You can give your lab users Contributor access rights. This enables them to edit resources such as SQL Server, in the resource group that contains your lab environment. By default, lab users only have the Reader access rights. To modify the user’s rights, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Lab settings under the Settings menu. Select Contributor to give users the Contributor access rights. Click Save Give users the Contributor or Reader access rights Use environments in a lab You can use Azure Resource Manager (ARM) templates to spin up a complete environment in DevTest labs. These environments can contain multiple VMs, or a SharePoint farm.  Following infrastructure-as-code and configuration-as-code best practices, environment templates are managed in source control. Azure DevTest Labs loads all ARM templates directly from your GitHub or VSTS Git repositories. As a result, Resource Manager templates can be used across the entire release cycle, from the test environment to the production environment. Configure an ARM template repository There are a couple of rules which you have to follow when organizing ARM templates in a repository: The master template file must be named azuredeploy.json. The parameter file must be named azuredeploy.parameters.json. You can use the parameters _artifactsLocation and _artifactsLocationSasToken to construct the parametersLink URI value, allowing DevTest Labs to automatically manage nested templates. Metadata can be defined to specify the template display name and description. This metadata must be in a file named metadata.json. On the following example metadata file, you can see how to specify the display name and description: { “itemDisplayName”: “Your template name”, “description”: “Your description” } To add a repository to your Azure DevTest Labs using the Azure portal, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Repositories under the External Resources menu and click +Add. Enter a name, the Git clone URI, your access token and optionally a branch. Enter either a folder path that starts with / and is relative to your Git clone URI or your ARM template definition. Click Save. Add a repository with templates to your Azure DevTest Labs After you added the Repository, you can use the templates when you add a new Resource on the Overview blade of your DevTest Labs. Conclusion This post described the Azure DevTest Labs and showed what you can do with it and how it helps you to minimize the management tasks and also helps to keep your costs low. I talked about creating VMs, custom images, and formulas and how to apply policies like auto-shutdown to the resources within the lab. Furthermore, I showed how to add users to your lab and how to change their access permissions. The last topic was about setting up your own Git repository which helps you to create complete environments with a single deployment process. For more information about the 70-532 exam get the Exam Ref book from Microsoft and continue reading my blog posts. I am covering all topics needed to pass the exam. You can find an overview of all posts related to the 70-532 exam here." /><link rel="canonical" href="https://www.programmingwithwolfgang.com/design-and-implement-devtest-labs/" /><meta property="og:url" content="https://www.programmingwithwolfgang.com/design-and-implement-devtest-labs/" /><meta property="og:site_name" content="Programming With Wolfgang" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-04-05T16:45:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Design and implement DevTest Labs" /><meta name="twitter:site" content="@wolfgang_ofner" /><meta name="twitter:creator" content="@Wolfgang Ofner" /><meta name="google-site-verification" content="xxsPm-h6A0B6a0QMgqXO80PU4DbMt4Dq06p-SGzB3TU" /> <script type="application/ld+json"> {"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.programmingwithwolfgang.com/design-and-implement-devtest-labs/"},"author":{"@type":"Person","name":"Wolfgang Ofner"},"url":"https://www.programmingwithwolfgang.com/design-and-implement-devtest-labs/","description":"Azure DevTest Labs is a service designed to help developers and testers quickly spin up virtual machines (VMs) or complete environments in Azure, enabling rapid deployment and testing of applications. This allows you to easily spin up and tear down development and test resources, minimizing waste and providing better cost control. It is also useful to create pre-provisioned environments for demos and training. Create DevTest Labs To add a new DevTest Lab, follow these steps: In the Azure Portal select All services and search for DevTest Labs. Click on DevTest Labs and select + Add. Enter a Lab name, Subscription, Location and optionally add a Name and Value for tagging. By default, the Auto-shutdown option is enabled. This feature can help you save costs. Click on it, if you want to disable it or if you want to change the time for the shutdown. Create a DevTest Lab Click on Create. The deployment process creates a new resource group with the following resources in it: The DevTest Lab instance A Key vault instance A Storage account A virtual network Deployed resources Add a VM to your lab After the DevTest Lab is deployed, you can add a VM to it following these steps: In your DevTest Lab, click +Add on the overview blade. On the Choose a base blade, select your desired image for your VM. Selecting an image opens the Virtual machine blade. Provide a machine name, user name, password, the size of your VM and optionally artifacts. Artifacts are third-party tools like Chrome or Git. Create a Windows 2016 Server for your DevTest Lab Click Create to start the deployment process. Claim a VM After the VM is created, the ownership is assigned to the creator but it can be made claimable for others. To unclaim the VM,  follow these steps: Click on the VM, you want to unclaim in your DevTest Lab. On the top of the Overview blade click on unclaim. Unclaim a VM Unclaiming a VM removes it from the My virtual machines area in the DevTest Lab and moves it to the Claimable virtual machines section. To claim a VM, open it and select Claim machine on the top of the Overview blade. Create and manage custom images and formulas The difference between a custom image and a formula is that the custom image is an image based on a VHD, whereas formulas are base on a VHD with additional pre-configurations such VM size, virtual network, and artifacts. These pre-configured settings can be overridden during the deployment process. Creating custom images Custom images provide a static, immutable way to create VMs from a configuration. Pros of using custom images: VMs created from the same image are identical The provisioning of the VM is fast Cons of using custom images: To update the image, it has to be recreated You can use the Azure Portal or PowerShell to create an image from an existing VM or create one from a VHD. Create a custom image from a provisioned VM To create a custom image from a provisioned VM using the Azure Portal, follow these steps: In your DevTest lab, select All virtual machines under the My Lab menu and then click on the VM, you want to use as a base for your image. All virtual machines in your DevTest Lab After you selected a VM, click on Create custom image under the Operations menu. On the Custom image blade, provide a name and select whether sysprep should be run. Click OK to create the image. Create a custom image Create a custom image from a VHD using the Azure Portal To create a custom image from a VHD using the Azure Portal follow these steps: In your DevTest Lab instance, select Configuration and policies under the Settings tab. On the Configuration and policies blade, select Custom images under the Virtual Machine Bases menu and click +Add. Provide a name, the operating system type and select the VHD. If you don’t have any, you have to upload one first. Click OK.  Delete a custom image To delete a custom image, follow these steps: In your DevTest Lab instance, select Configuration and policies under the Settings tab. On the Configuration and policies blade, select Custom images under the Virtual Machine Bases menu and click the three dots next to the image which you want to delete. Click delete and select Yes in the confirmation dialog. Delete a custom image Formulas Formulas provide default property values and therefore offer a fast way to create VMs from a preconfigured state. Pros of using formulas: Formulas can define default setting that custom images can’t provide. The default settings from the formulas can be modified when creating a new VM. Cons of using custom images: Creating a new formula can be more time consuming than creating a VM from a custom image. There are two ways to create a formula: From a base like a custom image or Marketplace image, use a base when you want to define all characteristics of the formula. From an existing lab VM. Use this approach when you want to create a formula which is based on an existing VM. Create a formula from a base To create a formula from a base, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Formulas (reusable bases) under the Virtual Machine Bases menu and click + Add. On the Choose a base blade, select an image to use for the formula, for example, Windows Server 2016 Datacenter. Provide a Formula name and user name. Select the disk type and the size of your VM. Optionally add artifacts. Artifacts are third-party tools like Google Chrome or Docker which will be installed on your VM. On the Advanced blade, you can configure the IP address and the automatic delete options. After you are done with the configuration, click Create to create the formula. Create a new formula Create a formula from a VM To create a formula from a VM, follow these steps: In your DevTest Labs instance, on the Overview blade, select the VM from which you want to create the new formula. Select a VM for your formula On the VM&#8217;s blade, select Create formula (reusable base) under the Operations menu. On the Create a formula blade, provide a name and optionally a description and click OK. Create a new formula from a VM Modify a formula To modify the properties of an existing formula, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Formulas (reusable bases) under the Virtual Machine Bases menu. Select the formula you wish to modify. Make your changes on the Update formula blade and select Update when you are finished. Modify an existing formula Delete a formula To delete an existing formula, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Formulas (reusable bases) under the Virtual Machine Bases menu. Click on the ellipsis to the right of the formula you want to delete and click Delete in the context menu. Delete an existing formula On the confirmation dialog click Yes. Configure a lab to include policies and procedures For each lab you create, you can control cost and minimize your time waste by managing policies. Configure allowed virtual machine sizes policy You can configure that the creation of only specific VM sizes is allowed. To do that follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Allowed virtual machines under the Settings menu. On the Allowed virtual machine move the slider to On and then check each VM size which you want to be allowed to be created. Click Save on the top of the blade when you are finished. Enable allowed virtual machine sizes policy Configure virtual machines per user policy It is also possible to limit the number of virtual machines an user can create. Additionally, you can limit the number of VMs using premium OS disks. To do that, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Virtual machines per user under the Settings menu. Move the slider to Yes to limit the number of virtual machines and/or the number of virtual machines using premium OS disks per user. After you enabled a limitation, provide a number for the limit. The default value is 1. Click Save. Limit the number of virtual machines and premium OS disks per user If a user has reached his maximum amount of VMs but tries to create another one, he will get an error message. Configure virtual machines per lab policy To specify the maximum number of VMs that can be created in your current lab, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Virtual machines per lab under the Settings menu. Move the slider to Yes to limit the number of virtual machines and/or the number of virtual machines using premium OS disks per lab. After you enabled a limitation, provide a number for the limit. The default value is 1. Click Save. Limit the number of virtual machines and premium OS disks per lab Configure auto-shutdown policy The auto-shutdown is the most important policy for helping you to minimize cost control and also helps to prevent costs when the VMs are not in use. I always enable this policy when I do training because there is always at least one student who doesn’t turn off his VMs at the end of the day. To enable auto-shutdown, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Auto-shutdown under the Schedules menu. Move the slider to On to enable auto-shutdown. Configure the shutdown time and optionally enable sending a notification and provide a webhook URL or an email address. The notification will be sent 15 minutes prior the shutdown. Click Save. Configure auto-shutdown policy Once configured, the auto-shutdown policy will be applied to all VMs in the lab. You also can adjust the auto-shutdown policy for specific VMs. To do that follow these steps: In your DevTest Labs instance, select the VM you want to configure. On the VM blade select Auto-shutdown under the Operations menu. There you can see the same attributes as before but if you change them here, you only change the settings for this VM. After all changes are made, click Save. Configure auto-shutdown policy for an individual VM I like to disable the auto-shutdown policy on my VM, so I can prepare things for the next days training on the evening without getting interrupted by the shutdown. Configure auto-start policy Besides auto-shutdown, you can also configure an auto-start policy. To do that follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Auto-start under the Schedules menu. Move the slider to On and then configure the start time and on which days the VMs should start. Click Save Configure auto-start policy ## Once configured, the auto-start policy will be applied to all VMs in the lab. You can Opt-out the auto-start policy for a specific VM. To do that follow these steps: In your DevTest Labs instance, select the VM you want to configure. On the VM blade select Auto-start under the Operations menu. There you can see move the slider to On or Off to enable or disable auto-start. Click Save. Disable auto-start for a specific VM Set expiration date policy The expiration date policy ensures that VMs are automatically deleted at a specified date and time. To do that follow these steps: When creating a new VM click on the Advanced settings. On the Advanced blade click the calendar icon under Expiration date and select the date when the VM should be deleted. Next, select the time. Click OK and then Create. Set the expiration date policy Configure cost management Azure DevTest Labs was designed to manage your resources and costs effectively. Cost Management is a key feature and allows you to track to costs associated to your lab. It also enables you to view trends, set cost targets and configure alerts. To view your Cost trend chart, select Configuration and policies in your DevTest lab and then select Cost trend under the Cost Tracking menu. Cost trend To view the monthly estimated cost trend chart follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Cost trend under the Cost Tracking menu. The Cost trend chart To modify the Cost trend chart follow these steps: On the Cost trend blade, click on Manage target. On the Manage target blade, you can modify the date interval of the chart and also set a cost target threshold and notifications via webhook when a certain amount is reached. Click OK to save your changes. Modify the cost trend chart Cost by resource With cost by resource, you get a breakdown of your costs of each resource. To do that follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Cost by resource under the Cost Tracking menu. All your resources of the lab are listed on the Cost by resource blade. Your costs by resource Secure access to labs The access to your DevTest Labs is determined by Azure Role-Based Access Control (RBAC). To understand how this works, you have to understand the difference between a permission, a role, and a scope defined by RBAC. Permission: Defines access to a specific action (for example, read-access to the storage account) Role: A set of permissions that can be grouped and assigned to a user. For example, the reader role can read all resources. Scope: A level within the hierarchy of an Azure resource, such as a resource group or a virtual machine. With RBAC, you can segregate duties within your team into roles where you grant only the amount of access necessary to users to perform their job. The three most relevant roles to Azure DevTest Labs are Owner, DevTest Labs User, and Contributor. Add an owner or user at the lab level Owners and users can be added at the lab level via the Azure Portal. This also includes external users with a valid Microsoft account. To add an owner or user, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Access control (IAM) under the Manage menu and click +Add. On the Add permissions blade, select Owner or DevTest Labs user as the role. Enter the name or email address and select the user. Click Save. Add a user to the lab Add an external user to a lab using PowerShell Additionally to the Azure portal, you can add an external user to your Azure DevTest Labs using PowerShell. Before you can do that, you have to add the user as a gust to the Active Directory though. To do that follow these steps: Open the Azure Active Directory and select Users under the Manage menu. On the All users blade, click +New guest user on the top of the blade. Enter the email of the user you want to add as a guest and optionally include a message for the invitation. Add a user as a guest to your Active Directory After the invitation is sent, the user will show up in your Azure Active Directory. The Azure Active Directory with the new guest user   Now, you can add the user to your lab using PowerShell, following these steps: Create the following variables in PowerShell: $subscriptionId = “&#8221; $labResourceGroup = “&lt;Enter lab’s resource name here&gt;” $labName = “&#8221; $userDisplayName = “&lt;Enter user’s display name here&gt;” Select your subscription (you only have to do this step if you have more than one subscription) Select-AzureRmSubscription -SubscriptionId $subscriptionId Get the user object $adObject = Get-AzureRmADUser -SearchString $userDisplayName Create the role assignment $labId = (‘/subscriptions/’ + $subscriptionId + ‘/resourceGroups/’ + $labResourceGroup + ‘/providers/Microsoft.DevTestLab/labs/’ + $labName) Attention: You need a / in front of subscriptions. The Microsoft documentation doesn’t have the slash and therefore it won’t work. Assign the role to the user: New-AzureRmRoleAssignment -ObjectId $adObject.Id -RoleDefinitionName ‘DevTest Labs User’ -Scope $labId Add a user to your lab with PowerShell After you are done, the user will appear in your lab’s Active Directory. To verify it go to your Azure DevTest Labs –&gt; Configuration and policies –&gt; Access control (IAM). There, you can see the previously added user with his assigned role. Confirm that the user has been added to your lab Use lab settings to set access rights to the environment You can give your lab users Contributor access rights. This enables them to edit resources such as SQL Server, in the resource group that contains your lab environment. By default, lab users only have the Reader access rights. To modify the user’s rights, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Lab settings under the Settings menu. Select Contributor to give users the Contributor access rights. Click Save Give users the Contributor or Reader access rights Use environments in a lab You can use Azure Resource Manager (ARM) templates to spin up a complete environment in DevTest labs. These environments can contain multiple VMs, or a SharePoint farm.  Following infrastructure-as-code and configuration-as-code best practices, environment templates are managed in source control. Azure DevTest Labs loads all ARM templates directly from your GitHub or VSTS Git repositories. As a result, Resource Manager templates can be used across the entire release cycle, from the test environment to the production environment. Configure an ARM template repository There are a couple of rules which you have to follow when organizing ARM templates in a repository: The master template file must be named azuredeploy.json. The parameter file must be named azuredeploy.parameters.json. You can use the parameters _artifactsLocation and _artifactsLocationSasToken to construct the parametersLink URI value, allowing DevTest Labs to automatically manage nested templates. Metadata can be defined to specify the template display name and description. This metadata must be in a file named metadata.json. On the following example metadata file, you can see how to specify the display name and description: { “itemDisplayName”: “Your template name”, “description”: “Your description” } To add a repository to your Azure DevTest Labs using the Azure portal, follow these steps: In your DevTest Labs instance, select Configuration and policies under the Settings menu. On the Configuration and policies blade, select Repositories under the External Resources menu and click +Add. Enter a name, the Git clone URI, your access token and optionally a branch. Enter either a folder path that starts with / and is relative to your Git clone URI or your ARM template definition. Click Save. Add a repository with templates to your Azure DevTest Labs After you added the Repository, you can use the templates when you add a new Resource on the Overview blade of your DevTest Labs. Conclusion This post described the Azure DevTest Labs and showed what you can do with it and how it helps you to minimize the management tasks and also helps to keep your costs low. I talked about creating VMs, custom images, and formulas and how to apply policies like auto-shutdown to the resources within the lab. Furthermore, I showed how to add users to your lab and how to change their access permissions. The last topic was about setting up your own Git repository which helps you to create complete environments with a single deployment process. For more information about the 70-532 exam get the Exam Ref book from Microsoft and continue reading my blog posts. I am covering all topics needed to pass the exam. You can find an overview of all posts related to the 70-532 exam here.","@type":"BlogPosting","headline":"Design and implement DevTest Labs","dateModified":"2020-11-25T18:17:18+01:00","datePublished":"2018-04-05T16:45:00+02:00","@context":"https://schema.org"}</script><title>Design and implement DevTest Labs | Programming With Wolfgang</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-112077092-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-112077092-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/author/wolfgang-small.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Programming With Wolfgang</a></div><div class="site-subtitle font-italic">Let's talk programming</div></div><div class="w-100 d-flex justify-content-center"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span></div><ul class="w-100" style="margin-top: 1em;"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/wolfgangofner" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/wolfgang_ofner" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/wolfgangofner" aria-label="linkedin" class="order-5" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['wolfgang','programmingwithwolfgang.com'].join('@')" aria-label="email" class="order-6" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-7" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="d-sm-none row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Design and implement DevTest Labs</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Design and implement DevTest Labs</div><div style="visibility:hidden;"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel">Cancel</span></div></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Design and implement DevTest Labs</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Apr 5, 2018, 4:45 PM +0200" > Apr 5, 2018 <i class="unloaded">2018-04-05T16:45:00+02:00</i> </span> by <span class="author"> Wolfgang Ofner </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Nov 25, 2020, 6:17 PM +0100" > Nov 25, 2020 <i class="unloaded">2020-11-25T18:17:18+01:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3390 words">39 min</span></div></div><div class="post-content"><p>Azure DevTest Labs is a service designed to help developers and testers quickly spin up virtual machines (VMs) or complete environments in Azure, enabling rapid deployment and testing of applications. This allows you to easily spin up and tear down development and test resources, minimizing waste and providing better cost control. It is also useful to create pre-provisioned environments for demos and training.</p><h2 id="createdevtest-labs">Create DevTest Labs</h2><p>To add a new DevTest Lab, follow these steps:</p><ol><li>In the Azure Portal select All services and search for DevTest Labs.<li>Click on DevTest Labs and select + Add.<li>Enter a Lab name, Subscription, Location and optionally add a Name and Value for tagging.<li>By default, the Auto-shutdown option is enabled. This feature can help you save costs. Click on it, if you want to disable it or if you want to change the time for the shutdown.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/03/Create-a-DevTest-Lab.jpg"><img loading="lazy" src="/assets/img/posts/2018/03/Create-a-DevTest-Lab.jpg" alt="Create a DevTest Lab" /></a><p> Create a DevTest Lab</p></div><ol start="5"><li> Click on Create.</ol><p>The deployment process creates a new resource group with the following resources in it:</p><ul><li>The DevTest Lab instance<li>A Key vault instance<li>A Storage account<li>A virtual network</ul><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/03/Deployed-resources.jpg"><img loading="lazy" src="/assets/img/posts/2018/03/Deployed-resources.jpg" alt="Deployed resources" /></a><p> Deployed resources</p></div><h2 id="add-a-vm-to-your-lab">Add a VM to your lab</h2><p>After the DevTest Lab is deployed, you can add a VM to it following these steps:</p><ol><li>In your DevTest Lab, click +Add on the overview blade.<li>On the Choose a base blade, select your desired image for your VM.<li>Selecting an image opens the Virtual machine blade. Provide a machine name, user name, password, the size of your VM and optionally artifacts. Artifacts are third-party tools like Chrome or Git.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/03/Create-a-Windows-2016-Server-for-your-DevTest-Lab.jpg"><img loading="lazy" src="/assets/img/posts/2018/03/Create-a-Windows-2016-Server-for-your-DevTest-Lab.jpg" alt="Create a Windows 2016 Server for your DevTest Lab" /></a><p> Create a Windows 2016 Server for your DevTest Lab</p></div><ol start="4"><li> Click Create to start the deployment process.</ol><h3 id="claim-a-vm">Claim a VM</h3><p>After the VM is created, the ownership is assigned to the creator but it can be made claimable for others. To unclaim the VM,  follow these steps:</p><ol><li>Click on the VM, you want to unclaim in your DevTest Lab.<li>On the top of the Overview blade click on unclaim.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/03/Unclaim-a-VM.jpg"><img loading="lazy" src="/assets/img/posts/2018/03/Unclaim-a-VM.jpg" alt="Unclaim a VM" /></a><p> Unclaim a VM</p></div><p>Unclaiming a VM removes it from the My virtual machines area in the DevTest Lab and moves it to the Claimable virtual machines section.</p><p>To claim a VM, open it and select Claim machine on the top of the Overview blade.</p><h2 id="create-and-manage-custom-images-and-formulas">Create and manage custom images and formulas</h2><p>The difference between a custom image and a formula is that the custom image is an image based on a VHD, whereas formulas are base on a VHD with additional pre-configurations such VM size, virtual network, and artifacts. These pre-configured settings can be overridden during the deployment process.</p><h3 id="creating-custom-images">Creating custom images</h3><p>Custom images provide a static, immutable way to create VMs from a configuration.</p><p>Pros of using custom images:</p><ul><li>VMs created from the same image are identical<li>The provisioning of the VM is fast</ul><p>Cons of using custom images:</p><ul><li>To update the image, it has to be recreated</ul><p>You can use the Azure Portal or PowerShell to create an image from an existing VM or create one from a VHD.</p><h3 id="create-a-custom-image-from-aprovisioned-vm">Create a custom image from a provisioned VM</h3><p>To create a custom image from a provisioned VM using the Azure Portal, follow these steps:</p><ol><li>In your DevTest lab, select All virtual machines under the My Lab menu and then click on the VM, you want to use as a base for your image.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/03/All-virtual-machines-in-your-DevTest-Lab.jpg"><img loading="lazy" src="/assets/img/posts/2018/03/All-virtual-machines-in-your-DevTest-Lab.jpg" alt="All virtual machines in your DevTest Lab" /></a><p> All virtual machines in your DevTest Lab</p></div><ol start="2"><li> After you selected a VM, click on Create custom image under the Operations menu.<li> On the Custom image blade, provide a name and select whether sysprep should be run.<li> Click OK to create the image.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/03/Create-a-custom-image.jpg"><img loading="lazy" src="/assets/img/posts/2018/03/Create-a-custom-image.jpg" alt="Create a custom image" /></a><p> Create a custom image</p></div><h3 id="create-a-custom-image-from-a-vhd-using-the-azure-portal">Create a custom image from a VHD using the Azure Portal</h3><p>To create a custom image from a VHD using the Azure Portal follow these steps:</p><ol><li>In your DevTest Lab instance, select Configuration and policies under the Settings tab.<li>On the Configuration and policies blade, select Custom images under the Virtual Machine Bases menu and click +Add.<li>Provide a name, the operating system type and select the VHD. If you don’t have any, you have to upload one first.<li>Click OK.</ol><h3 id="delete-a-custom-image"> Delete a custom image</h3><p>To delete a custom image, follow these steps:</p><ol><li>In your DevTest Lab instance, select Configuration and policies under the Settings tab.<li>On the Configuration and policies blade, select Custom images under the Virtual Machine Bases menu and click the three dots next to the image which you want to delete.<li>Click delete and select Yes in the confirmation dialog.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/03/Delete-a-custom-image.jpg"><img loading="lazy" src="/assets/img/posts/2018/03/Delete-a-custom-image.jpg" alt="Delete a custom image" /></a><p> Delete a custom image</p></div><h2 id="formulas">Formulas</h2><p>Formulas provide default property values and therefore offer a fast way to create VMs from a preconfigured state.</p><p>Pros of using formulas:</p><ul><li>Formulas can define default setting that custom images can’t provide.<li>The default settings from the formulas can be modified when creating a new VM.</ul><p>Cons of using custom images:</p><ul><li>Creating a new formula can be more time consuming than creating a VM from a custom image.</ul><p>There are two ways to create a formula:</p><ol><li>From a base like a custom image or Marketplace image, use a base when you want to define all characteristics of the formula.<li>From an existing lab VM. Use this approach when you want to create a formula which is based on an existing VM.</ol><h3 id="create-a-formula-from-a-base">Create a formula from a base</h3><p>To create a formula from a base, follow these steps:</p><ol><li>In your DevTest Labs instance, select Configuration and policies under the Settings menu.<li>On the Configuration and policies blade, select Formulas (reusable bases) under the Virtual Machine Bases menu and click + Add.<li>On the Choose a base blade, select an image to use for the formula, for example, Windows Server 2016 Datacenter.<li>Provide a Formula name and user name.<li>Select the disk type and the size of your VM.<li>Optionally add artifacts. Artifacts are third-party tools like Google Chrome or Docker which will be installed on your VM.<li>On the Advanced blade, you can configure the IP address and the automatic delete options.<li>After you are done with the configuration, click Create to create the formula.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Create-a-new-formula.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Create-a-new-formula.jpg" alt="Create a new formula" /></a><p> Create a new formula</p></div><h3 id="create-a-formula-from-a-vm">Create a formula from a VM</h3><p>To create a formula from a VM, follow these steps:</p><ol><li>In your DevTest Labs instance, on the Overview blade, select the VM from which you want to create the new formula.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Select-a-VM-for-your-formula.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Select-a-VM-for-your-formula.jpg" alt="Select a VM for your formula" /></a><p> Select a VM for your formula</p></div><ol start="2"><li> On the VM&#8217;s blade, select Create formula (reusable base) under the Operations menu.<li> On the Create a formula blade, provide a name and optionally a description and click OK.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Create-a-new-formula-from-a-VM.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Create-a-new-formula-from-a-VM.jpg" alt="Create a new formula from a VM" /></a><p> Create a new formula from a VM</p></div><h3 id="modify-a-formula">Modify a formula</h3><p>To modify the properties of an existing formula, follow these steps:</p><ol><li>In your DevTest Labs instance, select Configuration and policies under the Settings menu.<li>On the Configuration and policies blade, select Formulas (reusable bases) under the Virtual Machine Bases menu.<li>Select the formula you wish to modify.<li>Make your changes on the Update formula blade and select Update when you are finished.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Modify-an-existing-formula.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Modify-an-existing-formula.jpg" alt="Modify an existing formula" /></a><p> Modify an existing formula</p></div><h3 id="delete-a-formula">Delete a formula</h3><p>To delete an existing formula, follow these steps:</p><ol><li>In your DevTest Labs instance, select Configuration and policies under the Settings menu.<li>On the Configuration and policies blade, select Formulas (reusable bases) under the Virtual Machine Bases menu.<li>Click on the ellipsis to the right of the formula you want to delete and click Delete in the context menu.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Delete-an-existing-formula.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Delete-an-existing-formula.jpg" alt="Delete an existing formula" /></a><p> Delete an existing formula</p></div><ol start="4"><li> On the confirmation dialog click Yes.</ol><h2 id="configure-a-lab-to-include-policies-and-procedures">Configure a lab to include policies and procedures</h2><p>For each lab you create, you can control cost and minimize your time waste by managing policies.</p><h3 id="configure-allowed-virtual-machine-sizes-policy">Configure allowed virtual machine sizes policy</h3><p>You can configure that the creation of only specific VM sizes is allowed. To do that follow these steps:</p><ol><li>In your DevTest Labs instance, select Configuration and policies under the Settings menu.<li>On the Configuration and policies blade, select Allowed virtual machines under the Settings menu.<li>On the Allowed virtual machine move the slider to On and then check each VM size which you want to be allowed to be created.<li>Click Save on the top of the blade when you are finished.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Enable-allowed-virtual-machine-sizes-policy.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Enable-allowed-virtual-machine-sizes-policy.jpg" alt="Enable allowed virtual machine sizes policy" /></a><p> Enable allowed virtual machine sizes policy</p></div><h3 id="configure-virtual-machines-per-user-policy">Configure virtual machines per user policy</h3><p>It is also possible to limit the number of virtual machines an user can create. Additionally, you can limit the number of VMs using premium OS disks. To do that, follow these steps:</p><ol><li>In your DevTest Labs instance, select Configuration and policies under the Settings menu.<li>On the Configuration and policies blade, select Virtual machines per user under the Settings menu.<li>Move the slider to Yes to limit the number of virtual machines and/or the number of virtual machines using premium OS disks per user.<li>After you enabled a limitation, provide a number for the limit. The default value is 1.<li>Click Save.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Limit-the-number-of-virtual-machines-and-premium-OS-disks-per-user.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Limit-the-number-of-virtual-machines-and-premium-OS-disks-per-user.jpg" alt="Limit the number of virtual machines and premium OS disks per user" /></a><p> Limit the number of virtual machines and premium OS disks per user</p></div><p>If a user has reached his maximum amount of VMs but tries to create another one, he will get an error message.</p><h3 id="configure-virtual-machines-per-lab-policy">Configure virtual machines per lab policy</h3><p>To specify the maximum number of VMs that can be created in your current lab, follow these steps:</p><ol><li>In your DevTest Labs instance, select Configuration and policies under the Settings menu.<li>On the Configuration and policies blade, select Virtual machines per lab under the Settings menu.<li>Move the slider to Yes to limit the number of virtual machines and/or the number of virtual machines using premium OS disks per lab.<li>After you enabled a limitation, provide a number for the limit. The default value is 1.<li>Click Save.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Limit-the-number-of-virtual-machines-and-premium-OS-disks-per-lab.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Limit-the-number-of-virtual-machines-and-premium-OS-disks-per-lab.jpg" alt="Limit the number of virtual machines and premium OS disks per lab" /></a><p> Limit the number of virtual machines and premium OS disks per lab</p></div><h3 id="configure-auto-shutdown-policy">Configure auto-shutdown policy</h3><p>The auto-shutdown is the most important policy for helping you to minimize cost control and also helps to prevent costs when the VMs are not in use. I always enable this policy when I do training because there is always at least one student who doesn’t turn off his VMs at the end of the day.</p><p>To enable auto-shutdown, follow these steps:</p><ol><li>In your DevTest Labs instance, select Configuration and policies under the Settings menu.<li>On the Configuration and policies blade, select Auto-shutdown under the Schedules menu.<li>Move the slider to On to enable auto-shutdown.<li>Configure the shutdown time and optionally enable sending a notification and provide a webhook URL or an email address. The notification will be sent 15 minutes prior the shutdown.<li>Click Save.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Configure-auto-shutdown-policy.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Configure-auto-shutdown-policy.jpg" alt="Configure auto-shutdown policy" /></a><p> Configure auto-shutdown policy</p></div><p>Once configured, the auto-shutdown policy will be applied to all VMs in the lab. You also can adjust the auto-shutdown policy for specific VMs. To do that follow these steps:</p><ol><li>In your DevTest Labs instance, select the VM you want to configure.<li>On the VM blade select Auto-shutdown under the Operations menu. There you can see the same attributes as before but if you change them here, you only change the settings for this VM.<li>After all changes are made, click Save.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Configure-auto-shutdown-policy-for-an-individual-VM.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Configure-auto-shutdown-policy-for-an-individual-VM.jpg" alt="Configure auto-shutdown policy for an individual VM" /></a><p> Configure auto-shutdown policy for an individual VM</p></div><p>I like to disable the auto-shutdown policy on my VM, so I can prepare things for the next days training on the evening without getting interrupted by the shutdown.</p><h2 id="configure-auto-start-policy">Configure auto-start policy</h2><p>Besides auto-shutdown, you can also configure an auto-start policy. To do that follow these steps:</p><ol><li>In your DevTest Labs instance, select Configuration and policies under the Settings menu.<li>On the Configuration and policies blade, select Auto-start under the Schedules menu.<li>Move the slider to On and then configure the start time and on which days the VMs should start.<li>Click Save</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Configure-auto-start-policy.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Configure-auto-start-policy.jpg" alt="Configure auto-start policy" /></a><p> Configure auto-start policy</p></div><p>##</p><p>Once configured, the auto-start policy will be applied to all VMs in the lab. You can Opt-out the auto-start policy for a specific VM. To do that follow these steps:</p><ol><li>In your DevTest Labs instance, select the VM you want to configure.<li>On the VM blade select Auto-start under the Operations menu. There you can see move the slider to On or Off to enable or disable auto-start.<li>Click Save.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Disable-auto-start-for-a-specific-VM.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Disable-auto-start-for-a-specific-VM.jpg" alt="Disable auto-start for a specific VM" /></a><p> Disable auto-start for a specific VM</p></div><h3 id="set-expiration-date-policy">Set expiration date policy</h3><p>The expiration date policy ensures that VMs are automatically deleted at a specified date and time. To do that follow these steps:</p><ol><li>When creating a new VM click on the Advanced settings.<li>On the Advanced blade click the calendar icon under Expiration date and select the date when the VM should be deleted. Next, select the time.<li>Click OK and then Create.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Set-the-expiration-date-policy.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Set-the-expiration-date-policy.jpg" alt="Set the expiration date policy" /></a><p> Set the expiration date policy</p></div><h2 id="configure-cost-management">Configure cost management</h2><p>Azure DevTest Labs was designed to manage your resources and costs effectively. Cost Management is a key feature and allows you to track to costs associated to your lab. It also enables you to view trends, set cost targets and configure alerts.</p><p>To view your Cost trend chart, select Configuration and policies in your DevTest lab and then select Cost trend under the Cost Tracking menu.</p><h3 id="cost-trend">Cost trend</h3><p>To view the monthly estimated cost trend chart follow these steps:</p><ol><li>In your DevTest Labs instance, select Configuration and policies under the Settings menu.<li>On the Configuration and policies blade, select Cost trend under the Cost Tracking menu.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/The-Cost-trend-chart.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/The-Cost-trend-chart.jpg" alt="The Cost trend chart" /></a><p> The Cost trend chart</p></div><p>To modify the Cost trend chart follow these steps:</p><ol><li>On the Cost trend blade, click on Manage target.<li>On the Manage target blade, you can modify the date interval of the chart and also set a cost target threshold and notifications via webhook when a certain amount is reached.<li>Click OK to save your changes.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Modify-the-cost-trend-chart.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Modify-the-cost-trend-chart.jpg" alt="Modify the cost trend chart" /></a><p> Modify the cost trend chart</p></div><h3 id="cost-by-resource">Cost by resource</h3><p>With cost by resource, you get a breakdown of your costs of each resource. To do that follow these steps:</p><ol><li>In your DevTest Labs instance, select Configuration and policies under the Settings menu.<li>On the Configuration and policies blade, select Cost by resource under the Cost Tracking menu.<li>All your resources of the lab are listed on the Cost by resource blade.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Your-costs-by-resource.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Your-costs-by-resource.jpg" alt="Your costs by resource" /></a><p> Your costs by resource</p></div><h2 id="secure-access-to-labs">Secure access to labs</h2><p>The access to your DevTest Labs is determined by Azure Role-Based Access Control (RBAC). To understand how this works, you have to understand the difference between a permission, a role, and a scope defined by RBAC.</p><ul><li>Permission: Defines access to a specific action (for example, read-access to the storage account)<li>Role: A set of permissions that can be grouped and assigned to a user. For example, the reader role can read all resources.<li>Scope: A level within the hierarchy of an Azure resource, such as a resource group or a virtual machine.</ul><p>With RBAC, you can segregate duties within your team into roles where you grant only the amount of access necessary to users to perform their job. The three most relevant roles to Azure DevTest Labs are Owner, DevTest Labs User, and Contributor.</p><h3 id="add-an-owner-or-user-at-the-lab-level">Add an owner or user at the lab level</h3><p>Owners and users can be added at the lab level via the Azure Portal. This also includes external users with a valid Microsoft account. To add an owner or user, follow these steps:</p><ol><li>In your DevTest Labs instance, select Configuration and policies under the Settings menu.<li>On the Configuration and policies blade, select Access control (IAM) under the Manage menu and click +Add.<li>On the Add permissions blade, select Owner or DevTest Labs user as the role.<li>Enter the name or email address and select the user.<li>Click Save.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Add-a-user-to-the-lab.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Add-a-user-to-the-lab.jpg" alt="Add a user to the lab" /></a><p> Add a user to the lab</p></div><h3 id="add-an-external-user-to-a-lab-using-powershell">Add an external user to a lab using PowerShell</h3><p>Additionally to the Azure portal, you can add an external user to your Azure DevTest Labs using PowerShell. Before you can do that, you have to add the user as a gust to the Active Directory though. To do that follow these steps:</p><ol><li>Open the Azure Active Directory and select Users under the Manage menu.<li>On the All users blade, click +New guest user on the top of the blade.<li>Enter the email of the user you want to add as a guest and optionally include a message for the invitation.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Add-a-user-as-guest-to-your-Active-Directory.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Add-a-user-as-guest-to-your-Active-Directory.jpg" alt="Add a user as a guest to your Active Directory" /></a><p> Add a user as a guest to your Active Directory</p></div><ol start="4"><li> After the invitation is sent, the user will show up in your Azure Active Directory.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/The-Azure-Active-Directory-with-the-new-guest-user.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/The-Azure-Active-Directory-with-the-new-guest-user.jpg" alt="The Azure Active Directory with the new guest user" /></a><p> The Azure Active Directory with the new guest user</p></div><p> </p><p>Now, you can add the user to your lab using PowerShell, following these steps:</p><ol><li>Create the following variables in PowerShell:<ul><li>$subscriptionId = “<Enter Azure="" subscription="" ID="" here="">&#8221;</Enter><li>$labResourceGroup = “&lt;Enter lab’s resource name here&gt;”<li>$labName = “<Enter lab="" name="" here="">&#8221;</Enter><li>$userDisplayName = “&lt;Enter user’s display name here&gt;”</ul><li>Select your subscription (you only have to do this step if you have more than one subscription)<ul><li>Select-AzureRmSubscription -SubscriptionId $subscriptionId</ul><li>Get the user object<ul><li>$adObject = Get-AzureRmADUser -SearchString $userDisplayName</ul><li>Create the role assignment<ul><li>$labId = (‘/subscriptions/’ + $subscriptionId + ‘/resourceGroups/’ + $labResourceGroup + ‘/providers/Microsoft.DevTestLab/labs/’ + $labName)<li>Attention: You need a / in front of subscriptions. The Microsoft documentation doesn’t have the slash and therefore it won’t work.</ul><li>Assign the role to the user:<ul><li>New-AzureRmRoleAssignment -ObjectId $adObject.Id -RoleDefinitionName ‘DevTest Labs User’ -Scope $labId</ul></ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Add-a-user-to-your-lab-with-PowerShell.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Add-a-user-to-your-lab-with-PowerShell.jpg" alt="Add a user to your lab with PowerShell" /></a><p> Add a user to your lab with PowerShell</p></div><p>After you are done, the user will appear in your lab’s Active Directory. To verify it go to your Azure DevTest Labs –&gt; Configuration and policies –&gt; Access control (IAM). There, you can see the previously added user with his assigned role.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Confirm-that-the-user-has-been-added-to-your-lab.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Confirm-that-the-user-has-been-added-to-your-lab.jpg" alt="Confirm that the user has been added to your lab" /></a><p> Confirm that the user has been added to your lab</p></div><h2 id="use-lab-settings-to-set-access-rights-to-the-environment">Use lab settings to set access rights to the environment</h2><p>You can give your lab users Contributor access rights. This enables them to edit resources such as SQL Server, in the resource group that contains your lab environment. By default, lab users only have the Reader access rights. To modify the user’s rights, follow these steps:</p><ol><li>In your DevTest Labs instance, select Configuration and policies under the Settings menu.<li>On the Configuration and policies blade, select Lab settings under the Settings menu.<li>Select Contributor to give users the Contributor access rights.<li>Click Save</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Give-users-the-Contributor-or-Reader-access-rights.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Give-users-the-Contributor-or-Reader-access-rights.jpg" alt="Give users the Contributor or Reader access rights" /></a><p> Give users the Contributor or Reader access rights</p></div><h2 id="use-environments-in-a-lab">Use environments in a lab</h2><p>You can use Azure Resource Manager (ARM) templates to spin up a complete environment in DevTest labs. These environments can contain multiple VMs, or a SharePoint farm.  <span class="fontstyle0">Following infrastructure-as-code and configuration-as-code best practices, environment templates are managed in source control. Azure DevTest Labs loads all ARM templates directly from your GitHub or VSTS Git repositories. As a result, Resource Manager templates can be used across the entire release cycle, from the test environment to the production environment.</span></p><h3 id="configure-an-arm-template-repository">Configure an ARM template repository</h3><p>There are a couple of rules which you have to follow when organizing ARM templates in a repository:</p><ol><li>The master template file must be named azuredeploy.json.<li>The parameter file must be named azuredeploy.parameters.json.<li><span class="fontstyle0">You can use the parameters _artifactsLocation and _artifactsLocationSasToken to construct the parametersLink URI value, allowing DevTest Labs to automatically manage nested templates.</span><li><span class="fontstyle0">Metadata can be defined to specify the template display name and description. This metadata must be in a file named metadata.json. </span></ol><p><span class="fontstyle0">On the following example metadata file, you can see how to specify the display name and description:</span></p><p>{<br /> “itemDisplayName”: “Your template name”,<br /> “description”: “Your description”<br /> }</p><p>To add a repository to your Azure DevTest Labs using the Azure portal, follow these steps:</p><ol><li>In your DevTest Labs instance, select Configuration and policies under the Settings menu.<li>On the Configuration and policies blade, select Repositories under the External Resources menu and click +Add.<li>Enter a name, the Git clone URI, your access token and optionally a branch.<li>Enter either a folder path that starts with / and is relative to your Git clone URI or your ARM template definition.<li>Click Save.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Add-a-repository-with-templates-to-your-Azure-DevTest-Labs.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Add-a-repository-with-templates-to-your-Azure-DevTest-Labs.jpg" alt="Add a repository with templates to your Azure DevTest Labs" /></a><p> Add a repository with templates to your Azure DevTest Labs</p></div><p>After you added the Repository, you can use the templates when you add a new Resource on the Overview blade of your DevTest Labs.</p><h2 id="conclusion">Conclusion</h2><p>This post described the Azure DevTest Labs and showed what you can do with it and how it helps you to minimize the management tasks and also helps to keep your costs low. I talked about creating VMs, custom images, and formulas and how to apply policies like auto-shutdown to the resources within the lab. Furthermore, I showed how to add users to your lab and how to change their access permissions. The last topic was about setting up your own Git repository which helps you to create complete environments with a single deployment process.</p><p>For more information about the 70-532 exam get the <a href="http://amzn.to/2EWNWMF" target="_blank" rel="noopener">Exam Ref book from Microsoft</a> and continue reading my blog posts. I am covering all topics needed to pass the exam. You can find an overview of all posts related to the 70-532 exam <a href="/prepared-for-the-70-532-exam/" target="_blank" rel="noopener">here</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/cloud/'>Cloud</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/70-532/" class="post-tag no-text-decoration" >70-532</a> <a href="/tags/azure/" class="post-tag no-text-decoration" >Azure</a> <a href="/tags/certification/" class="post-tag no-text-decoration" >Certification</a> <a href="/tags/exam/" class="post-tag no-text-decoration" >Exam</a> <a href="/tags/learning/" class="post-tag no-text-decoration" >Learning</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Design and implement DevTest Labs - Programming With Wolfgang&url=https://www.programmingwithwolfgang.com/design-and-implement-devtest-labs/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Design and implement DevTest Labs - Programming With Wolfgang&u=https://www.programmingwithwolfgang.com/design-and-implement-devtest-labs/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Design and implement DevTest Labs - Programming With Wolfgang&url=https://www.programmingwithwolfgang.com/design-and-implement-devtest-labs/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.programmingwithwolfgang.com/design-and-implement-devtest-labs/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/microservice-series-from-zero-to-hero/">Microservice Series - From Zero to Hero</a><li><a href="/automatically-version-docker-container/">Automatically Version Docker Containers in Azure DevOps CI</a><li><a href="/create-nuget-azure-devops/">Create NuGet Packages in Azure DevOps Pipelines</a><li><a href="/manage-resources-kubernetes/">Manage Resources in Kubernetes</a><li><a href="/helm-getting-started/">Helm - Getting Started</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/70-532/">70-532</a> <a class="post-tag" href="/tags/certification/">Certification</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/exam/">Exam</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/net-core/">NET Core</a> <a class="post-tag" href="/tags/ci/">CI</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/design-implement-arm-vm-azure-storage/"><div class="card-body"> <span class="timeago small" > Mar 12, 2018 <i class="unloaded">2018-03-12T15:59:16+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Design and implement ARM VM Azure Storage</h3><div class="text-muted small"><p> Azure Storage provides more functionality than just attaching data disks to your VM. In this post, I will talk about creating a file storage account, how to create and access a file share using Pow...</p></div></div></a></div><div class="card"> <a href="/monitor-vms-in-azure/"><div class="card-body"> <span class="timeago small" > Mar 14, 2018 <i class="unloaded">2018-03-14T15:45:17+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Monitor VMs in Azure</h3><div class="text-muted small"><p> To monitor VMs in Azure means collecting and analyzing different metrics as well as collection log data from system log files and from applications running within the VMs. It is possible to configu...</p></div></div></a></div><div class="card"> <a href="/manage-arm-vm-availability/"><div class="card-body"> <span class="timeago small" > Mar 18, 2018 <i class="unloaded">2018-03-18T18:08:10+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Manage ARM VM Availability</h3><div class="text-muted small"><p> To guarantee high availability, your applications should run on multiple identical virtual machines so that your application is not affected when a small subset of these VMs is not available due to...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/manage-arm-vm-availability/" class="btn btn-outline-primary"><p>Manage ARM VM Availability</p></a> <a href="/implement-azure-storage-blobs-and-azure-files/" class="btn btn-outline-primary"><p>Implement Azure Storage blobs and Azure files</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//programmingwithwolfgang.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://www.programmingwithwolfgang.com/design-and-implement-devtest-labs/'; this.page.identifier = '/design-and-implement-devtest-labs/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/wolfgang_ofner">Wolfgang Ofner</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/70-532/">70 532</a> <a class="post-tag" href="/tags/certification/">Certification</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/exam/">Exam</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/net-core/">NET Core</a> <a class="post-tag" href="/tags/ci/">CI</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.programmingwithwolfgang.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
