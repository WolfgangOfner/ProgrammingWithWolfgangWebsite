<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Understanding Tag Helpers in ASP.NET Core MVC" /><meta name="author" content="Wolfgang Ofner" /><meta property="og:locale" content="en" /><meta name="description" content="Tag helpers are a new feature that has been introduced in ASP.NET Core MVC and are C# classes that transform HTML elements in a view." /><meta property="og:description" content="Tag helpers are a new feature that has been introduced in ASP.NET Core MVC and are C# classes that transform HTML elements in a view." /><link rel="canonical" href="/understanding-tag-helpers-in-asp-net-core-mvc/" /><meta property="og:url" content="/understanding-tag-helpers-in-asp-net-core-mvc/" /><meta property="og:site_name" content="Programming With Wolfgang" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-05-11T11:56:04+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Understanding Tag Helpers in ASP.NET Core MVC" /><meta name="twitter:site" content="@wolfgang_ofner" /><meta name="twitter:creator" content="@Wolfgang Ofner" /><meta name="google-site-verification" content="xxsPm-h6A0B6a0QMgqXO80PU4DbMt4Dq06p-SGzB3TU" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Wolfgang Ofner"},"dateModified":"2021-12-16T22:44:28+01:00","datePublished":"2019-05-11T11:56:04+02:00","description":"Tag helpers are a new feature that has been introduced in ASP.NET Core MVC and are C# classes that transform HTML elements in a view.","headline":"Understanding Tag Helpers in ASP.NET Core MVC","mainEntityOfPage":{"@type":"WebPage","@id":"/understanding-tag-helpers-in-asp-net-core-mvc/"},"url":"/understanding-tag-helpers-in-asp-net-core-mvc/"}</script><title>Understanding Tag Helpers in ASP.NET Core MVC | Programming With Wolfgang</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Programming With Wolfgang"><meta name="application-name" content="Programming With Wolfgang"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/author/author-wolfgang-ofner.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Programming With Wolfgang</a></div><div class="site-subtitle font-italic">Let's talk programming</div></div><div class="w-100 d-flex justify-content-center"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span></div><ul class="w-100" style="margin-top: 1em;"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="w-100" style="margin-top: 1em; text-align: center;"> <img src="/assets/img/author/mct-microsoft-certified-trainer.png" alt="MCT Microsoft Certified Trainer" width="200px" height="200px"></div><div class="w-100" style="margin-top: 1em; text-align: center;"> <img src="/assets/img/author/azure-solutions-architect-expert.png" alt="Azure Solutions Architect Expert" width="200px" height="200px"></div><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <a href="https://github.com/wolfgangofner" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/wolfgang_ofner" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/wolfgangofner" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['wolfgang','programmingwithwolfgang.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="d-sm-none row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Understanding Tag Helpers in ASP.NET Core MVC</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><div style="visibility:hidden;"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Understanding Tag Helpers in ASP.NET Core MVC</h1><div class="post-meta text-muted d-flex flex-column"><div> <span> Posted <em class="" data-ts="1557568564" data-df="ll" data-toggle="tooltip" data-placement="bottom"> May 11, 2019 </em> </span> <span> Updated <em class="" data-ts="1639691068" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Dec 16, 2021 </em> </span> by <span class="author"> By <em> Wolfgang Ofner </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2327 words"> <em>27 min</em></span> read</div></div><div class="post-content"><p>Tag helpers are a new feature that has been introduced in ASP.NET Core MVC and are C# classes that transform HTML elements in a view. Common uses for tag helpers include URLs for forms using the application’s routing configuration, ensuring that elements of a specific type are styled consistently, and replacing custom shorthand elements with commonly used fragments of content.</p><p>You can find the source code for the following on <a href="https://github.com/WolfgangOfner/MVC-Tag-Helper" target="_blank" rel="noopener noreferrer">GitHub</a>.</p><h2 id="creating-tag-helpers"><span class="mr-2">Creating Tag Helpers</span><a href="#creating-tag-helpers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Tag helpers can be used to apply certain CSS classes to HTML. For example you could create a tag helper that transforms an element from <span class="fontstyle0">&lt;button type=”submit” <strong>bs-button-color=”danger”</strong>&gt;Add&lt;/button&gt;</span> to <span class="fontstyle0">&lt;button type=”submit” <strong>class=”btn btn-danger”</strong>&gt;Add&lt;/button&gt;. The tag helper will recognize the bs-button-color attribute and use its value to set the class attribute on the element sent to the browser. This example might not look very useful, but it provides a foundation for explaining how tag helpers work.</span></p><h3 id="defining-the-tag-helper-class"><span class="mr-2">Defining the Tag Helper class</span><a href="#defining-the-tag-helper-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Tag helpers can be defined anywhere in the project, but it helps to keep them together because they need to be registered before they can be used. I usually create the tag helpers under Infrastructure/TagHelpers.</p><p>Tag helpers are derived from the TagHelper class, which is defined in the Microsoft.AspNetCore.Razor.TagHelpers namespace.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2019/05/Creating-a-Tag-Helper-to-transform-a-button.jpg"><img loading="lazy" data-src="/assets/img/posts/2019/05/Creating-a-Tag-Helper-to-transform-a-button.jpg" alt="Creating a Tag Helper to transform a button" data-proofer-ignore></a><p> Creating a Tag Helper to transform a button</p></div><p>The TagHelper class defines a Process method, which is overridden by subclasses to implement the behavior that transforms elements. The name of the tag helper combines the name of the element it transforms followed by TagHelper. The scope of a tag helper can be broadened or narrowed using attributes, which I will describe later in this post.</p><p>Asynchronous tag helpers can be created by overriding the ProcessAsync method instead of the Process method, but this isn’t required for most helpers, which tend to make small and focused changes to HTML elements. The default implementation of ProcessAsync calls the Process method anyway.</p><h3 id="receiving-context-data"><span class="mr-2">Receiving Context Data</span><a href="#receiving-context-data" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Tag helpers receive information about the element they are transforming through an instance of the TagHelperContext class, which is received as an argument to the Process method and which defines the following properties:</p><div class="table-responsive"><div class="table-wrapper"><table class="table table-striped table-bordered table-hover"><tr><td> Name<td> Description<tr><td> AllAttributes<td> This property returns a read-only dictionary of the attributes applied to the element being transformed, indexed by name and by index.<tr><td> Items<td> This property returns a dictionary that is used to coordinate between tag helpers.<tr><td> UniqueId<td> This property returns a unique identifier for the element being transformed.</table></div></div><p>Although you can access details of the element’s attributes through the AllAttributes dictionary, a more convenient approach is to define a property whose name corresponds on the attribute you are interested in, like in the example above: public string BsButtonColor { get; set; }.</p><p>When a tag helper is being used, MVC inspects the properties it defines and sets the value of any whose name matches attributes applied to the HTML element. As part of this process, MVC will try to convert an attribute value to match the type of the C# property so that bool properties can be used to receive true and false attribute values and int properties can be used to receive numeric attribute values such as 1 and 2.</p><p>The name of the attribute is automatically converted from the default HTML style, bs-button-color to the C# style BsButtonColor. You can use any attribute prefix except asp- and data-. Properties for which there are no corresponding HTML element attributes are not set, which means you should check to ensure that you are not dealing with null or default values. Using the HTML attribute name for tag helper properties doesn’t always lead to readable or understandable classes. You can break the link between the name of the property and the attribute it represents using the HtmlAttributeName attribute, which can be used to specify the HTML attribute that the property will represent.</p><h3 id="what-happened-to-html-helpers"><span class="mr-2">What happened to HTML Helpers?</span><a href="#what-happened-to-html-helpers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>HTML helpers were methods accessed through Razor expressions that begin with @Html, for example. @Html.TextBoxFor(m =&gt; m.Name) would create a textbox for the name property. The problem with HTML helper expressions is that they don’t fit with the structure of HTML elements, which leads to awkward expressions, especially when adding CSS, for example. @Html.TextBoxFor(m =&gt; m.Name, new { @class = “form-control” }). Attributes have to be expressed in a dynamic object and have to be prefixed with @ if they are reserved C# words, like class. As the HTML elements that are required become more complex, the HTML helper expression becomes more awkward. Tag helpers remove this awkwardness, for example, &lt;input class=”form-control” asp-for=”Population” /&gt;.</p><p>The result is a more natural fit with the nature of HTML and produces views that are easier to read and understand. MVC still supports HTML helpers, so you can use them for backward compatibility in views originally developed for MVC 5, but new views should take advantage of the more natural approach that tag helpers provide.</p><h3 id="producing-output"><span class="mr-2">Producing Output</span><a href="#producing-output" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The Process method transforms an element by configuring the TagHelperOutput object that is received as an argument. The TagHelperOutput starts out describing the HTML element as it appears in the Razor view and is modified through the following properties:</p><div class="table-responsive"><div class="table-wrapper"><table class="table table-striped table-bordered table-hover"><tr><td> Name<td> Description<tr><td> Attributes<td> This property returns a dictionary containing the attributes for the output element.<tr><td> Content<td> This property returns a TagHelperContent object that is used to set the content of the element.<tr><td> TagName<td> This property is used to get or set the tag name for the output element.<tr><td> PreElement<td> This property returns a TagHelperContext object that is used to insert content in the view before the output element.<tr><td> PostElement<td> This property returns a TagHelperContext object that is used to insert content in the view after the output element.<tr><td> PreContent<td> This property returns a TagHelperContext object that is used to insert content before the output element’s content.<tr><td> PostContent<td> This property returns a TagHelperContext object that is used to insert content after the output element’s content.<tr><td> TagMode<td> This property specifies how the output element will be written, using a value from the TagMode enumeration.<tr><td> SupressOuput()<td> Calling this method excludes an element from the view.</table></div></div><h3 id="registering-tag-helpers"><span class="mr-2"> Registering Tag Helpers</span><a href="#registering-tag-helpers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Tag helper classes can be used only after they have been registered using the Razor @addTagHelper expression. The set of views to which a tag helper will be applied depends on where the @addTagHelper expression is used. For a single view, the expression appears in the view itself. For a subset of views in an application, the expression appears in a _ViewImport.cshtml file in the folder that contains the views or a parent folder.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2019/05/Register-the-Tag-Helper.jpg"><img loading="lazy" data-src="/assets/img/posts/2019/05/Register-the-Tag-Helper.jpg" alt="Register the Tag Helper" data-proofer-ignore></a><p> Register the Tag Helper</p></div><p>The first part of the argument specifies the name of the tag helper classes, with support for wildcards. The second part specifies the name if the assembly in which they are defined.</p><h3 id="using-a-tag-helper"><span class="mr-2">Using a Tag Helper</span><a href="#using-a-tag-helper" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The last step is to use the tag helper in the view, so it can transform the element.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2019/05/Using-a-Tag-Helper.jpg"><img loading="lazy" data-src="/assets/img/posts/2019/05/Using-a-Tag-Helper.jpg" alt="Using a Tag Helper" data-proofer-ignore></a><p> Using a Tag Helper</p></div><p>If you start the application and click on create, you will see the red Add button.</p><p><a href="/assets/img/posts/2019/05/The-button-was-rendered-using-the-Tag-Helper.jpg"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 149 58'%3E%3C/svg%3E" loading="lazy" width="149" height="58" class="size-full wp-image-1735" data-src="/assets/img/posts/2019/05/The-button-was-rendered-using-the-Tag-Helper.jpg" alt="&quot;&quot;Index&lt;/a&gt;" data-proofer-ignore></a></p><p>Broadening the scope of a tag helper means you don’t have to create tag helpers that repeat the same operation on different element types. Some care is required because it is easy to create a tag helper that will start matching elements too broadly in the future as the contents of the views in the application evolve. A more balanced approach is to apply the HtmlTargetElement attribute multiple times, specifying the complete set of elements that will be transformed as a combination of narrowly defined matches.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2019/05/Add-multiple-HtmlTargetElement-attributes.jpg"><img loading="lazy" data-src="/assets/img/posts/2019/05/Add-multiple-HtmlTargetElement-attributes.jpg" alt="Add multiple HtmlTargetElement attributes" data-proofer-ignore></a><p> Add multiple HtmlTargetElement attributes</p></div><h4 id="ordering-tag-helper-execution"><span class="mr-2">Ordering Tag Helper Execution</span><a href="#ordering-tag-helper-execution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>As a general rule, it is a good idea to use only one tag helper on any given HTML element. That’s because it is easy to create a situation where one tag helper tramples on the transformation applied by another, overwriting attributes values or content. If you do need to apply multiple tag helpers, then you can control the sequence in which they execute by setting the Order property, which is inherited from the TagHelper base class. Managing the sequence can help minimize the conflicts between tag helpers, although it is still easy to encounter problems.</p><h2 id="advanced-tag-helper-features"><span class="mr-2">Advanced Tag Helper Features</span><a href="#advanced-tag-helper-features" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In the following sections, I will show you some neat advanced features to get the best out of tag helpers.</p><h3 id="creating-shorthand-elements"><span class="mr-2">Creating Shorthand Elements</span><a href="#creating-shorthand-elements" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Tag helpers are not restricted to transforming the standard HTML elements and can also be used to replace custom elements with commonly used content. This can be a useful feature for making views more concise and making their intent more obvious.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2019/05/Adding-your-own-HTML-element.jpg"><img loading="lazy" data-src="/assets/img/posts/2019/05/Adding-your-own-HTML-element.jpg" alt="Adding your own HTML element" data-proofer-ignore></a><p> Adding your own HTML element</p></div><p>The WolfgangsButton element isn’t part of the HTML specification and won’t be understood by browsers. Instead, I am going to use this element as a shorthand for generating the button elements that the form requires.</p><p>When dealing with custom elements that are not part of the HTML specification, you must apply the HtmlTargetElement attribute and specify the element name. The convention of applying tag helpers to elements based on the class name works only for standard element names.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2019/05/The-new-Tag-Helper-to-transform-WolfgangsButton.jpg"><img loading="lazy" data-src="/assets/img/posts/2019/05/The-new-Tag-Helper-to-transform-WolfgangsButton.jpg" alt="The new Tag Helper to transform WolfgangsButton" data-proofer-ignore></a><p> The new Tag Helper to transform WolfgangsButton</p></div><p>The Process method uses the properties of the TagHelperOutput object to generate a completely different element: the TagName property is used to specify a button element, the TagMode property is used to specify that the element is written using start and end tags, the Attributes. SetAttribute method is used to define a class attribute with Bootstrap styles, and the Content property is used to set the element content.</p><p>Note that I set the type attribute on the screenshot above. This is because any attribute for which there is a property defined by a tag helper is omitted from the output element. This is usually a good idea because it stops the attributes used to configure tag helpers from appearing in the HTML sent to the browser. However, in this case, I used the type attribute to configure the tag helper, and want it to be present in the output element as well.</p><p>Setting the TagName property is important because the output element is written in the same style as the custom element by default. Since I want the output element to contain content, I have to explicitly specify the TagMode.StartTagEndTag enum value so that separate start and end tags are used. The Content property returns an instance of the TagHelperContent class, which is used to set the content of elements. The following table describes the most important TagHelperContent methods:</p><div class="table-responsive"><div class="table-wrapper"><table class="table table-striped table-bordered table-hover"><tr><td> Name<td> Description<tr><td> SetContent(text)<td> This method sets the content of the output element. The string argument is encoded so that it is safe for inclusion in an HTML element.<tr><td> SetHtmlContent(html)<td> This method sets the content of the output element. The string argument is assumed to be safely encoded. Use with caution.<tr><td> Append(text)<td> This method safely encodes the specified string and adds it to the content of the output element.<tr><td> AppendHtml(html)<td> This method adds the specified string to the content of the output element without performing any encoding. Use with caution.<tr><td> Clear()<td> This method removes the content of the output element.</table></div></div><h2 id="prepending-and-appending-content-and-elements-with-tag-helpers"><span class="mr-2">Prepending and Appending Content and Elements with Tag Helpers</span><a href="#prepending-and-appending-content-and-elements-with-tag-helpers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The TagHelperOutput class provides four properties that make it easy to inject new content into a view so that it surrounds an element or the element’s content.</p><div class="table-responsive"><div class="table-wrapper"><table class="table table-striped table-bordered table-hover"><tr><td> Name<td> Description<tr><td> PreElement<td> This property is used to insert elements into the view before the target element.<tr><td> PostElement<td> This property is used to insert elements into the view after the target element.<tr><td> PreContent<td> This property is used to insert content into the target element, before any existing content.<tr><td> PostContent<td> This property is used to insert content into the target element, after any existing content</table></div></div><p>Inserting Content around the Output Element</p><p>The first TagHelperOutput properties are PreElement and PostElement, which are used to insert elements into the view before and after the output element.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2019/05/The-content-wrapper-implementation.jpg"><img loading="lazy" data-src="/assets/img/posts/2019/05/The-content-wrapper-implementation.jpg" alt="The content wrapper implementation" data-proofer-ignore></a><p> The content wrapper implementation</p></div><p>This tag helper transforms div elements that have a title attribute, and it works by using the PreElement and PostElement to add a header and a footer element that will surround the output element. When generating new HTML elements, you can use C# string formatting to create the content you require, but this is an awkward and error-prone process for all but the simplest elements. A more robust approach is to use the TagBuilder class, which is defined in the Microsoft.AspNetCore.Mvc.Rendering namespace and allows elements to be created in a more structured manner. The TagHelperContent class defines methods that accept TagBuilder objects, which makes it easy to create HTML content in tag helpers.</p><p>This tag helper uses the TagBuilder class to create an h1 element that is contained in a div element that has been styled with Bootstrap classes. There are optional bool include-header and include-footer attributes used to specify where the content is injected, and the default is to add elements before and after the output element.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2019/05/Adding-surrounding-content.jpg"><img loading="lazy" data-src="/assets/img/posts/2019/05/Adding-surrounding-content.jpg" alt="Adding surrounding content" data-proofer-ignore></a><p> Adding surrounding content</p></div><p>Next, I add a div tag around the RenderBody method.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2019/05/Preparing-the-RenderBody-tag-to-render-my-element-before-and-after-it.jpg"><img loading="lazy" data-src="/assets/img/posts/2019/05/Preparing-the-RenderBody-tag-to-render-my-element-before-and-after-it.jpg" alt="Preparing the RenderBody tag to render my element before and after it" data-proofer-ignore></a><p> Preparing the RenderBody tag to render my element before and after it</p></div><h2 id="inserting-content-inside-the-output-element-with-tag-helpers"><span class="mr-2">Inserting Content inside the Output Element with Tag Helpers</span><a href="#inserting-content-inside-the-output-element-with-tag-helpers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The PreContent and PostContent properties are used to insert content inside the output element, surrounding the original contents.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2019/05/Tag-Helper-to-insert-content-inside-of-an-element.jpg"><img loading="lazy" data-src="/assets/img/posts/2019/05/Tag-Helper-to-insert-content-inside-of-an-element.jpg" alt="Tag Helper to insert content inside of an element" data-proofer-ignore></a><p> Tag Helper to insert content inside of an element</p></div><p>This tag helper operates on the td elements with the wrap attribute and inserts b and i elements around the output element’s content. If you run the application, you will see that the first column of cells in the table that lists the Country objects is shown in bold and italic.</p><h2 id="conclusion"><span class="mr-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In this post, I showed how to transform HTML elements according to your desires using tag helpers. Then I talked about creating your own elements and also transforming then. Lastly, I added content around and inside elements. There are even more interesting topics about tag helpers like dependency injection or working with view models.</p><p>For more details about the configuring ASP.NET Core, I highly recommend the book “<a href="https://www.amazon.com/Pro-ASP-NET-Core-MVC-2/dp/148423149X" target="_blank" rel="noopener noreferrer">Pro ASP.NET Core MVC 2</a>“. You can find the source code for this demo on <a href="https://github.com/WolfgangOfner/MVC-Tag-Helper" target="_blank" rel="noopener noreferrer">GitHub</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/asp-net/'>ASP.NET</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/net-core/" class="post-tag no-text-decoration" >.NET Core</a> <a href="/tags/asp-net-core-mvc/" class="post-tag no-text-decoration" >ASP.NET Core MVC</a> <a href="/tags/c/" class="post-tag no-text-decoration" >C#</a> <a href="/tags/tag-helper/" class="post-tag no-text-decoration" >Tag Helper</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Understanding+Tag+Helpers+in+ASP.NET+Core+MVC+-+Programming+With+Wolfgang&url=%2Funderstanding-tag-helpers-in-asp-net-core-mvc%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Understanding+Tag+Helpers+in+ASP.NET+Core+MVC+-+Programming+With+Wolfgang&u=%2Funderstanding-tag-helpers-in-asp-net-core-mvc%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Understanding+Tag+Helpers+in+ASP.NET+Core+MVC+-+Programming+With+Wolfgang&url=%2Funderstanding-tag-helpers-in-asp-net-core-mvc%2F" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=%2Funderstanding-tag-helpers-in-asp-net-core-mvc%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/deploy-kubernetes-using-helm/">Deploy to Kubernetes using Helm Charts</a><li><a href="/cqrs-in-asp-net-core-3-1/">CQRS in ASP .NET Core 3.1</a><li><a href="/mediator-pattern-in-asp-net-core-3-1/">Mediator Pattern in ASP .NET Core 3.1</a><li><a href="/rabbitmq-in-an-asp-net-core-3-1-microservice/">RabbitMQ in an ASP .NET Core 3.1 Microservice</a><li><a href="/dockerize-an-asp-net-core-microservice-and-rabbitmq/">Dockerize an ASP .NET Core Microservice and RabbitMQ</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/aks/">AKS</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/helm/">Helm</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/yaml/">YAML</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/getting-to-know-the-startup-class-of-asp-net-core-mvc/"><div class="card-body"> <em class="small" data-ts="1556529353" data-df="ll" > Apr 29, 2019 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Getting to know the Startup Class of ASP.NET Core MVC</h3><div class="text-muted small"><p> Every .NET Core web application has a Program class with a static Main method. The Startup class of .NET core is the new version of the Global.asax file. This class is responsible for starting the...</p></div></div></a></div><div class="card"> <a href="/middleware-in-asp-net-core-mvc/"><div class="card-body"> <em class="small" data-ts="1556702231" data-df="ll" > May 1, 2019 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Middleware in ASP.NET Core MVC</h3><div class="text-muted small"><p> Middleware is the term used for the components that are combined to form the request pipeline. This pipeline is arranged like a chain. The request is either returned by the middleware or passed to ...</p></div></div></a></div><div class="card"> <a href="/configure-asp-net-core-mvc/"><div class="card-body"> <em class="small" data-ts="1556875060" data-df="ll" > May 3, 2019 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Configure ASP.NET Core MVC</h3><div class="text-muted small"><p> Some configurations like the connection string usually change on every environment your application is running on. Instead of hard-coding this information into your application, ASP.NET Core enable...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/view-components-in-asp-net-core-mvc/" class="btn btn-outline-primary" prompt="Older"><p>View Components in ASP.NET Core MVC</p></a> <a href="/asp-net-core-logging-to-a-database-with-nlog/" class="btn btn-outline-primary" prompt="Newer"><p>ASP.NET Core logging to a database with NLog</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = '/understanding-tag-helpers-in-asp-net-core-mvc/'; this.page.identifier = '/understanding-tag-helpers-in-asp-net-core-mvc/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://programmingwithwolfgang.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/aks/">AKS</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/helm/">Helm</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/yaml/">YAML</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-112077092-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-112077092-1'); }); </script>
