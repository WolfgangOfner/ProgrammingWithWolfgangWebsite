<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Controllers and Actions" /><meta name="author" content="Wolfgang Ofner" /><meta property="og:locale" content="en_US" /><meta name="description" content="In this post, I want to talk about how controllers and actions interact with each other and present several built-in functions. The MVC Framework is endlessly customizable and extensible. As a result, it is possible to implement your own controller which I will shortly talk about and show how to do that." /><meta property="og:description" content="In this post, I want to talk about how controllers and actions interact with each other and present several built-in functions. The MVC Framework is endlessly customizable and extensible. As a result, it is possible to implement your own controller which I will shortly talk about and show how to do that." /><link rel="canonical" href="https://www.programmingwithwolfgang.com/controllers-and-actions/" /><meta property="og:url" content="https://www.programmingwithwolfgang.com/controllers-and-actions/" /><meta property="og:site_name" content="Programming With Wolfgang" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-01-15T16:52:28+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Controllers and Actions" /><meta name="twitter:site" content="@wolfgang_ofner" /><meta name="twitter:creator" content="@Wolfgang Ofner" /><meta name="google-site-verification" content="xxsPm-h6A0B6a0QMgqXO80PU4DbMt4Dq06p-SGzB3TU" /> <script type="application/ld+json"> {"datePublished":"2018-01-15T16:52:28+01:00","dateModified":"2021-05-19T22:25:07+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.programmingwithwolfgang.com/controllers-and-actions/"},"@type":"BlogPosting","description":"In this post, I want to talk about how controllers and actions interact with each other and present several built-in functions. The MVC Framework is endlessly customizable and extensible. As a result, it is possible to implement your own controller which I will shortly talk about and show how to do that.","author":{"@type":"Person","name":"Wolfgang Ofner"},"url":"https://www.programmingwithwolfgang.com/controllers-and-actions/","headline":"Controllers and Actions","@context":"https://schema.org"}</script><title>Controllers and Actions | Programming With Wolfgang</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-112077092-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-112077092-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/author/author-wolfgang-ofner.jpg" alt="author wolfgang ofner" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Programming With Wolfgang</a></div><div class="site-subtitle font-italic">Let's talk programming</div></div><div class="w-100 d-flex justify-content-center"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span></div><ul class="w-100" style="margin-top: 1em;"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/wolfgangofner" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/wolfgang_ofner" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/wolfgangofner" aria-label="linkedin" class="order-5" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['wolfgang','programmingwithwolfgang.com'].join('@')" aria-label="email" class="order-6" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-7" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="d-sm-none row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Controllers and Actions</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Controllers and Actions</div><div style="visibility:hidden;"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel">Cancel</span></div></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Controllers and Actions</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Jan 15, 2018, 4:52 PM +0100" > Jan 15, 2018 <i class="unloaded">2018-01-15T16:52:28+01:00</i> </span> by <span class="author"> Wolfgang Ofner </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, May 19, 2021, 10:25 PM +0200" > May 19 <i class="unloaded">2021-05-19T22:25:07+02:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1984 words">23 min</span></div></div><div class="post-content"><p><span class="fontstyle0">In this post, I want to talk about how controllers and actions interact with each other and present several built-in functions.  The MVC Framework is endlessly customizable and extensible. As a result, it is possible to implement your own controller which I will shortly talk about and show how to do that.</span></p><h2 id="setting-up-the-project">Setting up the project</h2><p>I created a new ASP.NET MVC project with the empty template and add folders and core references for MVC.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Set-up-project.jpg">&lt;img loading="lazy"title="Set up the ASP.NET MVC project for Actions and Controller" src="/assets/img/posts/2018/01/Set-up-project.jpg" alt="Set up the ASP.NET MVC project for Actions and Controller" /&gt;</a><p> Set up the ASP.NET MVC project</p></div><p>Throughout this post, I will only use the default route. This post describes the basics of controllers and actions but I will not explain every single simple step. Therefore it is expected that you know at least how to create a controller and how to call its Index action.</p><h2 id="passing-data-to-an-action">Passing data to an action</h2><p>Following I will show several options, how to pass data to the action. First I start with the simplest way to call an action though. The easiest way to call an action is by entering an URL which is mapped to a route and redirected to the fitting action.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Simple-Action.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Simple-Action.jpg" alt="Simple Action" /></a><p> Simple Action</p></div><p>The Index action does nothing except returning a view to the user’s browser. Therefore it does not take or process any data.</p><h3 id="passing-data-to-the-parameter">Passing data to the parameter</h3><p>A simple way to pass data to an action is by using a parameter for the action. The parameter will be added at the end of the URL.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Action-with-int-parameter.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Action-with-int-parameter.jpg" alt="Action with int parameter" /></a><p> Action with int parameter</p></div><p>As you can see, I used int as the data type for the parameter. If the user enters a parameter which can not be converted to an int, ASP.NET MVC throws an exception and displays the yellow screen of death. To prevent this exception, it is possible to set a default parameter. If the framework can’t convert the parameter provided by the user, the default parameter is used.</p><p>Using a parameter to pass data to a method makes it also way easier to unit test.</p><p>It is also interesting to note that parameter can’t have out or ref parameter. It wouldn’t make any sense though and therefore ASP.NET MVC would throw an exception.</p><h3 id="passing-multiple-parameters-to-the-action">Passing multiple parameters to the action</h3><p>There are two options on how to pass multiple parameters to an action. The first option is to use the catchall variable in the route. To do that, you have to configure the route first, as shown in the following screenshot.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Catchall-route.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Catchall-route.jpg" alt="Catchall route" width="573" height="105" /></a><p> Catchall route</p></div><p>After setting up the route, you can use the catchall variable as the parameter and add as many variables as you want to it. The variables are all passed as one string and have to be parsed. The following screenshot shows one id and three variables in the catchall are passed to the method.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Catchall-action-1.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Catchall-action-1.jpg" alt="Catchall action" width="713" height="119" /></a><p> Catchall action</p></div><p>The second way is to use multiple parameters. This method is used to pass data from a form to the action.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Action-with-multiple-parameter.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Action-with-multiple-parameter.jpg" alt="Action with multiple parameter" width="546" height="116" /></a><p> Action with multiple parameter</p></div><h3 id="retrieving-data-within-an-action">Retrieving data within an action</h3><p>Besides parameter, there are several other sources from where you can receive data. These data sources can be:</p><ul><li>Request<li>User<li>Server<li>HttpContext<li>RouteData</ul><p>I would suggest to type these classes into your action and look through the options provided by the intellisense. On the following screenshot, I show some of these options.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Action-with-different-sources-to-get-some-data.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Action-with-different-sources-to-get-some-data.jpg" alt="Action with different sources to get some data" /></a><p> Action with different sources to get some data</p></div><h2 id="actionresult-types">ActionResult types</h2><p>Action results help to make the code easier and cleaner and also make unit testing easier. The ActionResult class is an abstract class which can be used. But there are also a whole bunch of derived classes which can be used to increase the readability of the action. If you are familiar with the command patter, you will recognize it here. ActionResults pass around objects that describe the operations which are performed.</p><p>As I just mentioned, there is a whole list of action results. Following I will present some of them.</p><h3 id="returning-a-view">Returning a view</h3><p>Returning a view is the easiest way to present an HTML page to the user. Using ActionResult as return type works and compiles. Though I prefer using ViewResult for views because it tells me faster what the actual return type is. There are different overloaded versions of View().</p><h4 id="view-without-parameter">View without parameter</h4><p>The simplest is without a parameter. When using this version, the MVC framework searches for a view with the same name as the action.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/View-without-parameter.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/View-without-parameter.jpg" alt="View without parameter" /></a><p> View without parameter</p></div><p>The framework searches in the following locations:</p><ul><li><span class="fontstyle2">/Areas/</span><span class="fontstyle4"><AreaName>&lt;/span&gt;<span class="fontstyle2">/Views</span><span class="fontstyle4">/<ControllerName>&lt;/span&gt;<span class="fontstyle2">/</span><span class="fontstyle4"><ViewName>&lt;/span&gt;<span class="fontstyle2">.aspx</span></ViewName></span></ControllerName></span></AreaName></span><li>/Views/<ControllerName>/<ViewName>.aspx</ViewName></ControllerName><li><span class="fontstyle2">/</span><span class="fontstyle2">Areas/</span><span class="fontstyle4"><AreaName>&lt;/span&gt;<span class="fontstyle2">/Views/</span><span class="fontstyle4"><ControllerName>&lt;/span&gt;<span class="fontstyle2">/</span><span class="fontstyle4"><ViewName>&lt;/span&gt;<span class="fontstyle2">.ascx</span></ViewName></span></ControllerName></span></AreaName></span><li><span class="fontstyle2">/Views/<ControllerName>/<ViewName>.ascx&lt;/span&gt;</ViewName></ControllerName></span><li><span class="fontstyle2">/Areas/</span><span class="fontstyle4"><AreaName>&lt;/span&gt;<span class="fontstyle2">/Views/Shared/</span><span class="fontstyle4"><ViewName>&lt;/span&gt;<span class="fontstyle2">.aspx</span></ViewName></span></AreaName></span><li><span class="fontstyle2">/Views/Shared/<span class="fontstyle4"><ViewName>&lt;/span&gt;.aspx&lt;/span&gt;</ViewName></span></span><li><span class="fontstyle2">/</span><span class="fontstyle2">Areas/</span><span class="fontstyle4"><AreaName>&lt;/span&gt;<span class="fontstyle2">/Views/Shared/</span><span class="fontstyle4"><ViewName>&lt;/span&gt;<span class="fontstyle2">.ascx</span></ViewName></span></AreaName></span><li><span class="fontstyle2">/Views/Shared/<span class="fontstyle4"><ViewName>&lt;/span&gt;.ascx&lt;/span&gt;</ViewName></span></span><li><span class="fontstyle2">/Areas/</span><span class="fontstyle4"><AreaName>&lt;/span&gt;<span class="fontstyle2">/Views/</span><span class="fontstyle4"><ControllerName>&lt;/span&gt;<span class="fontstyle2">/</span><span class="fontstyle4"><ViewName>&lt;/span&gt;<span class="fontstyle2">.cshtml</span></ViewName></span></ControllerName></span></AreaName></span><li><span class="fontstyle2">/Views/<span class="fontstyle4"><ControllerName>&lt;/span&gt;/<span class="fontstyle4"><ViewName>&lt;/span&gt;.cshtml&lt;/span&gt;</ViewName></span></ControllerName></span></span><li><span class="fontstyle2">/Areas/</span><span class="fontstyle4"><AreaName>&lt;/span&gt;<span class="fontstyle2">/Views/</span><span class="fontstyle4"><ControllerName>&lt;/span&gt;<span class="fontstyle2">/</span><span class="fontstyle4"><ViewName>&lt;/span&gt;<span class="fontstyle2">.vbhtml</span></ViewName></span></ControllerName></span></AreaName></span><li><span class="fontstyle2">/Views/<span class="fontstyle4"><ControllerName>&lt;/span&gt;/<span class="fontstyle4"><ViewName>&lt;/span&gt;.vbhtml&lt;/span&gt;</ViewName></span></ControllerName></span></span><li><span class="fontstyle2">/Areas/</span><span class="fontstyle4"><AreaName>&lt;/span&gt;<span class="fontstyle2">/Views/Shared/<ViewName>.cshtml&lt;/span&gt;</ViewName></span></AreaName></span><li><span class="fontstyle2">/Views/Shared/<span class="fontstyle4"><ViewName>&lt;/span&gt;.cshtml&lt;/span&gt;</ViewName></span></span><li><span class="fontstyle2">/Areas/</span><span class="fontstyle4"><AreaName>&lt;/span&gt;<span class="fontstyle2">/Views/Shared/</span><span class="fontstyle4"><ViewName>&lt;/span&gt;<span class="fontstyle2">.vbhtm</span></ViewName></span></AreaName></span><li><span class="fontstyle2">/Views/Shared/<span class="fontstyle4"><ViewName>&lt;/span&gt;.vbhtml&lt;/span&gt;</ViewName></span></span></ul><p>The MVC framework also searches for ASPX views, C# and Visual Basic .NET Razor templates. This behavior guarantees backward compatibility with earlier versions of the MVC framework</p><p><span class="fontstyle0">If the file is found in one of the locations, it is returned and the search stops. If no file is found, a yellow screen of death is shown with some information which locations where searched.</span></p><h4 id="view-with-name-parameter">View with name parameter</h4><p>By default, the framework searches for a view with the same name as the action. If you want to return a view from the same controller but with a different name, you have to pass the name as the parameter in the view.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/View-with-view-name.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/View-with-view-name.jpg" alt="View with view name" /></a><p> View with view name</p></div><h4 id="view-with-path">View with path</h4><p>Sometimes the view you want to return is in a different directory. Then you can pass the path to the view as the parameter. Note: Don’t forget the tilde at the beginning of the path. Otherwise, you won’t get the expected view.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/View-with-path.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/View-with-path.jpg" alt="View with path" /></a><p> View with path</p></div><p>It is very uncommon to use this feature and it is a hint that your design might not be optimal.</p><h4 id="view-with-aview-model">View with a view model</h4><p>All versions of the view which I showed above also have the option to pass a view model. To pass the view model to the view, simply add it as a parameter. On the following screenshot, I pass the path to the view and the view model (which in this case is just a string).</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/View-with-path-and-view-model.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/View-with-path-and-view-model.jpg" alt="View with path and view model" /></a><p> View with path and view model</p></div><p>When you use only a view model which is a string, the ASP.NET MVC framework thinks that it is the name of the view you want to return. To tell the framework that it is a model, you have to prefix the model with the model: keyword.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/View-with-model-keyword.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/View-with-model-keyword.jpg" alt="View with model keyword" /></a><p> View with model keyword</p></div><h3 id="passing-data-with-a-view-model">Passing data with a view model</h3><p>Previously I showed how to pass a model to the view. Now there are two different ways to use this view model in the view.  Either you cast the model to its data type and then use it inline, for example, @(((DateTime)Model).ToLocalTime()) or you can declare the model and its data type and then use it like a normal C# variable.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/View-with-view-model.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/View-with-view-model.jpg" alt="View with view model" /></a><p> View with view model</p></div><p>Casting the object works but it makes the view pretty messy. Therefore I recommend using strongly typed views. It is important to note that when declaring the model it starts with a lower case and when using it, it starts with an upper case.</p><h3 id="passing-data-with-view-bag">Passing data with view bag</h3><p>Another way to pass data to a view is with the view bag. The difference between the view bag and the data model is that the view bag is a dynamic object. The view bag doesn’t have to be passed to the view but can be used in the view like the view model.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Adding-data-into-the-view-bag.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Adding-data-into-the-view-bag.jpg" alt="Adding data into the view bag" /></a><p> Adding data into the view bag</p></div><p>Due to its dynamic behavior, I don’t have to declare the view bag variable before using it. I can simply assign my data to it.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/View-with-view-bag.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/View-with-view-bag.jpg" alt="View with view bag" /></a><p> View with view bag</p></div><h3 id="passing-data-with-temp-data">Passing data with temp data</h3><p>Temp data works like the view bag with one difference. After reading the data from temp data, the values get marked for deletion. The usage is similar to the usage of a session.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Assigning-values-to-temp-data.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Assigning-values-to-temp-data.jpg" alt="Assigning values to temp data" /></a><p> Assigning values to temp data</p></div><p>If the value is a primitive data type, it can be used like the session. If it is an object, you have to cast it.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Using-temp-data-in-a-view.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Using-temp-data-in-a-view.jpg" alt="Using temp data in a view" /></a><p> Using temp data in a view</p></div><h4 id="keeping-data">Keeping data</h4><p>There are three different ways to store the values from temp data:</p><ul><li>Assign it to the view bag<li>Assign it to a variable<li>Use Peek() or Keep()</ul><p>Peek returns the value without marking it for deletion. Keep marks the value to keep it after it was accessed. When the value is accessed a second time, it gets marked for removal if you don’t use Keep again.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Ways-to-store-data-from-temp-data.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Ways-to-store-data-from-temp-data.jpg" alt="Ways to store data from temp data" /></a><p> Ways to store data from temp data</p></div><h4 id="returning-an-http-status-code">Returning an HTTP status code</h4><p>ASP.NET MVC hat to built-in classes for returning an HTTP status code</p><ul><li>HttpNotFoundResult<li>HttpUnauthorizedResult</ul><p>Additionally, you can return every HTTP status code you want with HttpStatusCodeResult. Pass the status code and a message as parameter. HttpNotFoundResult has a short form, HttpNotFound. The return value for a status code is HttpStatusCodeResult.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Working-with-HttpStatusCode.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Working-with-HttpStatusCode.jpg" alt="Working with HttpStatusCode" /></a><p> Working with HttpStatusCode</p></div><h3 id="more-results">More results</h3><p>Additionally, to the action results, I just presented there are some more like:</p><ul><li>PartialViewResult<li>FileResult<li>JsonResult<li>JavaScriptResult<li>EmptyResult</ul><p>The names are speaking for themselves. Therefore I won’t go into more detail about them.</p><h2 id="performing-redirects">Performing redirects</h2><p>A common performance of an action is to redirect the user to another URL. Often this URL is another action which generates an output for the user.</p><h4 id="the-post--redirect--get-pattern">The Post / Redirect / Get pattern</h4><p>The <a href="https://en.wikipedia.org/wiki/Post/Redirect/Get" target="_blank" rel="noopener">Post / Redirect / Get pattern</a> helps to avoid the problem of resubmitting a form for the second time which could cause unexpected results. This problem can occur when you return HTML after processing a POST and the user clicks the reload button of his browser which results in resubmitting his form.</p><p>With the Post / Redirect / get pattern the POST request is processed and then the browser gets redirected to another URL. The redirect generates a GET request. Since GET requests don’t (shouldn’t) modify the state of the application, any resubmission of the request won’t cause any problems.</p><h4 id="temporary-and-permanent-redirects">Temporary and permanent redirects</h4><p>There are two different HTTP status codes for redirects:</p><ul><li>301 for permanent redirection<li>302 for temporary redirection</ul><p>The HTTP code 302 is often used, especially when using the Post / Redirect / Get pattern. Be careful when using this cause because it instructs the recipient to never again use the requested URL and use the new URL instead. If you don’t know which code you should use, use temporary redirects.</p><p>ASP.NET MVC offers for every redirect a temporary and permanent implementation. For example, you can use Redirect() for a temporary redirect or RedirectPermanent() for a permanent redirection.</p><h4 id="redirect-to-a-view"><span class="fontstyle0">Redirect to a view</span></h4><p>If you want to redirect to a view, use the Redirect or RedirectPermanent method with the folder and index name as a string parameter. You don’t have to provide the file ending of the view. The return value of this is RedirectResult.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Redirect-to-view.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Redirect-to-view.jpg" alt="Redirect to view" /></a><p> Redirect to view</p></div><h4 id="redirect-to-a-route">Redirect to a route</h4><p>To redirect from an action to a route use RedirectToRoute or RedirectToRoutePermanent. The methods take an anonymous type with the route information. The return value is RedirectToRouteResult.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Redirect-to-route.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Redirect-to-route.jpg" alt="Redirect to route" /></a><p> Redirect to route</p></div><h4 id="redirect-to-an-action">Redirect to an action</h4><p>More elegantly than redirecting to a route is redirecting to an action. RedirectToAction and RedirectToActionPermanent are wrapper for RedirectToRoute and RedirectToRoutePermanent but make the code cleaner in my opinion. The values provided as a parameter for the action and controller are not verified at compile time. This means that you are responsible for making sure that your target exists.</p><p> </p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/01/Redirect-to-action.jpg"><img loading="lazy" src="/assets/img/posts/2018/01/Redirect-to-action.jpg" alt="Redirect to action" /></a><p> Redirect to action</p></div><h2 id="conclusion">Conclusion</h2><p>In this post, I showed how to pass data into an action and how to retrieve data within an action from different sources. Then I presented some of the ActionResult types which are built-in into the MVC framework and also how to pass data between actions using ViewBag and TempData.. In the last part, I talked about the different ways how to perform redirects.</p><p>For more details about how controller and actions work, I highly recommend the books <a href="http://amzn.to/2mgRbTy" target="_blank" rel="noopener">Pro ASP.NET MVC 5</a> and <a href="http://amzn.to/2mfQ0nA" target="_blank" rel="noopener">Pro ASP.NET MVC 5 Plattform</a>.</p><p>I uploaded the source code to <a href="https://github.com/WolfgangOfner/MVC-ActionAndController" target="_blank" rel="noopener">GitHub</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/asp-net/'>ASP.NET</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/action/" class="post-tag no-text-decoration" >Action</a> <a href="/tags/actionresult/" class="post-tag no-text-decoration" >ActionResult</a> <a href="/tags/controller/" class="post-tag no-text-decoration" >Controller</a> <a href="/tags/mvc/" class="post-tag no-text-decoration" >MVC</a> <a href="/tags/redirect/" class="post-tag no-text-decoration" >Redirect</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Controllers and Actions - Programming With Wolfgang&url=https://www.programmingwithwolfgang.com/controllers-and-actions/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Controllers and Actions - Programming With Wolfgang&u=https://www.programmingwithwolfgang.com/controllers-and-actions/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Controllers and Actions - Programming With Wolfgang&url=https://www.programmingwithwolfgang.com/controllers-and-actions/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.programmingwithwolfgang.com/controllers-and-actions/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/programming-microservices-net-core-3-1/">Programming a Microservice with .NET Core 3.1</a><li><a href="/rabbitmq-in-an-asp-net-core-3-1-microservice/">RabbitMQ in an ASP .NET Core 3.1 Microservice</a><li><a href="/set-up-docker-compose-for-asp-net-core-3-1-microservices/">Set up Docker-Compose for ASP .NET Core 3.1 Microservices</a><li><a href="/override-appsettings-in-kubernetes/">Override Appsettings in Kubernetes</a><li><a href="/deploy-kubernetes-using-helm/">Deploy to Kubernetes using Helm Charts</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/aks/">AKS</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/helm/">Helm</a> <a class="post-tag" href="/tags/yaml/">YAML</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/built-filter-asp-net-mvc/"><div class="card-body"> <span class="timeago small" > Jan 20, 2018 <i class="unloaded">2018-01-20T16:53:11+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Built-in Filter in ASP.NET MVC</h3><div class="text-muted small"><p> Filters provide a simple and elegant way to implement cross-cutting concerns in your ASP.NET MVC application. Filter achieve this by injecting code into the request processing. Examples of cross-cu...</p></div></div></a></div><div class="card"> <a href="/routing-in-asp-net-mvc/"><div class="card-body"> <span class="timeago small" > Jan 13, 2018 <i class="unloaded">2018-01-13T15:34:13+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Routing in ASP.NET MVC</h3><div class="text-muted small"><p> Routing in ASP.NET MVC can be a really complex topic. In this post, I want to present the most used URL Patterns and explain how they work. Routing with Routes Routes can be created by adding the...</p></div></div></a></div><div class="card"> <a href="/unit-testing-controller-and-actions/"><div class="card-body"> <span class="timeago small" > Jan 15, 2018 <i class="unloaded">2018-01-15T20:10:13+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Unit Testing Controllers and Actions</h3><div class="text-muted small"><p> In my last post, I showed how to work with controllers and actions. This included passing data, return types of actions and redirects. In this post, I want to check if my implemented features work ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/routing-in-asp-net-mvc/" class="btn btn-outline-primary"><p>Routing in ASP.NET MVC</p></a> <a href="/unit-testing-controller-and-actions/" class="btn btn-outline-primary"><p>Unit Testing Controllers and Actions</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//programmingwithwolfgang.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://www.programmingwithwolfgang.com/controllers-and-actions/'; this.page.identifier = '/controllers-and-actions/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/wolfgang_ofner">Wolfgang Ofner</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/aks/">AKS</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/helm/">Helm</a> <a class="post-tag" href="/tags/yaml/">YAML</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.programmingwithwolfgang.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
