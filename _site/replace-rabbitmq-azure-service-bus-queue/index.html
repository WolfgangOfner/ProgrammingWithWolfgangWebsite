<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Replace RabbitMQ with Azure Service Bus Queues" /><meta name="author" content="Wolfgang Ofner" /><meta property="og:locale" content="en" /><meta name="description" content="Replace RabbitMQ with Azure Service Bus Queues to take advantage of the managed and scalable queue on Azure." /><meta property="og:description" content="Replace RabbitMQ with Azure Service Bus Queues to take advantage of the managed and scalable queue on Azure." /><link rel="canonical" href="/replace-rabbitmq-azure-service-bus-queue/" /><meta property="og:url" content="/replace-rabbitmq-azure-service-bus-queue/" /><meta property="og:site_name" content="Programming With Wolfgang" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-12T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Replace RabbitMQ with Azure Service Bus Queues" /><meta name="twitter:site" content="@wolfgang_ofner" /><meta name="twitter:creator" content="@Wolfgang Ofner" /><meta name="google-site-verification" content="xxsPm-h6A0B6a0QMgqXO80PU4DbMt4Dq06p-SGzB3TU" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Wolfgang Ofner"},"dateModified":"2022-04-20T16:43:20+02:00","datePublished":"2021-04-12T00:00:00+02:00","description":"Replace RabbitMQ with Azure Service Bus Queues to take advantage of the managed and scalable queue on Azure.","headline":"Replace RabbitMQ with Azure Service Bus Queues","mainEntityOfPage":{"@type":"WebPage","@id":"/replace-rabbitmq-azure-service-bus-queue/"},"url":"/replace-rabbitmq-azure-service-bus-queue/"}</script><title>Replace RabbitMQ with Azure Service Bus Queues | Programming With Wolfgang</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Programming With Wolfgang"><meta name="application-name" content="Programming With Wolfgang"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/author/author-wolfgang-ofner.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Programming With Wolfgang</a></div><div class="site-subtitle font-italic">Let's talk programming</div></div><div class="w-100 d-flex justify-content-center"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span></div><ul class="w-100" style="margin-top: 1em;"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="w-100" style="margin-top: 1em; text-align: center;"> <img src="/assets/img/author/mct-microsoft-certified-trainer.png" alt="MCT Microsoft Certified Trainer" width="200px" height="200px"></div><div class="w-100" style="margin-top: 1em; text-align: center;"> <img src="/assets/img/author/azure-solutions-architect-expert.png" alt="Azure Solutions Architect Expert" width="200px" height="200px"></div><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <a href="https://github.com/wolfgangofner" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/wolfgang_ofner" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/wolfgangofner" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['wolfgang','programmingwithwolfgang.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Replace RabbitMQ with Azure Service Bus Queues</h1><div class="post-meta text-muted d-flex flex-column"><div> <span> Posted <em class="" data-ts="1618178400" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 12, 2021 </em> </span> <span> Updated <em class="" data-ts="1650465800" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 20, 2022 </em> </span> by <span class="author"> By <em> Wolfgang Ofner </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1187 words"> <em>13 min</em></span> read</div></div><div class="post-content"><p>RabbitMQ is a great tool to connect microservices asynchronously but it also comes with a couple of downsides. The biggest downside is that you have to take care of running, monitoring, and updating it. Running a RabbitMQ Docker image in Kubernetes is quite easy but still requires some management. One of the best features of cloud provides are the platform as a service (PaaS) offerings. This means that the cloud provider, for example, Azure runs the platform for you and you don’t have to take care of updating or patching the software.</p><p>In this post, I will add a new class to my microservice so I can switch between RabbitMQ and Azure Service Bus.</p><p>This post is part of <a href="/microservice-series-from-zero-to-hero">“Microservice Series - From Zero to Hero”</a>.</p><h2 id="what-is-azure-service-bus"><span class="mr-2">What is Azure Service Bus</span><a href="#what-is-azure-service-bus" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Azure Service Bus is an enterprise messaging PaaS solution with many useful features. Some of these features are:</p><ul><li>Queues<li>Topics (one sender, multiple subscribers)<li>Transaction<li>Duplication filter<li>Dead message queues<li>Geo-disaster recovery</ul><p>Since it is a PaaS offering, Azure is managing the infrastructure which means that you as a developer can focus on implementing it and don’t have to think about maintaining, upgrading, or monitoring it. For this demo, I am using the Basic tier which has very limited features but only costs 0.043€ per million operations. In your production environment, you most likely will use the Standard tier.</p><h3 id="difference-between-azure-service-bus-queue-and-azure-queue"><span class="mr-2">Difference between Azure Service Bus Queue and Azure Queue</span><a href="#difference-between-azure-service-bus-queue-and-azure-queue" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Both queue solutions are very similar but Azure Service Bus comes with a First-In-First-Out guarantee. Additionally, it has more enterprise features in the Standard and Premium tier. For a more detailed comparison between Azure Service Bus and Azure Queue, see the <a href="https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted" target="_blank" rel="noopener noreferrer">documentation</a>.</p><h2 id="create-a-new-azure-service-bus-queue"><span class="mr-2">Create a new Azure Service Bus Queue</span><a href="#create-a-new-azure-service-bus-queue" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>First, you have to create an Azure Service Bus Namespace. In the Azure Portal, search for Service Bus and click on Create.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/04/Create-a-new-Service-Bus-Namespace.jpg"><img loading="lazy" data-src="/assets/img/posts/2021/04/Create-a-new-Service-Bus-Namespace.jpg" alt="Create a new Service Bus Namespace" data-proofer-ignore></a><p> Create a new Service Bus Namespace</p></div><p>Select your subscription, resource group, location, and pricing tier, and then provide a unique name. Click on Create and the Service Bus Namespace gets created.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/04/Configure-the-new-Azure-Service-Bus-Namespace.jpg"><img loading="lazy" data-src="/assets/img/posts/2021/04/Configure-the-new-Azure-Service-Bus-Namespace.jpg" alt="Configure the new Azure Service Bus Namespace" data-proofer-ignore></a><p> Configure the new Azure Service Bus Namespace</p></div><p>After the deployment, click on Queues and then add a new queue.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/04/Create-a-new-Queue.jpg"><img loading="lazy" data-src="/assets/img/posts/2021/04/Create-a-new-Queue.jpg" alt="Create a new Queue" data-proofer-ignore></a><p> Create a new Queue</p></div><p>Give the queue a name and leave all settings as they are.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/04/Configure-the-new-Queue.jpg"><img loading="lazy" data-src="/assets/img/posts/2021/04/Configure-the-new-Queue.jpg" alt="Configure the new Queue" data-proofer-ignore></a><p> Configure the new Queue</p></div><h3 id="configure-the-access-to-the-queue-using-shared-access-policies-sas"><span class="mr-2">Configure the Access to the Queue using Shared Access Policies (SAS)</span><a href="#configure-the-access-to-the-queue-using-shared-access-policies-sas" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>After the queue is created, click on it and then select the Shared access policies tab. There click on Add, select the Send checkbox and click on Save.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/04/Create-a-SAS-for-the-Queue.jpg"><img loading="lazy" data-src="/assets/img/posts/2021/04/Create-a-SAS-for-the-Queue.jpg" alt="Create a SAS for the Queue" data-proofer-ignore></a><p> Create a SAS for the Queue</p></div><p>We will use this SAS to allow the microservice to send messages to the queue. You can also give the manage permission if you want to allow your microservice to create queues but I prefer as few permissions as possible. Additionally, I will show in a future post <a href="/use-infrastructure-as-code-to-deploy-infrastructure">how to create the infrastructure using an Azure DevOps CI/CD pipeline</a>.</p><h2 id="send-messages-to-the-azure-service-bus-queue-from-a-microservice"><span class="mr-2">Send Messages to the Azure Service Bus Queue from a Microservice</span><a href="#send-messages-to-the-azure-service-bus-queue-from-a-microservice" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>You can find the code of the demo on <a href="https://github.com/WolfgangOfner/MicroserviceDemo" target="_blank" rel="noopener noreferrer">GitHub</a>.</p><p>The Azure Service Bus Queue is created and configured and now we can configure the microservice to send messages to the new queue. First, we add the following settings to the appsettings.json file:</p><script src="https://gist.github.com/WolfgangOfner/92945838d4751c6c601c0fd15b2954cf.js"></script><p>These settings contain the Azure Service Bus queue name, the connection string, and also a switch to use RabbitMQ or Azure Service Bus Queue. I used the in-memory switch already in a previous post, <a href="/microservice-with-database-kubernetes">Use a Database with a Microservice running in Kubernetes</a>. The queue switch will work the same way and either register the RabbitMQ service or the Azure Service Bus Queue service. In the appsettings.Development.json file, add the UserabbitMq attribute and set it to true.</p><p>Next, create a new class that will contain the Azure Service Bus options:</p><script src="https://gist.github.com/WolfgangOfner/f34227e6753663e041590fcdb8ec497c.js"></script><p>In the ConfigureServices method of the Startup.cs class, read the AzureServiceBus section into the previously created AzureServiceBusConfiguration class:</p><script src="https://gist.github.com/WolfgangOfner/7006891626f0dcc9dbcdc82475be87e5.js"></script><p>Additionally, read the UserabbitMq variable and either register the already existing RabbitMQ service or the Azure Service Bus service:</p><script src="https://gist.github.com/WolfgangOfner/78a0e1fd77f112a88f4b1c7d949aaed7.js"></script><p>That is all the configuration needed. Lastly, go to the CustomerApi.Messaging.Send project and install the Azure.Messaging.ServiceBus NuGet package and then create a new class called CustomerUpdateSenderServiceBus. This class inherits from the ICustomerUpdateSender interface and takes a customer and sends it to the Azure Service Bus Queue. The full class looks as follows:</p><script src="https://gist.github.com/WolfgangOfner/a1c2f579bd1c4663d5f130cc3f17d52a.js"></script><p>This code is very simple but will throw an exception if the queue does not exist.</p><h2 id="test-the-azure-service-bus-integration-in-the-microservice"><span class="mr-2">Test the Azure Service Bus integration in the Microservice</span><a href="#test-the-azure-service-bus-integration-in-the-microservice" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Start the microservice and update a Customer using the Swagger UI.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/04/Update-an-existing-customer.jpg"><img loading="lazy" data-src="/assets/img/posts/2021/04/Update-an-existing-customer.jpg" alt="Update an existing customer" data-proofer-ignore></a><p> Update an existing customer</p></div><p>After updating the customer, open the Service Bus Queue in the Azure Portal and select the Service Bus Explorer tab. There, you should see one message in the queue.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/04/One-message-got-sent-to-the-Queue.jpg"><img loading="lazy" data-src="/assets/img/posts/2021/04/One-message-got-sent-to-the-Queue.jpg" alt="One message got sent to the Queue" data-proofer-ignore></a><p> One message got sent to the Queue</p></div><p>Select the Peek option (look at the first message without deleting it) and you should see your previously edited customer.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/04/The-updated-customer-got-sent-to-the-Queue.jpg"><img loading="lazy" data-src="/assets/img/posts/2021/04/The-updated-customer-got-sent-to-the-Queue.jpg" alt="The updated customer got sent to the Queue" data-proofer-ignore></a><p> The updated customer got sent to the Queue</p></div><h2 id="deploy-the-microservice-to-kubernetes-and-use-the-azure-service-bus"><span class="mr-2">Deploy the Microservice to Kubernetes and use the Azure Service Bus</span><a href="#deploy-the-microservice-to-kubernetes-and-use-the-azure-service-bus" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To use the Azure Service Bus Queue in Kubernetes, you have to tell your microservice the connection string. This works the same way as providing a database connection string which I described in <a href="/microservice-with-database-kubernetes">Use a Database with a Microservice running in Kubernetes</a>.</p><p>First, click on Variables and add a new variable inside your Azure DevOps pipeline. Name the variable AzureServiceBusConnectionString and past the connection string from the previously created SAS as the value.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2021/04/Add-the-Service-Bus-Queue-Connection-String.jpg"><img loading="lazy" data-src="/assets/img/posts/2021/04/Add-the-Service-Bus-Queue-Connection-String.jpg" alt="Add the Service Bus Queue Connection String" data-proofer-ignore></a><p> Add the Service Bus Queue Connection String</p></div><p>After adding the variable, add the following code to the values.yaml file.</p><script src="https://gist.github.com/WolfgangOfner/e3e9c3c43c06a2480d9a6cd8897cebb5.js"></script><p>This code creates a secret in Kubernetes with the value of the previously created variable. This secret will overwrite the appsettings of the microservice and therefore allow it to access the Azure Service Bus Queue and no sensitive information was exposed in the pipeline.</p><p>This code is using Helm to create the secret and Tokenizer to replace __AzureServiceBusConnectionString__ with the value of the variable AzureServiceBusConnectionString. For more information on these topics see <a href="/deploy-kubernetes-using-helm">Deploy to Kubernetes using Helm Charts</a>, <a href="/override-appsettings-in-kubernetes">Override Appsettings in Kubernetes</a> and <a href="/replace-helm-variables-tokenizer">Replace Helm Chart Variables in your CI/CD Pipeline with Tokenizer</a></p><h2 id="conclusion"><span class="mr-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Cloud providers, especially Azure, offer a wide range of services. This allows developers to use different PaaS solutions which help them to focus on their implementation, rather than running and maintaining the infrastructure. Azure Service Bus is an enterprise queueing solution and can replace RabbitMQ if you want to take advantage of the PaaS offering instead of running RabbitMQ yourself. I added a switch to the microservice, so you can easily switch between RabbitMQ and Azure Service Bus Queue.</p><p>In <a href="/automatically-set-service-bus-queue-connection-string-during-deployment">Automatically set Azure Service Bus Queue Connection Strings during the Deployment</a>, I have replaced the variable with some automation to automatically read the connection string. This allows for a more flexible and robust deployment process.</p><p><a href="/azure-functions-process-queue-messages">In my next post</a>, I will show you how to replace the background service in the OrderApi with Azure Functions to use a serverless solution to process the messages on the queue.</p><p>You can find the code of the demo on <a href="https://github.com/WolfgangOfner/MicroserviceDemo" target="_blank" rel="noopener noreferrer">GitHub</a>.</p><p>This post is part of <a href="/microservice-series-from-zero-to-hero">“Microservice Series - From Zero to Hero”</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/cloud/'>Cloud</a>, <a href='/categories/devops/'>DevOps</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/devops/" class="post-tag no-text-decoration" >DevOps</a> <a href="/tags/ci-cd/" class="post-tag no-text-decoration" >CI-CD</a> <a href="/tags/azure-devops/" class="post-tag no-text-decoration" >Azure DevOps</a> <a href="/tags/azure/" class="post-tag no-text-decoration" >Azure</a> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >Kubernetes</a> <a href="/tags/aks/" class="post-tag no-text-decoration" >AKS</a> <a href="/tags/helm/" class="post-tag no-text-decoration" >Helm</a> <a href="/tags/azure-service-bus/" class="post-tag no-text-decoration" >Azure Service Bus</a> <a href="/tags/rabbitmq/" class="post-tag no-text-decoration" >RabbitMQ</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Replace+RabbitMQ+with+Azure+Service+Bus+Queues+-+Programming+With+Wolfgang&url=%2Freplace-rabbitmq-azure-service-bus-queue%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Replace+RabbitMQ+with+Azure+Service+Bus+Queues+-+Programming+With+Wolfgang&u=%2Freplace-rabbitmq-azure-service-bus-queue%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Replace+RabbitMQ+with+Azure+Service+Bus+Queues+-+Programming+With+Wolfgang&url=%2Freplace-rabbitmq-azure-service-bus-queue%2F" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=%2Freplace-rabbitmq-azure-service-bus-queue%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/deploy-kubernetes-using-helm/">Deploy to Kubernetes using Helm Charts</a><li><a href="/cqrs-in-asp-net-core-3-1/">CQRS in ASP .NET Core 3.1</a><li><a href="/mediator-pattern-in-asp-net-core-3-1/">Mediator Pattern in ASP .NET Core 3.1</a><li><a href="/rabbitmq-in-an-asp-net-core-3-1-microservice/">RabbitMQ in an ASP .NET Core 3.1 Microservice</a><li><a href="/dockerize-an-asp-net-core-microservice-and-rabbitmq/">Dockerize an ASP .NET Core Microservice and RabbitMQ</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/aks/">AKS</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/helm/">Helm</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/yaml/">YAML</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/use-infrastructure-as-code-to-deploy-infrastructure/"><div class="card-body"> <em class="small" data-ts="1624831200" data-df="ll" > Jun 28, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Use Infrastructure as Code to deploy your Infrastructure with Azure DevOps</h3><div class="text-muted small"><p> Back in the day developers had to go through a lengthy process to get new hardware deployed. Often it took several weeks and then there was still something missing or the wrong version of the neede...</p></div></div></a></div><div class="card"> <a href="/readiness-health-probes-kubernetes/"><div class="card-body"> <em class="small" data-ts="1616968800" data-df="ll" > Mar 29, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Readiness and Liveness Probes in Kubernetes</h3><div class="text-muted small"><p> Kubernetes automatically checks if a pod is healthy and also when it is ready to accept traffic. These checks are done using a readiness probe and liveness probe respectively. This post shows how t...</p></div></div></a></div><div class="card"> <a href="/azure-container-registry-kubernetes/"><div class="card-body"> <em class="small" data-ts="1617573600" data-df="ll" > Apr 5, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Use Azure Container Registry in Kubernetes</h3><div class="text-muted small"><p> Dockerhub is like GitHub for Docker containers. You can sign up for free and get unlimited public repos and one private repo. This is great for developers like me who want to make their containers ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/azure-container-registry-kubernetes/" class="btn btn-outline-primary" prompt="Older"><p>Use Azure Container Registry in Kubernetes</p></a> <a href="/azure-functions-process-queue-messages/" class="btn btn-outline-primary" prompt="Newer"><p>Use Azure Functions to Process Queue Messages</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = '/replace-rabbitmq-azure-service-bus-queue/'; this.page.identifier = '/replace-rabbitmq-azure-service-bus-queue/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://programmingwithwolfgang.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/aks/">AKS</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/helm/">Helm</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/yaml/">YAML</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-112077092-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-112077092-1'); }); </script>
