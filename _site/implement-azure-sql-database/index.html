<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Implement Azure SQL database" /><meta name="author" content="Wolfgang Ofner" /><meta property="og:locale" content="en_US" /><meta name="description" content="Microsoft Azure offers with Azure SQL database a great alternative to an on-premise SQL database. In this post, I will talk about the advantages of having the database in the cloud, how to get data into the cloud and how to use Elastic pools to share resources between several databases." /><meta property="og:description" content="Microsoft Azure offers with Azure SQL database a great alternative to an on-premise SQL database. In this post, I will talk about the advantages of having the database in the cloud, how to get data into the cloud and how to use Elastic pools to share resources between several databases." /><link rel="canonical" href="https://www.programmingwithwolfgang.com/implement-azure-sql-database/" /><meta property="og:url" content="https://www.programmingwithwolfgang.com/implement-azure-sql-database/" /><meta property="og:site_name" content="Programming With Wolfgang" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-04-26T21:52:05+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Implement Azure SQL database" /><meta name="twitter:site" content="@wolfgang_ofner" /><meta name="twitter:creator" content="@Wolfgang Ofner" /><meta name="google-site-verification" content="xxsPm-h6A0B6a0QMgqXO80PU4DbMt4Dq06p-SGzB3TU" /> <script type="application/ld+json"> {"datePublished":"2018-04-26T21:52:05+02:00","dateModified":"2021-05-19T22:25:07+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.programmingwithwolfgang.com/implement-azure-sql-database/"},"@type":"BlogPosting","description":"Microsoft Azure offers with Azure SQL database a great alternative to an on-premise SQL database. In this post, I will talk about the advantages of having the database in the cloud, how to get data into the cloud and how to use Elastic pools to share resources between several databases.","author":{"@type":"Person","name":"Wolfgang Ofner"},"url":"https://www.programmingwithwolfgang.com/implement-azure-sql-database/","headline":"Implement Azure SQL database","@context":"https://schema.org"}</script><title>Implement Azure SQL database | Programming With Wolfgang</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-112077092-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-112077092-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/author/author-wolfgang-ofner.jpg" alt="author wolfgang ofner" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Programming With Wolfgang</a></div><div class="site-subtitle font-italic">Let's talk programming</div></div><div class="w-100 d-flex justify-content-center"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span></div><ul class="w-100" style="margin-top: 1em;"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/wolfgangofner" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/wolfgang_ofner" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/wolfgangofner" aria-label="linkedin" class="order-5" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['wolfgang','programmingwithwolfgang.com'].join('@')" aria-label="email" class="order-6" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-7" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="d-sm-none row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Implement Azure SQL database</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Implement Azure SQL database</div><div style="visibility:hidden;"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel">Cancel</span></div></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Implement Azure SQL database</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Apr 26, 2018, 9:52 PM +0200" > Apr 26, 2018 <i class="unloaded">2018-04-26T21:52:05+02:00</i> </span> by <span class="author"> Wolfgang Ofner </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, May 19, 2021, 10:25 PM +0200" > May 19 <i class="unloaded">2021-05-19T22:25:07+02:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2323 words">27 min</span></div></div><div class="post-content"><p>Microsoft Azure offers with Azure SQL database a great alternative to an on-premise SQL database. In this post, I will talk about the advantages of having the database in the cloud, how to get data into the cloud and how to use Elastic pools to share resources between several databases. The last section will be about implementing graph functionality in an Azure SQL database.</p><h2 id="create-an-azure-sql-database">Create an Azure SQL database</h2><p>To create an Azure SQL database in the Azure portal, follow these steps:</p><ol><li>In the Azure portal go to SQL databases and click +Add.<li>On the SQL Database blade provide:<ul><li>Name<li>Subscription<li>Resource group<li>Source (Blank database, Demo database or a backup)<li>Server<li>Pricing tier</ul><li>After you entered all information, click on Create.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Create-a-new-SQL-database.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Create-a-new-SQL-database.jpg" alt="Create a new Azure SQL database" /></a><p> Create a new Azure SQL database</p></div><h2 id="choosing-the-appropriate-database-tier-and-performance-level">Choosing the appropriate database tier and performance level</h2><p>Azure offers three different pricing tiers to choose from. The major difference between them is in a measurement called database throughput units (DTUs). A DTU is a blended measure of CPU, memory, disk reads, and disk writes. SQL database is a shared resource with other Azure customers, sometimes performance is not stable or predictable. As you go up in performance tiers, you also get better predictability in performance.</p><p>The three pricing tiers are:</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><tr><td> Pricing tier<td> Description<tr><td> Basic<td> The Basic tier is meant for light workloads. I use this tier for testing and at the beginning of a new project.<tr><td> Standard<td> The Standard tier is used for most production online transaction processing (OLTP) databases. The performance is more predictable than the basic tier. In addition, there are 13 performance levels under this tier, levels S0 to S12.<tr><td> Premium<td> The Premium tier continues to scale at the same level as the Standard tier. In addition, performance is typically measured in seconds. For instance, the basic tier can handle 16,600 transactions per hour. The standard S2 level can handle 2,570 transactions per minute. The top tier premium of premium can handle 75,000 transactions per second.</table></div><p>Each tier has a 99,99 percent up-time SLA, backup and restore capabilities, access to the same tooling, and the same database engine features.</p><h3 id="analyzing-metrics">Analyzing metrics</h3><p>To review the metrics of your Azure SQL database, follow these steps:</p><ol><li>In the Azure portal go to your Azure SQL database.<li>On the Overview blade, click on the Resource graph.<li>This opens the Metrics blade. There select the desired metrics, you wish to analyze.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Configure-the-metrics-graph.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Configure-the-metrics-graph.jpg" alt="Configure the metrics graph" /></a><p> Configure the metrics graph</p></div><p>Note that there is nothing on the graph because I just created the database and haven’t used it yet.</p><h2 id="configure-and-performing-point-in-time-recovery">Configure and performing point in time recovery</h2><p>Azure SQL database does a full backup every week, a differential backup each day, and an incremental log backup every five minutes. The incremental log backup allows for a point in time restore, which means the database can be restored to any specific time of the day. This means that if you accidentally delete a customer’s table from your database, you will be able to recover it with minimal data loss if you know the time frame to restore from that has the most recent copy.</p><p>The further away you get from the last differential backup determines the longer the restore operation takes. When you restore a new database, the service tier stays the same, but the performance level changes to the minimum of that tier.</p><p>The retention period of the backup depends on the pricing tier. Basic retains backups for 7 days, Standard and Premium for 35 days. A deleted database can be restored, as long as you are in within the retention period.</p><h3 id="restore-an-azure-sql-database">Restore an Azure SQL database</h3><p>To restore an Azure SQL database, follow these steps:</p><ol><li>In the Azure portal, on the Overview blade of your database, click on Restore.<li>On the Restore blade, select a restore point, either Point-in-time or Long-term backup retention.<li>If you selected Point-in-time, select a date and time. If you selected Long-term backup retention, select the backup from the drop-down list.<li>Optionally change the Pricing tier.<li>Click on OK to restore the backup.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Restore-an-Azure-SQL-database.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Restore-an-Azure-SQL-database.jpg" alt="Restore an Azure SQL database" /></a><p> Restore an Azure SQL database</p></div><h3 id="restore-a-deleted-azure-sql-database">Restore a deleted Azure SQL database</h3><p>To restore a deleted Azure SQL database, follow these steps:</p><ol><li>In the Azure portal, go to your SQL server and select the Deleted databases blade under the Setting menu.<li>On the Deleted databases blade, select the database, you want to restore.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Select-a-deleted-Azure-SQL-database-to-restore.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Select-a-deleted-Azure-SQL-database-to-restore.jpg" alt="Select a deleted Azure SQL database to restore" /></a><p> Select a deleted Azure SQL database to restore</p></div><ol start="3"><li> On the  Restore blade, change the database name if desired and click OK to restore the database.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Restore-the-deleted-Azure-SQL-database.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Restore-the-deleted-Azure-SQL-database.jpg" alt="Restore the deleted Azure SQL database" /></a><p> Restore the deleted Azure SQL database</p></div><h2 id="enable-geo-replication">Enable geo-replication</h2><p>By default, every Azure SQL database is copied three times across the datacenter. Additionally, you can configure geo-replication. The advantages of geo-replication are:</p><ul><li><span class="fontstyle0">You can fail over to a different data center in the event of a natural disaster or other intentionally malicious act.</span><li><span class="fontstyle0">Online secondary databases are readable, and they can be used as load balancers for read-only workloads such as reporting.</span><li><span class="fontstyle0">With automatic asynchronous replication, after an online secondary database has been seeded, updates to the primary database are automatically copied to the secondary database.</span></ul><h3 id="create-an-online-secondary-database">Create an online secondary database</h3><p>To enable geo-replication, follow these steps:</p><ol><li>Go to your Azure SQL database in the Azure portal and click on Geo-Replication under the Settings menu.<li>Select the target region.<li>On the Create secondary blade, enter the server and pricing information.<li>Click on OK.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Create-an-online-secondary-database.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Create-an-online-secondary-database.jpg" alt="Create an online secondary database" /></a><p> Create an online secondary database</p></div><h2 id="import-and-export-schema-and-data">Import and export schema and data</h2><p>To export the metadata and state data of a SQL server database, you can create a BACPAC file.</p><h3 id="export-a-bacpac-file-from-a-sql-database">Export a BACPAC file from a SQL database</h3><p>To create a BACPAC file, follow these steps:</p><ol><li>Open SQL Server Management Studio and connect to your database.<li>Right-click on the database, select Tasks and click on Export Data-tier Application.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Export-your-source-database.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Export-your-source-database.jpg" alt="Export your source database" /></a><p> Export your source database</p></div><ol start="3"><li> In the Export Data-tier Application wizard, you can export the BACPAC file to Azure into a blob storage or to a local storage device.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Select-a-location-for-the-export-file.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Select-a-location-for-the-export-file.jpg" alt="Select a location for the export file" /></a><p> Select a location for the export file</p></div><ol start="4"><li> After you selected the export destination, click Next and then Finish to export the file.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Export-successful.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Export-successful.jpg" alt="Export successful" /></a><p> Export successful</p></div><h3 id="import-a-bacpac-file-into-azure-sql-database">Import a BACPAC file into Azure SQL database</h3><p>To import a BACPAC file into your Azure SQL database, follow these steps:</p><ol><li>Open SQL Server Management Studio and connect to your Azure SQL server. You can find the server name in the Azure Portal on your SQL server. Go to Properties under the Settings menu.<li>If you can’t connect to your server, you may have to allow your UP address in the firewall. Select Firewalls and virtual network under the Settings menu and enter your IP address or a range of IPs.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Configure-the-firewall-of-your-SQL-server.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Configure-the-firewall-of-your-SQL-server.jpg" alt="Configure the firewall of your SQL server" /></a><p> Configure the firewall of your SQL server</p></div><ol start="3"><li> After you are connected to the server, right-click on the database folder and select Import Data-tier Application.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Start-the-Import-Data-tier-Application-wizard.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Start-the-Import-Data-tier-Application-wizard.jpg" alt="Start the Import Data-tier Application wizard" /></a><p> Start the Import Data-tier Application wizard</p></div><ol start="4"><li> In the Import Data-tier Application wizard, select the BACPAC file from a local disk or from your Azure storage account.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Select-your-BACPAC-file-for-the-import.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Select-your-BACPAC-file-for-the-import.jpg" alt="Select your BACPAC file for the import" /></a><p> Select your BACPAC file for the import</p></div><ol start="5"><li> On the Database Settings blade, enter a database name and the pricing tier.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Enter-a-database-name-and-select-the-pricing-tier.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Enter-a-database-name-and-select-the-pricing-tier.jpg" alt="Enter a database name and select the pricing tier" /></a><p> Enter a database name and select the pricing tier</p></div><ol start="6"><li> Click Next and then Finish.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/The-summary-of-the-import-wizard.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/The-summary-of-the-import-wizard.jpg" alt="The summary of the import wizard" /></a><p> The summary of the import wizard</p></div><ol start="7"><li> After the import process is finished, you can see the database in your SQL server in the Azure portal by selecting the SQL databases blade under the Settings menu.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/The-database-got-created-by-the-imported-schema.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/The-database-got-created-by-the-imported-schema.jpg" alt="The database got created by the imported schema" /></a><p> The database got created by the imported schema</p></div><h2 id="ScaleAzureSQLdatabases">Scale Azure SQL databases</h2><p>You can scale-up and scale-out your Azure SQL databases.</p><p>Scaling-up means to add CPU, memory, and better disk i/o to handle the load. To do that click in the Azure portal on your database on Database size under the monitoring menu and move the slider to the right, or select a higher pricing tier.</p><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Scale-out-your-Azure-SQL-database.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Scale-out-your-Azure-SQL-database.jpg" alt="Scale-up your Azure SQL database" /></a><p> Scale-up your Azure SQL database</p></div><p>Scaling-up will give you more DTUs.</p><p>Scaling-out means breaking apart a database into smaller pieces. This is called sharding. Methods for sharding can be, for example, by function, by geo-location or by business unit.</p><p>Another reason for sharding can be that the database is too large to be stored in a single Azure SQL database or that taking a backup takes too long due to the size of the database.</p><p>To increase the performance, a shard map is used. This is usually a table or database that tells the application where data actually is and where to look for it. A shard map also keeps you from rewriting a big part of your application to handle sharding.</p><p>Sharding is easily implemented in Azure Table Storage and Azure Cosmos DB but is way more difficult in a relational database. The complexity comes from being transactionally consistent, while having data available and spread throughout several databases.</p><p>To help developers, Microsoft released a set of tools called Elastic Database Tools that are compatible with Azure SQL database.  <span class="fontstyle0">This client library can be used in your application to create sharded databases. It has a split-merge tool that will allow you to create new nodes or drop nodes without data loss. It also includes a tool that will keep schema consistent across all the nodes by running scripts on each node individually.</span></p><h2 id="managed-elastic-pools-including-dtus-and-edtus">Managed elastic pools, including DTUs and eDTUs</h2><p>A single SQL database server can have several databases on it. Those databases can each have their own size and pricing tier. This might work out well if you always know exactly how large each database will and how many DTUs are needed for each one. What happens if you don’t really know that? What if you want all your databases on one server to share their DTUs? The solution for this are Elastic pools.</p><p>Elastic pools enable you to purchase elastic Database Transaction Units (eDTUs) for a pool of multiple databases. The user adds databases to the pool, sets the minimum and maximum eDTUs for each database, and sets the eDTU limit of the pool based on your budget. This means that within the pool, each database is given the ability to auto-scale in a set range.</p><h3 id="create-an-elastic-pool">Create an Elastic pool</h3><p>To create an Elastic pool, follow these steps:</p><ol><li>Go to your SQL server in the Azure portal and click on +New pool on the Overview blade.<li>On the Elastic database pool blade, provide a name and select a pricing tier under the Configure pool setting.<li>On the Resource Configuration &amp; Pricing blade, click on Databases and then +Add databases to add your databases.</ol><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Create-a-new-Elastic-pool.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Create-a-new-Elastic-pool.jpg" alt="Create a new Elastic pool" /></a><p> Create a new Elastic pool</p></div><ol start="4"><li> Click OK to create your Elastic pool.</ol><h2 id="implement-azure-sql-data-sync">Implement Azure SQL Data Sync</h2><p>SQL Data Sync allows you to <span class="fontstyle0">bi-directionally</span> replicate data between two Azure SQL databases or between an Azure SQL database and an on-premise SQL server.</p><p>Azure SQL Data Sync has the following attributes:</p><div class="table-responsive"><table class="table table-striped table-bordered table-hover"><tr><td> Attribute<td> Description<tr><td> Sync Group<td> A Sync Group is a group of databases that you want to synchronize using Azure SQL Data Sync.<tr><td> Sync Schema<td> A Sync Schema is the data you want to synchronize.<tr><td> Sync Direction<td> The Sync Direction allows you to synchronize data in either one direction or bi-directionally.<tr><td> Sync Interval<td> Sync Interval controls how often synchronization occurs.<tr><td> Conflict Resolution Policy<td> A Conflict Resolution Policy determines who wins if data conflicts with one another.</table><p> The following screenshot shows how a data sync infrastructure could look like.</p></div><div class="col-12 col-sm-10 aligncenter"> <a href="/assets/img/posts/2018/04/Azure-Data-Sync-diagram.jpg"><img loading="lazy" src="/assets/img/posts/2018/04/Azure-Data-Sync-diagram.jpg" alt="Azure Data Sync diagram" /></a><p> Azure Data Sync diagram (<a href="http://amzn.to/2EWNWMF" target="_blank" rel="noopener">Source</a>)</p></div><p>The hub database must always be an Azure SQL database. A member database can either be an Azure SQL database or an on-premise SQL server.</p><p>It is important to note that this is a method of keeping data consistent across multiple databases, it is not an ETL (Extract, Transform and Load) tool. This should not be used to populate a data warehouse or to migrate an on-premise SQL server to the cloud. This can be used to populate a read-only version of the database for reporting, but only if the schema is 100% consistent.</p><h2 id="implement-graph-database-functionality-in-azure-sql-database">Implement graph database functionality in Azure SQL database</h2><p>A graph database is a NoSQL solution and introduces two new vocabulary words: nodes and relationships.</p><p>Nodes are entities in relational database terms and a relationship shows that a connection between nodes exists. The relationship in a graph database is hierarchical, where it is flat in a relational database.</p><p>A graph is an abstract representation of a set of objects where nodes are linked with relationships in a hierarchy. A graph database is a database with an explicit and enforceable graph structure. Another key difference between a relational database and a graph database is that as the number of nodes increase, the performance cost stays the same. Joining tables will burden the relational database and is a common source of performance issues when scaling. Graph databases don’t suffer from that issue.</p><p>Relational databases are optimized for aggregation, whereas graph databases are optimized for having plenty of connections between nodes.</p><p>In Azure SQL database, graph-like capabilities are implemented through T-SQL. You can create graph objects in T-SQL with the following syntax:</p><p><span class="fontstyle0">Create Table Person(ID Integer Primary Key, Name Varchar(100)) As Node;<br /> Create Table kids (Birthdate date) As Edge;</span></p><p>A query can look like this:</p><p><span class="fontstyle0">SELECT Restaurant.name<br /> FROM Person, likes, Restaurant<br /> WHERE MATCH (Person-(likes)-&gt;Restaurant)<br /> AND Person.name = ‘Wolfgang’;</span></p><p>This query will give you every restaurant name which is liked by a person named Wolfgang.</p><h2 id="conclusion">Conclusion</h2><p>In this post, I showed how to create an Azure SQL database and how to export the schema and metadata from your on-premise database to move it into the cloud. After creating the database in the cloud, I talked about restoring a backup and enabling geo-replication to increase the data security. Next, I talked about leveraging Elastic pools to dynamically share the resources between several databases and by doing so keeping your costs low. The last section talked about implementing graph database functionality with your Azure SQL database.</p><p>For more information about the 70-532 exam get the <a href="http://amzn.to/2EWNWMF" target="_blank" rel="noopener">Exam Ref book from Microsoft</a> and continue reading my blog posts. I am covering all topics needed to pass the exam. You can find an overview of all posts related to the 70-532 exam <a href="/prepared-for-the-70-532-exam/" target="_blank" rel="noopener">here</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/cloud/'>Cloud</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/70-532/" class="post-tag no-text-decoration" >70-532</a> <a href="/tags/azure/" class="post-tag no-text-decoration" >Azure</a> <a href="/tags/certification/" class="post-tag no-text-decoration" >Certification</a> <a href="/tags/exam/" class="post-tag no-text-decoration" >Exam</a> <a href="/tags/learning/" class="post-tag no-text-decoration" >Learning</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Implement Azure SQL database - Programming With Wolfgang&url=https://www.programmingwithwolfgang.com/implement-azure-sql-database/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Implement Azure SQL database - Programming With Wolfgang&u=https://www.programmingwithwolfgang.com/implement-azure-sql-database/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Implement Azure SQL database - Programming With Wolfgang&url=https://www.programmingwithwolfgang.com/implement-azure-sql-database/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.programmingwithwolfgang.com/implement-azure-sql-database/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/azure-kubernetes-service-getting-started/">Azure Kubernetes Service - Getting Started</a><li><a href="/microservice-series-from-zero-to-hero/">Microservice Series - From Zero to Hero</a><li><a href="/deploy-kubernetes-azure-devops/">Deploy to Azure Kubernetes Service using Azure DevOps YAML Pipelines</a><li><a href="/collect-and-query-kubernetes-logs-with-grafana-loki/">Collect and Query your Kubernetes Cluster Logs with Grafana Loki</a><li><a href="/use-infrastructure-as-code-to-deploy-infrastructure/">Use Infrastructure as Code to deploy your Infrastructure with Azure DevOps</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/aks/">AKS</a> <a class="post-tag" href="/tags/certification/">Certification</a> <a class="post-tag" href="/tags/exam/">Exam</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/prepared-for-the-70-532-exam/"><div class="card-body"> <span class="timeago small" > Feb 23, 2018 <i class="unloaded">2018-02-23T14:33:48+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How I prepared for the 70-532 Exam</h3><div class="text-muted small"><p> Recently I started to prepare for the Microsoft certification exam 70-532 “Developing Microsoft Azure Solutions” using the official Exam Ref book. This post contains a comprehensive list of blog po...</p></div></div></a></div><div class="card"> <a href="/deploy-workload-on-azure-arm-virtual-machines/"><div class="card-body"> <span class="timeago small" > Mar 5, 2018 <i class="unloaded">2018-03-05T14:18:57+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Deploy workload on Azure ARM virtual machines</h3><div class="text-muted small"><p> Azure ARM virtual machines can run a lot of different operating systems. In this posts, I will give an overview of these different types and I will also show how to create them in the Azure Portal....</p></div></div></a></div><div class="card"> <a href="/perform-configuration-management/"><div class="card-body"> <span class="timeago small" > Mar 6, 2018 <i class="unloaded">2018-03-06T12:21:11+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Perform Configuration Management</h3><div class="text-muted small"><p> In this post, I want to show how to use Windows PowerShell Desired State Configuration (DSC) and the VM Agent to perform various configuration management tasks like remote debugging and at the end,...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/manage-access-and-monitor-storage/" class="btn btn-outline-primary"><p>Manage access and monitor storage</p></a> <a href="/implement-azure-cosmos-db-documentdb/" class="btn btn-outline-primary"><p>Implement Azure Cosmos DB DocumentDB</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//programmingwithwolfgang.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://www.programmingwithwolfgang.com/implement-azure-sql-database/'; this.page.identifier = '/implement-azure-sql-database/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/wolfgang_ofner">Wolfgang Ofner</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/azure/">Azure</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/learning/">Learning</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/aks/">AKS</a> <a class="post-tag" href="/tags/certification/">Certification</a> <a class="post-tag" href="/tags/exam/">Exam</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.programmingwithwolfgang.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
